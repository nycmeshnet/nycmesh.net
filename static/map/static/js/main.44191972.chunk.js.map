{"version":3,"sources":["components/NodeName.js","components/SearchBar/NodeRow.js","components/SearchBar/component.js","components/SearchBar/connected.js","actions/index.js","utils/index.js","components/MapView/Sector.js","components/MapView/NodeMarker.js","components/MapView/KioskMarker.js","components/MapView/LinkLine.js","components/NodeDetail/component.js","components/NodeDetail/connected.js","components/Gallery/component.js","components/Gallery/connected.js","components/MapView/component.js","components/MapView/styles.js","components/MapView/connected.js","components/Filters/component.js","components/Filters/connected.js","components/Stats/component.js","components/Stats/connected.js","components/Log/component.js","components/Log/connected.js","reducers/index.js","App.js","index.js"],"names":["icons","dead","react_default","a","createElement","xmlns","width","height","cx","cy","r","stroke","strokeWidth","fill","opacity","potential","potential-hub","potential-supernode","active","remote","kiosk","omni","hub","supernode","linkNYC Classic","stroke-width","linkNYC 5G","NodeName","_this$props","this","props","node","search","name","concat","id","className","type","main_default","highlightClassName","searchWords","autoEscape","textToHighlight","notes","PureComponent","NodeRow","onClick","Link","to","key","NodeName_NodeName","SearchBar","state","filteredNodes","showDropdown","focused","keyDownHandler","handleKeyDown","bind","window","addEventListener","removeEventListener","event","history","_this$state","keyCode","length","push","setState","refs","blur","prevProps","prevState","nodes","filterSearch","renderSearchBar","renderList","_this2","toggleFilters","focus","viewBox","strokeLinecap","strokeLinejoin","style","minWidth","x1","y1","x2","y2","ref","value","placeholder","spellCheck","autoCorrect","onFocus","onBlur","onChange","target","renderClearButton","stopPropagation","_this3","map","NodeRow_NodeRow","_this4","lowerSearch","toLowerCase","Object","toConsumableArray","filter","parseInt","notesMatch","indexOf","nameMatches","sort","b","status","withRouter","connect","ownProps","tickets","dispatch","PureSearchBar","nodeColors","NN assigned","linkNYC","pop","ap","sector","backbone","sectorColors","default","visibilityMultipliers","highlight","secondary","dim","zIndexes","Sector","visibility","filters","_sector$node$coordina","slicedToArray","coordinates","lng","lat","radius","azimuth","visibilityMultiplier","multiplier","undefined","intervalCount","Math","ceil","fillOpacity","fillColor","getFillColor","zIndex","interval","Array","keys","index","path","centerPoint","PRlat","PI","PRlng","cos","PGpoints","lat1","lon1","sin","lat2","lon2","theta","gamma","PGlon","PGlat","getPath","lib","options","strokeColor","strokeOpacity","clickable","_this$props2","NodeMarker","visible","memberNodes","_coordinates","title","n","join","_this$getMarkerProps","getMarkerProps","icon","adjustedZ","getZIndex","getOpacity","react","defaultPosition","defaultTitle","renderSectors","sectors","Sector_Sector","defaultZIndex","_this$props3","url","anchor","x","y","VisibilityMarker","NodeMarker_NodeMarker","assign","KioskMarker","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleClick","showInfo","closeClick","isClassic","_kiosk$coordinates","onCloseClick","street_address","LinkLine","link","fromNode","toNode","_fromNode$coordinates","lng1","_toNode$coordinates","lng2","latlng1","latlng2","_this$getLineProps","getLineProps","strokeWeight","defaultOpacity","isBackbone","bonus","activeColor","getPixelPositionOffset","NodeDetail","nodeId","nodesById","position","google","maps","LatLng","mapPaneName","OverlayView","OVERLAY_MOUSE_TARGET","preventMapHitsFrom","renderImage","version","aria-hidden","fillRule","d","panoramas","firstPanorama","backgroundImage","Gallery","getPanoramas","preventDefault","match","_match$params","params","panoId","panoIdInt","nextPanoId","prevPanoId","_match$params2","src","react_document_title_default","open","alt","renderPreviews","_match$params3","panorama","PureGallery","DEFAULT_CENTER","styles","elementType","stylers","featureType","fullscreenControl","streetViewControl","zoomControlOptions","mapTypeControlOptions","backgroundColor","gestureHandling","clickableIcons","MapComponent","withScriptjs","withGoogleMap","mapRef","children","MapView","commandPressed","React","createRef","markerRefs","lineRefs","lastDoubleClick","Date","now","keyUpHandler","handleKeyUp","setTimeout","handleSelectedChange","e","console","error","nextProps","nodesChanged","isEqual","matchChanged","filtersChanged","resetAllNodes","nextSelectedMarkers","selectedNodeIds","m","nextSelectedNodes","marker","updateNodes","updateLinks","panToNodes","defaultZoom","defaultCenter","defaultOptions","onDblClick","loadingElement","containerElement","mapElement","googleMapURL","renderLinks","renderKiosks","renderKiosks5g","renderNodes","renderNodeDetail","es_Route","exact","component","_this5","selectedIds","reduce","idMap","objectSpread","defineProperty","isFiltered","isSelected","neighborIsSelected","links","forEach","from","NodeMarker_VisibilityMarker","handleNodeClick","handleMarkerRef","_this6","LinkLine_LinkLine","linkId","handleLineRef","kiosksClassic","KioskMarker_KioskMarker","kiosks5g","nodeIds","nodeTitles","NodeDetail_connected","selectedId","toString","newNodeIds","newNodeIdString","uniq","replace","_this7","ReactDOM","unstable_batchedUpdates","values","setVisibility","line","selectedNodes","markers","_this8","connectedNodes","connectedMarker","_this9","fitBounds","minLng","minLat","maxLng","maxLat","_node$coordinates","newBounds","east","north","south","west","current","innerWidth","panToBounds","_nodes$0$coordinates","panTo","arguments","split","Component","PureMapView","labels","Filters","toggleFilter","URLSearchParams","location","get","showFilters","role","label","renderFilter","hideCount","statusCounts","enabled","htmlFor","color","getColor","marginLeft","marginRight","marginTop","marginBottom","getIcon","getLabel","defaultChecked","PureFilters","Stats","_statusCounts$active","_statusCounts$hub","_statusCounts$superno","_statusCounts$omni","_statusCounts$remote","_statusCounts$kiosk","_statusCounts$ap","_statusCounts$apFudge","apFudge","totalCount","nodeCount","hubCount","apCount","Log","limit","sortedLinks","installDate","slice","scroll","format","renderHorizontalLink","kiosks","includes","initialFilters","changelog","linksByNodeId","mergedNodes","String","nodeStatus","geoKey","linkStatus","sectorsByNodeId","lowerNotes","isSupernode","isPop","isAP","isHub","notPotentialHub","isOmni","isKiosk","isRemote","hasPanoramas","nodeType","addGraphData","nodeData","linkData","sectorData","toFixed","reducer","counts","action","newFilters","newValue","store","createStore","rootReducer","App","es","BrowserRouter","basename","connected","Route","_ref","MapView_connected","require","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.44191972.chunk.js","sourcesContent":["import React, { PureComponent } from \"react\";\nimport Highlighter from \"react-highlight-words\";\n\nexport const icons = {\n\tdead: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\">\n\t\t\t<circle\n\t\t\t\tcx=\"7\"\n\t\t\t\tcy=\"7\"\n\t\t\t\tr=\"5\"\n\t\t\t\tstroke=\"#fff\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tfill=\"#aaa\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\tpotential: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\">\n\t\t\t<circle\n\t\t\t\tcx=\"8\"\n\t\t\t\tcy=\"8\"\n\t\t\t\tr=\"6\"\n\t\t\t\tstroke=\"#fff\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tfill=\"#777\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\t\"potential-hub\": (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\">\n\t\t\t<circle\n\t\t\t\tfill=\"#777\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"8\"\n\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\tcy=\"11\"\n\t\t\t\tcx=\"11\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\t\"potential-supernode\": (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"#777\"\n\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"10\"\n\t\t\t\t\tcy=\"14\"\n\t\t\t\t\tcx=\"14\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\tactive: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\">\n\t\t\t<circle\n\t\t\t\tfill=\"rgb(255,45,85)\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"6\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tcx=\"8\"\n\t\t\t\tcy=\"8\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\tremote: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\">\n\t\t\t<circle\n\t\t\t\tfill=\"rgb(255,45,85)\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"6\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tcx=\"8\"\n\t\t\t\tcy=\"8\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\tkiosk: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\">\n\t\t\t<circle\n\t\t\t\tfill=\"rgb(255,45,85)\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"6\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tcx=\"8\"\n\t\t\t\tcy=\"8\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\tomni: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\">\n\t\t\t<circle\n\t\t\t\tfill=\"rgb(90,200,250)\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"6\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tcx=\"8\"\n\t\t\t\tcy=\"8\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\thub: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\">\n\t\t\t<circle\n\t\t\t\tfill=\"rgb(90,200,250)\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"8\"\n\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\tcy=\"11\"\n\t\t\t\tcx=\"11\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\tsupernode: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"#007aff\"\n\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"10\"\n\t\t\t\t\tcy=\"14\"\n\t\t\t\t\tcx=\"14\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\t\"linkNYC Classic\": (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\">\n\t\t\t<circle\n\t\t\t\tfill=\"#01a2eb\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"5\"\n\t\t\t\tstroke-width=\"2\"\n\t\t\t\tcx=\"8\"\n\t\t\t\tcy=\"8\"\n\t\t\t/>\n\t\t</svg>\n\n\t),\n\t\"linkNYC 5G\": (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\">\n\t\t\t<circle\n\t\t\t\tfill=\"#013147\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"5\"\n\t\t\t\tstroke-width=\"2\"\n\t\t\t\tcx=\"8\"\n\t\t\t\tcy=\"8\"\n\t\t\t/>\n\t\t</svg>\n\t)\n};\n\nexport default class NodeName extends PureComponent {\n\trender() {\n\t\tconst { node, search } = this.props;\n\t\tconst name = node.name || `Node ${node.id}`;\n\t\treturn (\n\t\t\t<div className=\"h1 w-100 overflow-visible flex justify-start items-center\">\n\t\t\t\t<div className=\"h2 w2 min-h2 min-w2 flex items-center justify-center\">\n\t\t\t\t\t{icons[node.type]}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"pl1 flex-1 truncate\">\n\t\t\t\t\t<span className=\"db f5 fw6 black mv0\">\n\t\t\t\t\t\t<Highlighter\n\t\t\t\t\t\t\thighlightClassName=\"bg-light-yellow\"\n\t\t\t\t\t\t\tsearchWords={[search]}\n\t\t\t\t\t\t\tautoEscape={true}\n\t\t\t\t\t\t\ttextToHighlight={name}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t{node.notes ? (\n\t\t\t\t\t\t<span className=\"db f7 gray mv05 truncate\">\n\t\t\t\t\t\t\t<Highlighter\n\t\t\t\t\t\t\t\thighlightClassName=\"bg-light-yellow dark-gray\"\n\t\t\t\t\t\t\t\tsearchWords={[search]}\n\t\t\t\t\t\t\t\tautoEscape={true}\n\t\t\t\t\t\t\t\ttextToHighlight={node.notes}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport NodeName from \"../NodeName\";\n\nexport default class NodeRow extends PureComponent {\n\trender() {\n\t\tconst { node, search, onClick } = this.props;\n\t\tconst { id } = node;\n\t\treturn (\n\t\t\t<Link className=\"link\" to={`/nodes/${id}`}>\n\t\t\t\t<div\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName=\"pointer hover-bg-near-white bb b--light-gray pa3 pl2\"\n\t\t\t\t>\n\t\t\t\t\t<NodeName node={node} search={search} />\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t);\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { withRouter } from \"react-router\";\n\nimport NodeRow from \"./NodeRow\";\n\nclass SearchBar extends PureComponent {\n\tstate = {\n\t\tfilteredNodes: [],\n\t\tsearch: \"\",\n\t\tshowDropdown: false,\n\t\tfocused: false\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.keyDownHandler = this.handleKeyDown.bind(this);\n\t\twindow.addEventListener(\"keydown\", this.keyDownHandler, false);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"keydown\", this.keyDownHandler, false);\n\t}\n\n\thandleKeyDown(event) {\n\t\tconst { history } = this.props;\n\t\tconst { focused, filteredNodes } = this.state;\n\t\tconst { keyCode } = event;\n\t\tif (keyCode === 13 && focused && filteredNodes.length) {\n\t\t\thistory.push(`/nodes/${filteredNodes[0].id}`);\n\t\t\tthis.setState({ showDropdown: false });\n\t\t\tthis.refs.search.blur();\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t// Super hacky, do this better\n\t\tif (\n\t\t\tprevState.search === this.state.search &&\n\t\t\tprevProps.nodes !== this.props.nodes\n\t\t) {\n\t\t\tthis.setState({\n\t\t\t\tfilteredNodes: this.filterSearch(this.state.search)\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"w-100 shadow-2\">\n\t\t\t\t{this.renderSearchBar()}\n\t\t\t\t{this.renderList()}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderSearchBar() {\n\t\tconst { toggleFilters } = this.props;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"flex items-center bg-white overflow-hidden\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.refs.search.focus();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\twidth=\"20\"\n\t\t\t\t\theight=\"20\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tstroke=\"#aaa\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\tclassName=\"ml3 db\"\n\t\t\t\t\tstyle={{ minWidth: 20 }}\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"11\" cy=\"11\" r=\"8\" />\n\t\t\t\t\t<line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\n\t\t\t\t</svg>\n\t\t\t\t<input\n\t\t\t\t\tref=\"search\"\n\t\t\t\t\tclassName=\"sans-serif overflow-hidden pl2 pr3 pv3 input-reset f5 fw4 bw0 w-100 on\"\n\t\t\t\t\tvalue={this.state.search}\n\t\t\t\t\tplaceholder=\"Search nodes\"\n\t\t\t\t\tspellCheck={false}\n\t\t\t\t\tautoCorrect=\"false\"\n\t\t\t\t\tonFocus={() =>\n\t\t\t\t\t\tthis.setState({ showDropdown: true, focused: true })\n\t\t\t\t\t}\n\t\t\t\t\tonBlur={() => this.setState({ focused: false })}\n\t\t\t\t\tonChange={event =>\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tsearch: event.target.value,\n\t\t\t\t\t\t\tfilteredNodes: this.filterSearch(event.target.value)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{this.renderClearButton()}\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"h2 w2 bn bg-transparent mr2 pointer dark-gray\"\n\t\t\t\t\tonClick={event => {\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\ttoggleFilters();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\twidth=\"16\"\n\t\t\t\t\t\theight=\"16\"\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<line x1=\"4\" y1=\"21\" x2=\"4\" y2=\"14\" />\n\t\t\t\t\t\t<line x1=\"4\" y1=\"10\" x2=\"4\" y2=\"3\" />\n\t\t\t\t\t\t<line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"12\" />\n\t\t\t\t\t\t<line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"3\" />\n\t\t\t\t\t\t<line x1=\"20\" y1=\"21\" x2=\"20\" y2=\"16\" />\n\t\t\t\t\t\t<line x1=\"20\" y1=\"12\" x2=\"20\" y2=\"3\" />\n\t\t\t\t\t\t<line x1=\"1\" y1=\"14\" x2=\"7\" y2=\"14\" />\n\t\t\t\t\t\t<line x1=\"9\" y1=\"8\" x2=\"15\" y2=\"8\" />\n\t\t\t\t\t\t<line x1=\"17\" y1=\"16\" x2=\"23\" y2=\"16\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderList() {\n\t\tif (!this.state.filteredNodes.length || !this.state.showDropdown) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { search } = this.state;\n\t\treturn (\n\t\t\t<div className=\"bg-white bt b--light-gray max-h-5-rows overflow-y-scroll\">\n\t\t\t\t{this.state.filteredNodes.map(node => (\n\t\t\t\t\t<NodeRow\n\t\t\t\t\t\tkey={node.id}\n\t\t\t\t\t\tnode={node}\n\t\t\t\t\t\tsearch={search}\n\t\t\t\t\t\tonClick={() => this.setState({ showDropdown: false })}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderClearButton() {\n\t\tconst { search } = this.state;\n\n\t\tif (!search || !search.length) {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"mr3\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: 20,\n\t\t\t\t\t\theight: 20\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tsearch: \"\",\n\t\t\t\t\t\tfilteredNodes: []\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tclassName=\"on btn bn pa0 bg-white pointer mr3 silver\"\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\twidth=\"20\"\n\t\t\t\t\theight=\"20\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\tclassName=\"db\"\n\t\t\t\t>\n\t\t\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n\t\t\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t);\n\t}\n\n\tfilterSearch(search) {\n\t\tconst { nodes } = this.props;\n\t\tif (!search) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst lowerSearch = search.toLowerCase();\n\n\t\treturn [\n\t\t\t...nodes.filter(\n\t\t\t\tnode =>\n\t\t\t\t\tnode.id === parseInt(search, 10) ||\n\t\t\t\t\tlowerSearch === `node ${node.id}`\n\t\t\t),\n\t\t\t...nodes\n\t\t\t\t.filter(node => {\n\t\t\t\t\tconst notesMatch =\n\t\t\t\t\t\tnode.notes &&\n\t\t\t\t\t\tnode.notes.toLowerCase().indexOf(lowerSearch) > -1;\n\t\t\t\t\tconst nameMatches =\n\t\t\t\t\t\tnode.name &&\n\t\t\t\t\t\tnode.name.toLowerCase().indexOf(lowerSearch) > -1;\n\t\t\t\t\treturn notesMatch || nameMatches;\n\t\t\t\t})\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tif (a.status !== b.status) {\n\t\t\t\t\t\tif (a.status === \"active\") return -1;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn a.id - b.id;\n\t\t\t\t})\n\t\t];\n\t}\n}\n\nexport default withRouter(SearchBar);\n","import { connect } from \"react-redux\";\nimport PureSearchBar from \"./component\";\nimport { toggleFilters } from \"../../actions\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodes: state.nodes,\n\ttickets: state.tickets\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n\ttoggleFilters: () => toggleFilters(dispatch)\n});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureSearchBar);\n","export function fetchNodes(dispatch) {\n\tfetch(\"https://node-db.netlify.app/nodes.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_NODES_SUCCESS\", nodes: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function fetchLinks(dispatch) {\n\tfetch(\"https://node-db.netlify.app/links.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_LINKS_SUCCESS\", links: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function fetchKiosks(dispatch) {\n\tfetch(\"https://node-db.netlify.app/kiosks.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_KIOSKS_SUCCESS\", kiosks: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function toggleFilter(label, dispatch) {\n\tdispatch({ type: \"TOGGLE_FILTER\", label });\n}\n\nexport function toggleFilters(dispatch) {\n\tdispatch({ type: \"TOGGLE_FILTERS\" });\n}\n","export function nodeType(node) {\n\tconst { status, notes, panoramas } = node;\n\tconst lowerNotes = notes ? notes.toLowerCase() : null;\n\tconst isSupernode = notes && lowerNotes.indexOf(\"supernode\") > -1;\n\tconst isPop = notes && lowerNotes.indexOf(\"pop\") > -1;\n\tconst isAP = notes && notes.indexOf(\"AP\") > -1;\n\tconst isHub = notes && lowerNotes.indexOf(\"hub\") > -1;\n\tconst notPotentialHub = !notes || lowerNotes.indexOf(\"hub?\") === -1;\n\tconst isOmni = notes && lowerNotes.indexOf(\"omni\") > -1;\n\tconst isKiosk = notes && lowerNotes.indexOf(\"kiosk\") > -1;\n\tconst isRemote = notes && lowerNotes.indexOf(\"rem\") > -1;\n\tconst hasPanoramas = panoramas && panoramas.length;\n\n\tif (status === \"active\") {\n\t\tif (isSupernode) return \"supernode\";\n\t\tif (isPop) return \"pop\";\n\t\tif (isAP) return \"ap\";\n\t\tif (isHub && notPotentialHub) return \"hub\";\n\t\tif (isOmni) return \"omni\";\n\t\tif (isKiosk) return \"kiosk\";\n\t\tif (isRemote) return \"remote\";\n\t\treturn \"active\";\n\t}\n\tif (status === \"NN assigned\") return \"NN assigned\"\n\tif (isSupernode) return \"potential-supernode\";\n\tif (isHub) return \"potential-hub\";\n\tif (hasPanoramas) return \"potential\";\n\treturn \"dead\";\n}\n\nexport function nodeStatus(node) {\n\tconst { status } = node;\n\tconst isActive = (status === \"Installed\" || status === \"NN assigned\");\n\treturn isActive ? \"active\" : \"potential\";\n}\n\n// TODO: Move this to node-db\nexport function linkStatus(link) {\n\tconst { status, fromNode, toNode } = link;\n\tif (!fromNode || !toNode) return \"invalid\";\n\tif (\n\t\t(status === \"active\" || status === \"fiber\" || status === \"vpn\" || status === \"60GHz\") &&\n\t\tfromNode.status === \"active\" &&\n\t\ttoNode.status === \"active\"\n\t)\n\t\treturn status; // changed from: return \"active\" 2022-03-26\n\treturn \"potential\";\n}\n\nexport const nodeColors = {\n\tactive: \"rgb(255,45,85)\",\n\tremote: \"rgb(255,45,85)\",\n\t\"NN assigned\": \"rgb(255,166,201)\",\n\tdead: \"#aaa\",\n\thub: \"rgb(90,200,250)\",\n\tomni: \"rgb(90,200,250)\",\n\tlinkNYC: \"#01a2eb\",\n\tkiosk: \"rgb(255,45,85)\",\n\t\"potential-hub\": \"#777\",\n\t\"potential-supernode\": \"#777\",\n\tpotential: \"#777\",\n\tsupernode: \"#007aff\",\n\tpop: \"#F6BE00\",\n\tap: \"#00FF00\",\n\tsector: \"#007aff\",\n\tbackbone: \"#007aff\"\n};\n\nexport const sectorColors = {\n\tsupernode: \"#007aff\",\n\t\"potential-hub\": \"#aaa\",\n\t\"potential-supernode\": \"#aaa\",\n\tpotential: \"#aaa\",\n\tdefault: \"#007aff\"\n};\n","import React, { PureComponent } from \"react\";\nimport { Polygon } from \"react-google-maps\";\nimport { sectorColors } from \"../../utils\";\n\nconst MAX_OPACITY = 0.2;\nconst INTERVAL_PER_MILE = 10;\n\nconst visibilityMultipliers = {\n\thighlight: 1,\n\tsecondary: 0,\n\tdim: 0\n};\n\nconst zIndexes = {\n\thighlight: 3,\n\tdim: 1\n};\n\nexport default class Sector extends PureComponent {\n\trender() {\n\t\tconst { sector, visibility, filters } = this.props;\n\t\tconst { status } = sector;\n\t\tif (status !== \"active\" && status !== \"potential\") {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!filters.sector) return null;\n\n\t\tconst [lng, lat] = sector.node.coordinates;\n\t\tconst { radius, azimuth, width } = sector;\n\n\t\tconst visibilityMultiplier = visibilityMultipliers[visibility];\n\t\tconst multiplier =\n\t\t\tvisibilityMultiplier === undefined ? 1 : visibilityMultiplier;\n\t\tconst intervalCount = Math.ceil(INTERVAL_PER_MILE * radius);\n\t\tconst fillOpacity = (MAX_OPACITY / intervalCount) * multiplier;\n\t\tconst fillColor = this.getFillColor();\n\t\tconst zIndex = zIndexes[visibility] || 1;\n\n\t\tconst interval = radius / intervalCount;\n\t\tconst radiusIndices = [...Array(intervalCount).keys()];\n\n\t\treturn radiusIndices.map(index => {\n\t\t\tconst circleRadius = interval * index;\n\t\t\tconst path = getPath(lat, lng, circleRadius, azimuth, width);\n\t\t\treturn (\n\t\t\t\t<Polygon\n\t\t\t\t\tkey={index}\n\t\t\t\t\tpath={path}\n\t\t\t\t\toptions={{\n\t\t\t\t\t\tstrokeColor: \"transparent\",\n\t\t\t\t\t\tstrokeOpacity: 0,\n\t\t\t\t\t\tstrokeWidth: 0,\n\t\t\t\t\t\tfillColor,\n\t\t\t\t\t\tfillOpacity,\n\t\t\t\t\t\tclickable: false,\n\t\t\t\t\t\tzIndex\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\tgetFillColor() {\n\t\tconst { sector, node } = this.props;\n\t\t// TODO: Make this not hacky\n\t\treturn (\n\t\t\tsectorColors[sector.status] ||\n\t\t\tsectorColors[node.type] ||\n\t\t\tsectorColors.default\n\t\t);\n\t}\n}\n\nfunction getPath(lat, lng, radius, azimuth, width) {\n\tvar centerPoint = { lat, lng };\n\tvar PRlat = (radius / 3963) * (180 / Math.PI); // using 3963 miles as earth's radius\n\tvar PRlng = PRlat / Math.cos(lat * (Math.PI / 180));\n\tvar PGpoints = [];\n\tPGpoints.push(centerPoint);\n\n\tconst lat1 =\n\t\tlat + PRlat * Math.cos((Math.PI / 180) * (azimuth - width / 2));\n\tconst lon1 =\n\t\tlng + PRlng * Math.sin((Math.PI / 180) * (azimuth - width / 2));\n\tPGpoints.push({ lat: lat1, lng: lon1 });\n\n\tconst lat2 =\n\t\tlat + PRlat * Math.cos((Math.PI / 180) * (azimuth + width / 2));\n\tconst lon2 =\n\t\tlng + PRlng * Math.sin((Math.PI / 180) * (azimuth + width / 2));\n\n\tvar theta = 0;\n\tvar gamma = (Math.PI / 180) * (azimuth + width / 2);\n\n\tfor (var a = 1; theta < gamma; a++) {\n\t\ttheta = (Math.PI / 180) * (azimuth - width / 2 + a);\n\t\tconst PGlon = lng + PRlng * Math.sin(theta);\n\t\tconst PGlat = lat + PRlat * Math.cos(theta);\n\n\t\tPGpoints.push({ lat: PGlat, lng: PGlon });\n\t}\n\n\tPGpoints.push({ lat: lat2, lng: lon2 });\n\tPGpoints.push(centerPoint);\n\n\treturn PGpoints;\n}\n","import React, { PureComponent, Fragment } from \"react\";\nimport { Marker } from \"react-google-maps\";\nimport Sector from \"./Sector\";\n\nclass NodeMarker extends PureComponent {\n\trender() {\n\t\tconst { node, visible, onClick } = this.props;\n\t\tconst { notes, coordinates, memberNodes } = node;\n\t\tconst [lng, lat] = coordinates;\n\t\tconst title = `${memberNodes.map(n => n.id).join(\", \")}${\n\t\t\tnotes ? ` - ${notes}` : \"\"\n\t\t}`;\n\t\tconst { icon, zIndex } = this.getMarkerProps();\n\t\tconst adjustedZ = this.getZIndex(zIndex);\n\t\tconst opacity = this.getOpacity();\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Marker\n\t\t\t\t\tdefaultPosition={{ lat, lng }}\n\t\t\t\t\tdefaultTitle={title}\n\t\t\t\t\ticon={icon}\n\t\t\t\t\toptions={{ opacity }}\n\t\t\t\t\tvisible={visible}\n\t\t\t\t\tzIndex={adjustedZ}\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t/>\n\t\t\t\t{this.renderSectors()}\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderSectors() {\n\t\tconst { node, visible, visibility, filters } = this.props;\n\t\tconst { sectors } = node;\n\n\t\tif (!sectors || !visible) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn sectors.map(sector => {\n\t\t\tconst isFiltered =\n\t\t\t\tsector.status === \"potential\" &&\n\t\t\t\tfilters[sector.status] === false;\n\t\t\tif (isFiltered && visibility !== \"highlight\") {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst key = `${node.id}-${sector.azimuth}-${sector.width}`\n\t\t\treturn (\n\t\t\t\t<Sector\n\t\t\t\t\tkey={key}\n\t\t\t\t\tsector={sector}\n\t\t\t\t\tvisibility={visibility}\n\t\t\t\t\tnode={node}\n\t\t\t\t\tfilters={filters}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\tgetOpacity() {\n\t\tconst { visibility } = this.props;\n\t\tif (visibility === \"highlight\") return 1;\n\t\tif (visibility === \"secondary\") return 1;\n\t\tif (visibility === \"dim\") return 0.25;\n\t\treturn 1;\n\t}\n\n\tgetZIndex(defaultZIndex) {\n\t\tconst { visibility } = this.props;\n\t\tif (visibility === \"highlight\") return defaultZIndex + 999;\n\t\tif (visibility === \"secondary\") return defaultZIndex + 998;\n\t\treturn defaultZIndex;\n\t}\n\n\tgetMarkerProps() {\n\t\tconst { node, filters } = this.props;\n\t\tconst { type } = node;\n\n\t\tif (type === \"supernode\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/supernode.svg\",\n\t\t\t\t\tanchor: { x: 14, y: 14 }\n\t\t\t\t},\n\t\t\t\tzIndex: 100\n\t\t\t};\n\n\t\tif (type === \"pop\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/pop.svg\",\n\t\t\t\t\tanchor: { x: 14, y: 14 }\n\t\t\t\t},\n\t\t\t\tzIndex: 100\n\t\t\t};\n\n\t\tif (type === \"ap\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/ap.svg\",\n\t\t\t\t\tanchor: { x: 10, y: 10 }\n\t\t\t\t},\n\t\t\t\tzIndex: 90\n\t\t\t};\n\n\t\tif (type === \"hub\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/hub.svg\",\n\t\t\t\t\tanchor: { x: 10, y: 10 }\n\t\t\t\t},\n\t\t\t\tzIndex: 93\n\t\t\t};\n\n\t\tif (type === \"omni\") {\n\t\t\tconst url = filters.backbone\n\t\t\t\t? \"/img/map/omni.svg\"\n\t\t\t\t: \"/img/map/active.svg\";\n\t\t\tconst zIndex = filters.backbone ? 92 : 91;\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl,\n\t\t\t\t\tanchor: { x: 7, y: 7 }\n\t\t\t\t},\n\t\t\t\tzIndex\n\t\t\t};\n\t\t}\n\n\t\tif (type === \"remote\") {\n\t\t\tconst url = filters.backbone\n\t\t\t\t? \"/img/map/remote.svg\"\n\t\t\t\t: \"/img/map/active.svg\";\n\t\t\tconst anchor = filters.backbone ? { x: 5, y: 5 } : { x: 7, y: 7 };\n\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl,\n\t\t\t\t\tanchor\n\t\t\t\t},\n\t\t\t\tzIndex: 90\n\t\t\t};\n\t\t}\n\n\t\tif (type === \"kiosk\") {\n\t\t\tconst url = filters.backbone\n\t\t\t\t? \"/img/map/remote.svg\"\n\t\t\t\t: \"/img/map/active.svg\";\n\t\t\tconst anchor = filters.backbone ? { x: 5, y: 5 } : { x: 7, y: 7 };\n\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl,\n\t\t\t\t\tanchor\n\t\t\t\t},\n\t\t\t\tzIndex: 90\n\t\t\t};\n\t\t}\n\n\t\tif (type === \"active\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/active.svg\",\n\t\t\t\t\tanchor: { x: 7, y: 7 }\n\t\t\t\t},\n\t\t\t\tzIndex: 91\n\t\t\t};\n\n\t\tif (type === \"potential-supernode\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential-supernode.svg\",\n\t\t\t\t\tanchor: { x: 14, y: 14 }\n\t\t\t\t},\n\t\t\t\tzIndex: 83\n\t\t\t};\n\n\t\tif (type === \"potential-hub\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential-hub.svg\",\n\t\t\t\t\tanchor: { x: 10, y: 10 }\n\t\t\t\t},\n\t\t\t\tzIndex: 82\n\t\t\t};\n\n\t\tif (type === \"potential\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential.svg\",\n\t\t\t\t\tanchor: { x: 7, y: 7 }\n\t\t\t\t},\n\t\t\t\tzIndex: 81\n\t\t\t};\n\n\t\treturn {\n\t\t\ticon: {\n\t\t\t\turl: \"/img/map/dead.svg\",\n\t\t\t\tanchor: { x: 5, y: 5 }\n\t\t\t},\n\t\t\tzIndex: 80\n\t\t};\n\t}\n}\n\nexport default class VisibilityMarker extends PureComponent {\n\tstate = {\n\t\tvisibility: \"default\"\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<NodeMarker {...this.props} visibility={this.state.visibility} />\n\t\t);\n\t}\n\n\tsetVisibility(visibility) {\n\t\tthis.setState({ visibility });\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Marker, InfoWindow } from \"react-google-maps\";\n\nexport default class KioskMarker extends PureComponent {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t\n\t\tthis.state = {\n\t\tshowInfo: false,\n\t\t};\n\t}\n\n\thandleClick = () => {\n\t\tthis.setState(() => ({\n\t\t\tshowInfo: true,\n\t\t}));\n\t};\n\n\tcloseClick = () => {\n\t\tthis.setState(() => ({\n\t\t\tshowInfo: false,\n\t\t}));\n\t};\n\n\trender() {\n\t\tconst { kiosk, isClassic } = this.props;\n\t\tconst [lng, lat] = kiosk.coordinates;\n\n\t\tconst icon = {\n\t\t\turl: isClassic ? \"/img/map/kiosk.svg\": \"/img/map/kiosk-5g.svg\",\n\t\t\tanchor: { x: 5, y: 5 }\n\t\t};\n\t\treturn <Marker defaultPosition={{ lat, lng }} icon={icon} zIndex={1} onClick={this.handleClick}>\n          {this.state.showInfo && (\n            <InfoWindow onCloseClick={this.handleClick}>\n              <div>\n\t\t\t  \t<span><b>ID:</b> {kiosk.id}</span><br/>\n\t\t\t  \t<span><b>Address:</b> {kiosk.street_address}</span><br/>\n\t\t\t  \t<span><b>Type:</b> {kiosk.type}</span><br/>\n\t\t\t\t<span><b>Status:</b> {kiosk.status}</span></div>\n            </InfoWindow>\n          )}\n\t\t</Marker>;\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Polyline } from \"react-google-maps\";\n\nexport default class LinkLine extends PureComponent {\n\tstate = {\n\t\tvisibility: \"default\"\n\t};\n\n\trender() {\n\t\tconst { link, visible } = this.props;\n\t\tconst { fromNode, toNode } = link;\n\n\t\tif (!fromNode || !toNode) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst [lng1, lat1] = fromNode.coordinates;\n\t\tconst [lng2, lat2] = toNode.coordinates;\n\t\tconst latlng1 = { lat: lat1, lng: lng1 };\n\t\tconst latlng2 = { lat: lat2, lng: lng2 };\n\n\t\tconst { strokeColor, strokeOpacity, zIndex } = this.getLineProps();\n\n\t\treturn (\n\t\t\t<Polyline\n\t\t\t\tpath={[latlng1, latlng2]}\n\t\t\t\toptions={{\n\t\t\t\t\tstrokeColor,\n\t\t\t\t\tstrokeWeight: 2.5,\n\t\t\t\t\tstrokeOpacity: this.getOpacity(strokeOpacity),\n\t\t\t\t\tzIndex: this.getZIndex(zIndex)\n\t\t\t\t}}\n\t\t\t\tvisible={visible}\n\t\t\t/>\n\t\t);\n\t}\n\n\tgetOpacity(defaultOpacity) {\n\t\tconst { link, filters } = this.props;\n\t\tconst { visibility } = this.state;\n\t\tswitch (visibility) {\n\t\t\tcase \"highlight\":\n\t\t\t\tif (filters.backbone) {\n\t\t\t\t\tif (!isBackbone(link)) return defaultOpacity * 2;\n\t\t\t\t}\n\t\t\t\treturn 1;\n\t\t\tcase \"dim\":\n\t\t\t\treturn defaultOpacity * 0.1;\n\t\t\tdefault:\n\t\t\t\treturn defaultOpacity;\n\t\t}\n\t}\n\n\tgetZIndex(defaultZIndex) {\n\t\tconst { link } = this.props;\n\t\tconst { visibility } = this.state;\n\t\tconst bonus = link.status === \"active\" ? 20 : 0;\n\t\tif (visibility === \"highlight\") return 30 + bonus;\n\t\treturn defaultZIndex + bonus;\n\t}\n\n\tsetVisibility(visibility) {\n\t\tthis.setState({ visibility });\n\t}\n\n\tgetLineProps() {\n\t\tconst { link, filters } = this.props;\n\t\tconst { status } = link;\n\n\t\tconst defaultOpacity = 1;\n\t\tvar activeColor = \"#007aff\";\n\t\t\n\t\t// added fiber and vpn color 2022-03-26, added 60GHz 2023-5-11\n\t\tif (status === \"fiber\"){\n\t\t\tactiveColor = \"#f6be00\"\n\t\t} else if (status === \"vpn\"){\n\t\t\tactiveColor = \"#cc99ff\"\n\t\t} else if (status === \"60GHz\"){\n\t\t\tactiveColor = \"#03fcf8\"\n\t\t}\n\n\n\t\tif (status === \"fiber\"||status === \"vpn\"||status === \"active\"||status === \"60GHz\") {\n\t\t\tif (filters.backbone && !isBackbone(link))\n\t\t\t\treturn {\n\t\t\t\t\tstrokeColor: \"#ff2d55\",\n\t\t\t\t\tstrokeOpacity: defaultOpacity * 0.25,\n\t\t\t\t\tzIndex: 10\n\t\t\t\t};\n\n\t\t\treturn {\n\t\t\t\tstrokeColor: activeColor,\n\t\t\t\tstrokeOpacity: defaultOpacity,\n\t\t\t\tzIndex: 20\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tstrokeColor: \"#aaa\",\n\t\t\tstrokeOpacity: defaultOpacity,\n\t\t\tzIndex: 0\n\t\t};\n\t}\n}\n\nfunction isBackbone(link) {\n\tconst { fromNode, toNode } = link;\n\treturn fromNode.type !== \"active\" && toNode.type !== \"active\";\n}\n","import React, { PureComponent } from \"react\";\nimport { OverlayView } from \"react-google-maps\";\nimport { Link } from \"react-router-dom\";\n\nconst getPixelPositionOffset = (width, height) => ({\n\tx: -width / 2,\n\ty: -height\n});\n\nexport default class NodeDetail extends PureComponent {\n\trender() {\n\t\tconst { nodeId, nodesById } = this.props;\n\n\t\tif (!nodeId || !nodesById) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst node = nodesById[nodeId];\n\t\tif (!node) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { coordinates } = node;\n\t\tconst [lng, lat] = coordinates;\n\n\t\treturn (\n\t\t\t<OverlayView\n\t\t\t\tposition={new window.google.maps.LatLng(lat, lng)}\n\t\t\t\tmapPaneName={OverlayView.OVERLAY_MOUSE_TARGET}\n\t\t\t\tgetPixelPositionOffset={getPixelPositionOffset}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tref={ref =>\n\t\t\t\t\t\tref &&\n\t\t\t\t\t\twindow.google.maps.OverlayView.preventMapHitsFrom(ref)\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"flex flex-column items-center\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex items-center bg-white br2 overflow-hidden shadow-2\">\n\t\t\t\t\t\t{this.renderImage(node)}\n\t\t\t\t\t\t<div className=\"pv1 ph2 flex flex-column justify-end\">\n\t\t\t\t\t\t\t<span className=\"f5 fw6 nowrap sans-serif\">\n\t\t\t\t\t\t\t\t{node.name || node.id}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<svg\n\t\t\t\t\t\tviewBox=\"0 5 12 12\"\n\t\t\t\t\t\tversion=\"1.1\"\n\t\t\t\t\t\twidth=\"12\"\n\t\t\t\t\t\theight=\"12\"\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\tfill=\"white\"\n\t\t\t\t\t\t\td=\"M0 5l6 6 6-6H0z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</OverlayView>\n\t\t);\n\t}\n\n\trenderImage(node) {\n\t\tconst { id, panoramas } = node;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn null;\n\t\t}\n\t\tconst [firstPanorama] = panoramas;\n\t\treturn (\n\t\t\t<Link to={`/nodes/${id}/panoramas/1`} className=\"db h2 w2\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"h-100 w-100 cover bg-center bg-near-white\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundImage: `url(\"https://node-db.netlify.app/panoramas/${firstPanorama}\")`\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Link>\n\t\t);\n\t}\n\n\trenderNotes(node) {\n\t\tconst { notes } = node;\n\t\tif (!notes) {\n\t\t\treturn null;\n\t\t}\n\t\treturn <span className=\"mv0 f7 gray truncate sans-serif\">{notes}</span>;\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureComponent from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodesById: state.nodesById\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureComponent);\n","import React, { PureComponent } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport DocumentTitle from \"react-document-title\";\n\nexport default class Gallery extends PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpanoramas: this.getPanoramas()\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.keyDownHandler = this.handleKeyDown.bind(this);\n\t\twindow.addEventListener(\"keydown\", this.keyDownHandler, true);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"keydown\", this.keyDownHandler, true);\n\t}\n\n\thandleKeyDown(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tconst { keyCode } = event;\n\t\tconst { match, history } = this.props;\n\t\tconst { panoramas } = this.state;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst panoIdInt = parseInt(panoId);\n\t\tif (keyCode === 27) {\n\t\t\thistory.push(`/nodes/${nodeId}`);\n\t\t} else if (keyCode === 39) {\n\t\t\tconst nextPanoId = panoIdInt < panoramas.length ? panoIdInt + 1 : 1;\n\t\t\thistory.push(`/nodes/${nodeId}/panoramas/${nextPanoId}`);\n\t\t} else if (keyCode === 37) {\n\t\t\tconst prevPanoId = panoId > 1 ? panoIdInt - 1 : panoramas.length;\n\t\t\thistory.push(`/nodes/${nodeId}/panoramas/${prevPanoId}`);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { match } = this.props;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst { panoramas } = this.state;\n\t\tconst src = panoramas[panoId - 1];\n\n\t\treturn (\n\t\t\t<DocumentTitle\n\t\t\t\ttitle={`Panorama ${panoId} - Node ${nodeId} - NYC Mesh`}\n\t\t\t>\n\t\t\t\t<div className=\"fixed absolute--fill bg-black flex flex-column items-center justify-center z-max\">\n\t\t\t\t\t<Link to=\"..\" className=\"absolute top-0 left-0 ma3 white\">\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\tclassName=\"db ma0\"\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\twidth=\"24\"\n\t\t\t\t\t\t\theight=\"24\"\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n\t\t\t\t\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</Link>\n\n\t\t\t\t\t<img\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\twindow\n\t\t\t\t\t\t\t\t.open(\n\t\t\t\t\t\t\t\t\t`https://node-db.netlify.app/panoramas/${src}`,\n\t\t\t\t\t\t\t\t\t\"_blank\"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.focus()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName=\"db center mh-100 mw-100 zoom-in\"\n\t\t\t\t\t\tsrc={`https://node-db.netlify.app/panoramas/${src}`}\n\t\t\t\t\t\talt=\"Panorama\"\n\t\t\t\t\t/>\n\t\t\t\t\t{this.renderPreviews()}\n\t\t\t\t</div>\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\trenderPreviews() {\n\t\tconst { match } = this.props;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst { panoramas } = this.state;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"absolute bottom-0 right-0 left-0 flex ph1 pv2 overflow-x-scroll\">\n\t\t\t\t{panoramas.map((panorama, index) => (\n\t\t\t\t\t<Link\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tto={`/nodes/${nodeId}/panoramas/${index + 1}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={`node-image mh1 cover ba bw1 b--white ${\n\t\t\t\t\t\t\t\tindex === panoId - 1 ? \"\" : \"o-30\"\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackgroundImage: `url(\"https://node-db.netlify.app/panoramas/${panorama}\")`\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Link>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tgetPanoramas() {\n\t\tconst { match, nodesById } = this.props;\n\t\tconst { nodeId } = match.params;\n\t\tconst node = nodesById[nodeId];\n\n\t\tif (!node) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst { panoramas } = node;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn panoramas;\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureGallery from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodesById: state.nodesById\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureGallery);\n","import React, { Component, Fragment } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { withScriptjs, withGoogleMap, GoogleMap } from \"react-google-maps\";\nimport { withRouter, Route } from \"react-router\";\nimport DocumentTitle from \"react-document-title\";\nimport { uniq, isEqual } from \"lodash\";\n\nimport NodeMarker from \"./NodeMarker\";\nimport KioskMarker from \"./KioskMarker\";\nimport LinkLine from \"./LinkLine\";\nimport NodeDetail from \"../NodeDetail\";\nimport Gallery from \"../Gallery\";\n\nimport { mapStyles } from \"./styles\";\n\nconst DEFAULT_ZOOM = 11;\nconst DEFAULT_CENTER = { lat: 40.72, lng: -73.9595798 };\n\nconst options = {\n\tstyles: mapStyles,\n\tfullscreenControl: false,\n\tstreetViewControl: false,\n\tzoomControlOptions: {\n\t\tposition: 9\n\t},\n\tmapTypeControlOptions: {\n\t\tposition: 3\n\t},\n\tbackgroundColor: \"#f5f5f5\",\n\tgestureHandling: \"greedy\",\n\tclickableIcons: false\n};\n\nconst MapComponent = withScriptjs(\n\twithGoogleMap(props => (\n\t\t<GoogleMap ref={props.mapRef} {...props}>\n\t\t\t{props.children}\n\t\t</GoogleMap>\n\t))\n);\n\nclass MapView extends Component {\n\tstate = {\n\t\tcommandPressed: false\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.map = React.createRef();\n\t\tthis.markerRefs = {};\n\t\tthis.lineRefs = {};\n\t\tthis.lastDoubleClick = Date.now();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.keyDownHandler = this.handleKeyDown.bind(this);\n\t\tthis.keyUpHandler = this.handleKeyUp.bind(this);\n\t\twindow.addEventListener(\"keydown\", this.keyDownHandler, false);\n\t\twindow.addEventListener(\"keyup\", this.keyUpHandler, false);\n\n\t\tif (this.props.match) {\n\t\t\ttry {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.handleSelectedChange(this.props);\n\t\t\t\t}, 500);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"keydown\", this.keyDownHandler, false);\n\t\twindow.removeEventListener(\"keyup\", this.keyUpHandler, false);\n\t}\n\n\t// This is a kinda hacky way to improve performance\n\t// Instead of rerending the entire map, rerender specific nodes\n\tshouldComponentUpdate(nextProps) {\n\t\tconst nodesChanged = !isEqual(this.props.nodes, nextProps.nodes);\n\t\tconst matchChanged = this.props.match !== nextProps.match;\n\t\tconst filtersChanged = this.props.filters !== nextProps.filters;\n\t\tif (nodesChanged || matchChanged || filtersChanged) {\n\t\t\tthis.handleSelectedChange(nextProps);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\thandleKeyDown(event) {\n\t\tconst { keyCode } = event;\n\t\tif (keyCode === 27) {\n\t\t\tconst { history } = this.props;\n\t\t\thistory.push(\"/\");\n\t\t}\n\n\t\t// Command key\n\t\tif (keyCode === 91 || keyCode === 93) {\n\t\t\tthis.setState({ commandPressed: true });\n\t\t}\n\t}\n\n\thandleKeyUp(event) {\n\t\tconst { keyCode } = event;\n\n\t\t// Command key\n\t\tif (keyCode === 91 || keyCode === 93) {\n\t\t\tthis.setState({ commandPressed: false });\n\t\t}\n\t}\n\n\thandleSelectedChange(nextProps) {\n\t\t// If selected node is unchanged, do not rerender\n\t\tif (!this.props.match && !nextProps.match) return false;\n\n\t\t// If one was selected but none now selected, reset all nodes\n\t\tif (!nextProps.match) {\n\t\t\tthis.resetAllNodes();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst nextSelectedNodeIds = this.selectedNodeIds(nextProps.match);\n\t\tconst nextSelectedMarkers = nextSelectedNodeIds\n\t\t\t.map(id => this.markerRefs[id])\n\t\t\t.filter(m => m); // filter null\n\n\t\tif (!nextSelectedMarkers.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst nextSelectedNodes = nextSelectedMarkers.map(\n\t\t\tmarker => marker.props.node\n\t\t);\n\t\tthis.updateNodes(nextSelectedNodes, nextSelectedMarkers);\n\n\t\t// const matchChanged = this.props.match !== nextProps.match;\n\t\t// const nodesChanged = this.props.nodes !== nextProps.nodes;\n\t\t// const fitBounds = !matchChanged && !nodesChanged;\n\n\t\tconst filtersChanged = this.props.filters !== nextProps.filters;\n\n\t\tif (!filtersChanged) {\n\t\t\tthis.updateLinks(nextSelectedNodes);\n\t\t\tthis.panToNodes(nextSelectedNodes, true);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { history } = this.props;\n\t\treturn (\n\t\t\t<MapComponent\n\t\t\t\tmapRef={this.map}\n\t\t\t\tdefaultZoom={DEFAULT_ZOOM}\n\t\t\t\tdefaultCenter={DEFAULT_CENTER}\n\t\t\t\tdefaultOptions={options}\n\t\t\t\tonClick={() => {\n\t\t\t\t\t// TODO: Make this less hacky\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\t\tif (now - this.lastDoubleClick > 2000) {\n\t\t\t\t\t\t\thistory.push(\"/\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 500);\n\t\t\t\t}}\n\t\t\t\tonDblClick={() => {\n\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\tthis.lastDoubleClick = now;\n\t\t\t\t}}\n\t\t\t\tloadingElement={<div className=\"h-100 flex flex-column\" />}\n\t\t\t\tcontainerElement={<div className=\"h-100 flex flex-column\" />}\n\t\t\t\tmapElement={<div className=\"h-100 flex flex-column\" />}\n\t\t\t\tgoogleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyBkBIy80YVhu7nYjVweruALNkpgFKquIEw\"\n\t\t\t>\n\t\t\t\t{this.renderLinks()}\n\t\t\t\t{this.renderKiosks()}\n\t\t\t\t{this.renderKiosks5g()}\n\t\t\t\t{this.renderNodes()}\n\t\t\t\t{this.renderNodeDetail()}\n\t\t\t\t<Route\n\t\t\t\t\texact\n\t\t\t\t\tpath=\"/nodes/:nodeId/panoramas/:panoId\"\n\t\t\t\t\tcomponent={Gallery}\n\t\t\t\t/>\n\t\t\t</MapComponent>\n\t\t);\n\t}\n\n\trenderNodes() {\n\t\tconst { nodes, filters } = this.props;\n\n\t\t// TODO: Refactor\n\t\tconst selectedIds = this.selectedNodeIds().reduce(\n\t\t\t(idMap, nodeId) => ({ ...idMap, [nodeId]: true }),\n\t\t\t{}\n\t\t);\n\t\treturn nodes.map(node => {\n\t\t\tconst isFiltered = filters[node.type] === false;\n\t\t\tconst isSelected = selectedIds[node.id] === true;\n\t\t\tlet neighborIsSelected = false;\n\t\t\tif (node.links) {\n\t\t\t\tnode.links.forEach(link => {\n\t\t\t\t\tif (selectedIds[link.from] && selectedIds[link.to]) {\n\t\t\t\t\t\tneighborIsSelected = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst visible = !isFiltered || isSelected || neighborIsSelected;\n\n\t\t\treturn (\n\t\t\t\t<NodeMarker\n\t\t\t\t\tkey={node.id}\n\t\t\t\t\tnode={node}\n\t\t\t\t\tvisible={visible}\n\t\t\t\t\tfilters={filters}\n\t\t\t\t\tonClick={() => this.handleNodeClick(node)}\n\t\t\t\t\tref={ref => this.handleMarkerRef(ref)}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\trenderLinks() {\n\t\tconst { links, filters } = this.props;\n\n\t\t// TODO: Refactor\n\t\tconst selectedIds = this.selectedNodeIds().reduce(\n\t\t\t(idMap, nodeId) => ({ ...idMap, [nodeId]: true }),\n\t\t\t{}\n\t\t);\n\n\t\treturn links.map((link, index) => {\n\t\t\tconst { fromNode, toNode, status } = link;\n\t\t\tif (!fromNode || !toNode) return null;\n\n\t\t\tconst isSelected =\n\t\t\t\tselectedIds[fromNode.id] && selectedIds[toNode.id];\n\t\t\tconst isFiltered =\n\t\t\t\tfilters[fromNode.type] === false ||\n\t\t\t\tfilters[toNode.type] === false ||\n\t\t\t\t(status === \"potential\" && filters.potential === false);\n\t\t\tconst visible = isSelected || !isFiltered;\n\t\t\treturn (\n\t\t\t\t<LinkLine\n\t\t\t\t\tkey={this.linkId(link)}\n\t\t\t\t\tref={ref => {\n\t\t\t\t\t\tthis.handleLineRef(ref);\n\t\t\t\t\t}}\n\t\t\t\t\tvisible={visible}\n\t\t\t\t\tlink={link}\n\t\t\t\t\tfilters={filters}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\trenderKiosks() {\n\t\tconst { kiosksClassic } = this.props;\n\t\treturn kiosksClassic.map(kiosk => (\n\t\t\t<KioskMarker key={kiosk.id} kiosk={kiosk} isClassic={true} />\n\t\t));\n\t}\n\n\trenderKiosks5g() {\n\t\tconst { kiosks5g } = this.props;\n\t\treturn kiosks5g.map(kiosk => (\n\t\t\t<KioskMarker key={kiosk.id} kiosk={kiosk} isClassic={false} />\n\t\t));\n\t}\t\n\n\trenderNodeDetail() {\n\t\tconst { match } = this.props;\n\t\tif (!match || !match.params) {\n\t\t\treturn null;\n\t\t}\n\t\tconst nodeIds = this.selectedNodeIds();\n\n\t\tconst nodeTitles = nodeIds.join(\", \");\n\t\tconst title = `${nodeTitles} - Map - NYC Mesh`;\n\t\treturn (\n\t\t\t<DocumentTitle title={title}>\n\t\t\t\t<Fragment>\n\t\t\t\t\t{nodeIds.map(id => (\n\t\t\t\t\t\t<NodeDetail key={id} nodeId={id} />\n\t\t\t\t\t))}\n\t\t\t\t</Fragment>\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\thandleNodeClick(node) {\n\t\tconst { match, history } = this.props;\n\n\t\t// Command click selects multiple nodes\n\t\tif (this.state.commandPressed && match && match.params.nodeId) {\n\t\t\tconst nodeIds = this.selectedNodeIds();\n\t\t\tconst selectedId = node.id.toString();\n\n\t\t\tlet newNodeIds = [];\n\t\t\tif (nodeIds.indexOf(selectedId) > -1) {\n\t\t\t\tnewNodeIds = nodeIds.filter(nodeId => nodeId !== selectedId);\n\t\t\t} else {\n\t\t\t\tnodeIds.push(selectedId);\n\t\t\t\tnewNodeIds = nodeIds;\n\t\t\t}\n\n\t\t\tconst newNodeIdString = uniq(newNodeIds)\n\t\t\t\t.sort()\n\t\t\t\t.join(\"-\");\n\t\t\thistory.replace(`/nodes/${newNodeIdString}`);\n\t\t} else {\n\t\t\thistory.push(`/nodes/${node.id}`);\n\t\t}\n\t}\n\n\tresetAllNodes() {\n\t\tReactDOM.unstable_batchedUpdates(() => {\n\t\t\tObject.values(this.markerRefs).forEach(marker =>\n\t\t\t\tmarker.setVisibility(\"default\")\n\t\t\t);\n\n\t\t\tObject.values(this.lineRefs).forEach(line =>\n\t\t\t\tline.setVisibility(\"default\")\n\t\t\t);\n\t\t});\n\t}\n\n\tupdateNodes(selectedNodes, markers) {\n\t\tReactDOM.unstable_batchedUpdates(() => {\n\t\t\t// Dim all nodes\n\t\t\tObject.values(this.markerRefs).forEach(marker => {\n\t\t\t\tmarker.setVisibility(\"dim\");\n\t\t\t});\n\n\t\t\t// Highlight directly connected nodes\n\t\t\tselectedNodes.forEach(node => {\n\t\t\t\tif (node.connectedNodes) {\n\t\t\t\t\tnode.connectedNodes.forEach(nodeId => {\n\t\t\t\t\t\tconst connectedMarker = this.markerRefs[nodeId];\n\t\t\t\t\t\tif (connectedMarker) {\n\t\t\t\t\t\t\tconnectedMarker.setVisibility(\"secondary\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Highlight selected nodes\n\t\t\tmarkers.forEach(marker => marker.setVisibility(\"highlight\"));\n\t\t});\n\t}\n\n\tupdateLinks(nodes) {\n\t\tReactDOM.unstable_batchedUpdates(() => {\n\t\t\t// Dim all links\n\t\t\tObject.values(this.lineRefs).forEach(line =>\n\t\t\t\tline.setVisibility(\"dim\")\n\t\t\t);\n\n\t\t\t// Highlight direct links\n\t\t\tnodes.forEach(node => {\n\t\t\t\tif (node.links) {\n\t\t\t\t\tnode.links.forEach(link => {\n\t\t\t\t\t\tconst line = this.lineRefs[this.linkId(link)];\n\t\t\t\t\t\tif (line) {\n\t\t\t\t\t\t\tline.setVisibility(\"highlight\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tpanToNodes(nodes, fitBounds) {\n\t\tif (nodes.length === 1) {\n\t\t\tconst [lng, lat] = nodes[0].coordinates;\n\t\t\tthis.map.current.panTo({ lng, lat });\n\t\t\treturn;\n\t\t}\n\n\t\tlet minLng = 9999,\n\t\t\tminLat = 9999,\n\t\t\tmaxLng = -9999,\n\t\t\tmaxLat = -9999;\n\n\t\tnodes.forEach(node => {\n\t\t\tconst [lng, lat] = node.coordinates;\n\t\t\tif (lng < minLng) minLng = lng;\n\t\t\tif (lng > maxLng) maxLng = lng;\n\t\t\tif (lat < minLat) minLat = lat;\n\t\t\tif (lat > maxLat) maxLat = lat;\n\t\t});\n\n\t\tconst newBounds = {\n\t\t\teast: maxLng,\n\t\t\tnorth: maxLat,\n\t\t\tsouth: minLat,\n\t\t\twest: minLng\n\t\t};\n\n\t\tif (fitBounds) {\n\t\t\tthis.map.current.fitBounds(newBounds, window.innerWidth / 10);\n\t\t} else {\n\t\t\tthis.map.current.panToBounds(newBounds, window.innerWidth / 10);\n\t\t}\n\t}\n\n\thandleMarkerRef(ref) {\n\t\tif (ref) {\n\t\t\tthis.markerRefs[ref.props.node.id] = ref;\n\t\t}\n\t}\n\n\thandleLineRef(ref) {\n\t\tif (ref) {\n\t\t\tthis.lineRefs[this.linkId(ref.props.link)] = ref;\n\t\t}\n\t}\n\n\tlinkId(link) {\n\t\treturn `${link.from}-${link.to} ${link.status}`;\n\t}\n\n\tselectedNodeIds(match = this.props.match) {\n\t\tif (!match || !match.params || !match.params.nodeId) {\n\t\t\treturn [];\n\t\t}\n\t\treturn match.params.nodeId.split(\"-\");\n\t}\n}\n\nexport default withRouter(MapView);\n","export const mapStyles = [\n\t{\n\t\telementType: \"labels.icon\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"road\",\n\t\telementType: \"labels.icon\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"road.highway\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"transit\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t}\n];\n","import { connect } from \"react-redux\";\nimport PureMapView from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodes: state.nodes,\n\tlinks: state.links,\n\tsectors: state.sectors,\n\tkiosksClassic: state.kiosksClassic,\n\tkiosks5g: state.kiosks5g,\n\tfilters: state.filters\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureMapView);\n","import React, { PureComponent } from \"react\";\n\nimport { icons } from \"../NodeName\";\nimport { nodeColors } from \"../../utils\";\n\n// This should be defined elsewhere\nconst labels = [\n\t\"active\",\n\t\"remote\",\n\t\"kiosk\",\n\t\"omni\",\n\t\"hub\",\n\t\"supernode\",\n\t\"potential\",\n\t\"potential-hub\",\n\t\"potential-supernode\",\n\t\"linkNYC Classic\",\n\t\"linkNYC 5G\",\n\t\"sector\"\n];\n\nexport default class Filters extends PureComponent {\n\tcomponentDidMount() {\n\t\tconst { toggleFilter } = this.props;\n\t\tconst params = new URLSearchParams(this.props.location.search);\n\t\tif (params.get(\"potential\") === \"true\") toggleFilter(\"potential\");\n\t}\n\n\trender() {\n\t\tconst { showFilters } = this.props;\n\t\tif (!showFilters) return null;\n\t\treturn (\n\t\t\t<div className=\"bg-white f5 shadow-2\">\n\t\t\t\t<div role=\"group\" className=\"dib pa2\">\n\t\t\t\t\t<div className=\"flex flex-column-ns flex-wrap justify-between\">\n\t\t\t\t\t\t{labels.map(label => this.renderFilter(label))}\n\t\t\t\t\t\t{this.renderFilter(\"backbone\", true)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderFilter(label, hideCount) {\n\t\tconst { filters, statusCounts, toggleFilter } = this.props;\n\t\tconst enabled = filters[label] || filters[label] === undefined;\n\t\tconst opacity = enabled ? \"o-100\" : \"o-50 strike\";\n\n\t\tfunction getLabel(label) {\n\t\t\treturn label.replace(\"-\", \" \");\n\t\t}\n\n\t\t// Hack to change omni color based on backbone filter\n\t\tfunction getIcon(label) {\n\t\t\tif (label === \"omni\" && !filters.backbone) return icons.active;\n\t\t\tif (label === \"remote\" && filters.backbone) return icons.remote;\n\t\t\treturn icons[label];\n\t\t}\n\n\t\tfunction getColor(label) {\n\t\t\tif (label === \"omni\" && !filters.backbone) return nodeColors.active;\n\t\t\treturn nodeColors[label];\n\t\t}\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={label}\n\t\t\t\tclassName={`w-auto-ns w-50 pointer flex items-center justify-between ${opacity}`}\n\t\t\t\tonClick={() => toggleFilter(label)}\n\t\t\t>\n\t\t\t\t<label\n\t\t\t\t\thtmlFor={label}\n\t\t\t\t\tstyle={{ color: getColor(label) }}\n\t\t\t\t\tclassName=\"ttc pointer flex items-center nowrap\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginLeft: \"-0.5rem\",\n\t\t\t\t\t\t\tmarginRight: \"-0.25rem\",\n\t\t\t\t\t\t\tmarginTop: \"-0.125rem\",\n\t\t\t\t\t\t\tmarginBottom: \"-0.125rem\"\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName=\"h2 w2 flex items-center justify-center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{getIcon(label)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<span className=\"ml1\">\n\t\t\t\t\t\t{getLabel(label)}{\" \"}\n\t\t\t\t\t\t{hideCount ? null : `(${statusCounts[label] || 0})`}\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname={label}\n\t\t\t\t\tdefaultChecked={enabled}\n\t\t\t\t\tclassName=\"ma0 ml2 dn\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureFilters from \"./component\";\n\nimport { toggleFilter } from \"../../actions\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tfilters: state.filters,\n\tstatusCounts: state.statusCounts,\n\tshowFilters: state.showFilters\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n\ttoggleFilter: label => toggleFilter(label, dispatch)\n});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureFilters);\n","import React, { PureComponent } from \"react\";\n\nexport default class Stats extends PureComponent {\n\trender() {\n\t\tconst { statusCounts, filters } = this.props;\n\t\tif (!statusCounts) return null;\n\t\t\n\t\tconst {\n\t\t\tactive = 0,\n\t\t\thub = 0,\n\t\t\tsupernode = 0,\n\t\t\tomni = 0,\n\t\t\tremote = 0,\n\t\t\tkiosk = 0,\n\t\t\tap = 0,\n\t\t\tapFudge = 33\n\t\t} = statusCounts;\n\t\tconst totalCount = filters.backbone\n\t\t\t? active + hub + supernode + omni\n\t\t\t: active + hub + supernode + omni + remote + kiosk + ap + apFudge;\n\t\tconst nodeCount = filters.backbone\n\t\t\t? active\n\t\t\t: active + omni + remote + kiosk;\n\t\tconst hubCount = filters.backbone ? hub + omni : hub;\n\t\tconst apCount = ap + apFudge - 3 //faking this until all APs are in spreadsheet\n\t\treturn (\n\t\t\t<div className=\"ph3 bg-white\">\n\t\t\t\t<div className=\"measure-wide center pt4-ns pb3-ns pt3\">\n\t\t\t\t\t<div className=\"flex flex-wrap justify-between f3 fw6\">\n\t\t\t\t\t\t<span className=\"mr3 mb3\">\n\t\t\t\t\t\t\t{totalCount}{\" \"}\n\t\t\t\t\t\t\t<span className=\"mid-gray db f4 fw5\">Total</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"mr3 mb3 green\">\n\t\t\t\t\t\t\t{apCount}{\" \"}\n\t\t\t\t\t\t\t<span className=\"mid-gray db f4 fw5\">AP</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"mr3 mb3 pink\">\n\t\t\t\t\t\t\t{nodeCount}{\" \"}\n\t\t\t\t\t\t\t<span className=\"mid-gray db f4 fw5\">Non-hub</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"mr3 mb3 light-blue\">\n\t\t\t\t\t\t\t{hubCount}{\" \"}\n\t\t\t\t\t\t\t<span className=\"mid-gray db f4 fw5\">Hub</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"mr3 mb3 blue\">\n\t\t\t\t\t\t\t{supernode}{\" \"}\n\t\t\t\t\t\t\t<span className=\"mid-gray db f4 fw5\">\n\t\t\t\t\t\t\t\tSN\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureComponent from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tstatusCounts: state.statusCounts,\n\tfilters: state.filters\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureComponent);\n","import React, { PureComponent } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { format } from \"date-fns\";\nimport { icons } from \"../NodeName\";\n\nexport default class Log extends PureComponent {\n\tstate = {\n\t\tlimit: 3\n\t};\n\n\trender() {\n\t\tconst { links } = this.props;\n\t\tconst { limit } = this.state;\n\n\t\tconst sortedLinks = links\n\t\t\t.filter(link => link.status === \"active\" && link.installDate)\n\t\t\t.sort((a, b) => new Date(b.installDate) - new Date(a.installDate));\n\n\t\tlinks.forEach(link => {\n\t\t\tif (link.status === \"active\" && (!link.fromNode || !link.toNode)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\n\t\tfunction renderHorizontalLink(link) {\n\t\t\treturn (\n\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t<div className=\"ml2 mr3 w2 flex flex-column items-center justify-center\">\n\t\t\t\t\t\t<span className=\"flex items-center justify-center\">\n\t\t\t\t\t\t\t{icons[link.fromNode.type]}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"bg-blue h1\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\twidth: \"0.2rem\"\n\t\t\t\t\t\t\t\t// marginTop: \"-0.25rem\"\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span className=\"flex items-center justify-center\">\n\t\t\t\t\t\t\t{icons[link.toNode.type]}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t<time className=\"f6 fw5 mid-gray mb1 db\">\n\t\t\t\t\t\t\t{format(link.installDate, \"ddd, MMM D\")}\n\t\t\t\t\t\t</time>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<span className=\"fw6\">\n\t\t\t\t\t\t\t\t\t{link.fromNode.name || `Node ${link.from}`}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span className=\"mid-gray\"> connected to </span>\n\t\t\t\t\t\t\t\t<span className=\"fw6\">\n\t\t\t\t\t\t\t\t\t{link.toNode.name || `Node ${link.to}`}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"ph3 pb3 bg-white\">\n\t\t\t\t<div className=\"measure-wide center\">\n\t\t\t\t\t{sortedLinks.slice(0, limit).map(link => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tkey={`${link.from} ${link.to}`}\n\t\t\t\t\t\t\t\tto={`/nodes/${link.from}-${link.to}`}\n\t\t\t\t\t\t\t\tonClick={event => {\n\t\t\t\t\t\t\t\t\twindow.scroll(0, 0);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName=\"db pv3 bb b--light-gray no-underline black hover-bg-near-white\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{renderHorizontalLink(link)}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t{limit < sortedLinks.length ? (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"mt4 center bg-transparent bn pa0 blue pointer\"\n\t\t\t\t\t\t\tonClick={() => this.setState({ limit: limit * 2 })}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tShow more\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureComponent from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodes: state.nodes,\n\tlinks: state.links,\n\tsectors: state.sectors,\n\tnodesById: state.nodesById,\n\tstatusCounts: state.statusCounts,\n\tfilters: state.filters\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureComponent);\n","import { nodeType, nodeStatus, linkStatus } from \"../utils\";\n\nimport nodeData from \"../data/nodes\";\nimport linkData from \"../data/links\";\nimport sectorData from \"../data/sectors\";\nimport kiosks from \"../data/kiosks\";\n\nconst kiosks5g = kiosks.filter(kiosk => kiosk.type.toLowerCase().includes(\"5g\"));\nconst kiosksClassic = kiosks.filter(kiosk => !kiosk.type.toLowerCase().includes(\"5g\"));\n\nconst initialFilters = {\n\tremote: true,\n\t\"linkNYC Classic\": false,\n\t\"linkNYC 5G\": false,\n\tpotential: false,\n\tdead: false,\n\t\"potential-hub\": true,\n\t\"potential-supernode\": true,\n\tsector: true,\n\tbackbone: false,\n\tchangelog: false\n};\n\nconst { nodes, links, sectors, nodesById } = addGraphData(\n\tnodeData,\n\tlinkData,\n\tsectorData\n);\n\nconst reducer = (\n\tstate = {\n\t\tnodes,\n\t\tlinks,\n\t\tsectors,\n\t\tkiosksClassic: initialFilters[\"linkNYC Classic\"] === false ? [] : kiosksClassic,\n\t\tkiosks5g: initialFilters[\"linkNYC 5G\"] === false ? [] : kiosks5g,\n\t\tnodesById,\n\t\tfilters: initialFilters,\n\t\tstatusCounts: getCounts(nodes, kiosksClassic, kiosks5g),\n\t\tshowFilters: false\n\t},\n\taction\n) => {\n\tswitch (action.type) {\n\t\tcase \"TOGGLE_FILTER\":\n\t\t\tconst newFilters = {\n\t\t\t\t...state.filters,\n\t\t\t\t[action.label]:\n\t\t\t\t\tstate.filters[action.label] === undefined\n\t\t\t\t\t\t? false\n\t\t\t\t\t\t: !state.filters[action.label]\n\t\t\t};\n\t\t\tif (action.label === \"potential\") {\n\t\t\t\tconst hasValue = state.filters[\"potential\"] === undefined;\n\t\t\t\tconst newValue = hasValue ? false : !state.filters[\"potential\"];\n\t\t\t\tnewFilters[\"dead\"] = newValue;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfilters: newFilters,\n\t\t\t\tkiosksClassic: newFilters[\"linkNYC Classic\"] === false ? [] : kiosksClassic,\n\t\t\t\tkiosks5g: newFilters[\"linkNYC 5G\"] === false ? [] : kiosks5g,\n\t\t\t\t\n\t\t\t};\n\t\tcase \"TOGGLE_FILTERS\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tshowFilters: !state.showFilters\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\n// TODO: Calculate a lot of this in node-db\nfunction addGraphData(nodes, links, sectors) {\n\tconst nodesById = {};\n\n\tconst linksByNodeId = {};\n\tlinks.forEach(link => {\n\t\tlinksByNodeId[link.from] = linksByNodeId[link.from] || [];\n\t\tlinksByNodeId[link.to] = linksByNodeId[link.to] || [];\n\t\tlinksByNodeId[link.from].push(link);\n\t\tlinksByNodeId[link.to].push(link);\n\t});\n\n\t// Group nodes at same lat / lng\n\tconst mergedNodes = {};\n\n\t// Add status, types and links to nodes\n\tnodes.forEach(node => {\n\t\tif (node.notes) {\n\t\t\tnode.notes = String(node.notes);\n\t\t}\n\t\tnodesById[node.id] = node;\n\t\tnode.links = linksByNodeId[node.id];\n\t\tnode.status = nodeStatus(node);\n\t\tconst key = geoKey(node);\n\t\tmergedNodes[key] = mergedNodes[key] || [];\n\t\tmergedNodes[key].push(node);\n\n\t\t// Make sure values are all strings\n\t\tif (node.name) {\n\t\t\tnode.name = String(node.name)\n\t\t}\n\n\t\tif (node.notes) {\n\t\t\tnode.notes = String(node.notes)\n\t\t}\n\t});\n\n\t// Add status and nodes to links\n\tlinks.forEach(link => {\n\t\tlink.fromNode = nodesById[link.from];\n\t\tlink.toNode = nodesById[link.to];\n\t\tlink.status = linkStatus(link);\n\t});\n\n\t// Add sectors to nodes\n\tconst sectorsByNodeId = {};\n\tsectors.forEach(sector => {\n\t\tsector.node = nodesById[sector.nodeId];\n\t\tsectorsByNodeId[sector.nodeId] = sectorsByNodeId[sector.nodeId] || [];\n\t\tsectorsByNodeId[sector.nodeId].push(sector);\n\t});\n\n\tnodes.forEach(node => {\n\t\tnode.sectors = sectorsByNodeId[node.id];\n\n\t\t// Calculate connected nodes for each active node\n\t\tconst connectedNodes = [node.id];\n\n\t\tlinks.forEach(link => {\n\t\t\tif (link.from === parseInt(node.id, 10)) {\n\t\t\t\tconnectedNodes.push(link.to);\n\t\t\t}\n\n\t\t\tif (link.to === parseInt(node.id, 10)) {\n\t\t\t\tconnectedNodes.push(link.from);\n\t\t\t}\n\t\t});\n\n\t\tnode.connectedNodes = connectedNodes;\n\t\tnode.memberNodes = mergedNodes[geoKey(node)];\n\n\t\tnode.type = nodeType(node);\n\t\tnodesById[node.id] = node;\n\t});\n\n\treturn { nodes, links, sectors, nodesById };\n}\n\nfunction getCounts(nodes, kiosksClassic, kiosks5g) {\n\tconst counts = {};\n\tnodes.forEach(node => {\n\t\tconst { type } = node;\n\t\tcounts[type] = (counts[type] || 0) + 1;\n\n\t\tif (node.sectors) {\n\t\t\tcounts[\"sector\"] = (counts[\"sector\"] || 0) + node.sectors.length;\n\t\t}\n\t});\n\tcounts[\"linkNYC Classic\"] = kiosksClassic.length;\n\tcounts[\"linkNYC 5G\"] = kiosks5g.length;\n\treturn counts;\n}\n\nfunction geoKey(node) {\n\tconst precision = 5;\n\tconst [lat, lng] = node.coordinates;\n\tconst key = lat.toFixed(precision) + \"-\" + lng.toFixed(precision);\n\treturn key;\n}\n\nexport default reducer;\n","import { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport DocumentTitle from \"react-document-title\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nimport React, { Component } from \"react\";\nimport SearchBar from \"./components/SearchBar\";\nimport MapView from \"./components/MapView\";\nimport Filters from \"./components/Filters\";\nimport Stats from \"./components/Stats\";\nimport Log from \"./components/Log\";\n\nimport rootReducer from \"./reducers\";\n\nconst store = createStore(rootReducer);\n\nclass App extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<DocumentTitle title=\"Map - NYC Mesh\">\n\t\t\t\t<Provider store={store}>\n\t\t\t\t\t<Router basename=\"/map\">\n\t\t\t\t\t\t<div className=\"helvetica\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tid=\"map-stats-container\"\n\t\t\t\t\t\t\t\tclassName=\"h-100 w-100 flex flex-column\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"h-100 w-100 relative flex flex-column\">\n\t\t\t\t\t\t\t\t\t<div className=\"absolute pa2 z-999 search-bar\">\n\t\t\t\t\t\t\t\t\t\t<SearchBar />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\tpath=\"/nodes/:nodeId\"\n\t\t\t\t\t\t\t\t\t\tchildren={({ match }) => (\n\t\t\t\t\t\t\t\t\t\t\t<MapView match={match} />\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"absolute bottom-0 left-0 ma2\">\n\t\t\t\t\t\t\t\t\t\t<Route component={Filters} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Route path=\"/\" component={Stats} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Route path=\"/\" component={Log} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Router>\n\t\t\t\t</Provider>\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\thandleNodeClick(node) {}\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nif (process.env.NODE_ENV === \"development\") {\n\trequire(\"tachyons\");\n\trequire(\"./index.css\");\n} else {\n\trequire(\"./index.css\");\n}\n\nReactDOM.render(<App />, document.getElementById(\"map-root\"));\n"],"sourceRoot":""}