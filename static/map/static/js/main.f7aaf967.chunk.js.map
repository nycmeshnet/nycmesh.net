{"version":3,"sources":["utils/index.js","components/NodeName.js","components/SearchBar/NodeRow.js","components/SearchBar/component.js","components/SearchBar/connected.js","components/MapView/Sector.js","components/MapView/NodeMarker.js","components/MapView/KioskMarker.js","components/MapView/LinkLine.js","components/NodeDetail/component.js","components/NodeDetail/connected.js","components/Gallery/component.js","components/Gallery/connected.js","components/MapView/component.js","components/MapView/styles.js","components/MapView/connected.js","components/Filters/component.js","components/Filters/connected.js","actions/index.js","reducers/index.js","App.js","index.js"],"names":["nodeStatus","node","status","notes","panoramas","isActive","isSupernode","toLowerCase","indexOf","isHub","hasPanoramas","length","nodeColors","active","dead","hub","kiosk","linkNYC","potential-hub","potential-supernode","potential","supernode","icons","react_default","a","createElement","xmlns","width","height","cx","cy","r","stroke","strokeWidth","fill","opacity","NodeName","_this$props","this","props","search","className","main_default","highlightClassName","searchWords","autoEscape","textToHighlight","concat","id","PureComponent","NodeRow","onClick","Link","to","key","NodeName_NodeName","SearchBar","state","filteredNodes","showDropdown","prevProps","prevState","nodes","setState","filterSearch","renderSearchBar","renderList","_this2","refs","focus","viewBox","strokeLinecap","strokeLinejoin","style","minWidth","x1","y1","x2","y2","ref","value","placeholder","spellCheck","autoCorrect","onFocus","onChange","event","target","renderClearButton","_this3","map","NodeRow_NodeRow","iconColor","colorForNode","_this4","lowerSearch","Object","toConsumableArray","filter","parseInt","sort","b","tickets","connect","ownProps","dispatch","PureSearchBar","visibilityMultipliers","highlight","secondary","dim","zIndexes","Sector","visibility","fillOpacity","MAX_OPACITY","fillColor","zIndex","_this$props2","lat","lng","radius","azimuth","interval","Array","keys","index","path","centerPoint","PRlat","Math","PI","PRlng","cos","PGpoints","push","lat1","lon1","sin","lat2","lon2","theta","gamma","PGlon","PGlat","getPath","lib","options","strokeColor","strokeOpacity","clickable","NodeMarker","history","context","router","_node$coordinates","slicedToArray","coordinates","_this$getMarkerProps","getMarkerProps","icon","react","defaultPosition","title","getOpacity","getZIndex","renderSectors","sectors","sector","_sector$node$coordina","Sector_Sector","defaultZIndex","url","anchor","x","y","contextTypes","PropTypes","object","RouterNodeMarker","withRouter","CombinedMarker","assign","KioskMarker","_kiosk$coordinates","LinkLine","link","_link$coordinates","start","end","_start","lng1","_end","lng2","latlng1","latlng2","_this$getLineProps","getLineProps","defaultOpacity","getPixelPositionOffset","NodeDetail","nodeId","nodesById","_coordinates","position","window","google","maps","LatLng","mapPaneName","OverlayView","OVERLAY_MOUSE_TARGET","preventMapHitsFrom","renderImage","version","aria-hidden","fillRule","d","firstPanorama","backgroundImage","Gallery","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","getPanoramas","keyDownHandler","handleKeyDown","bind","addEventListener","removeEventListener","preventDefault","stopPropagation","keyCode","match","_match$params","params","panoId","panoIdInt","nextPanoId","prevPanoId","_match$params2","src","react_document_title_default","open","alt","renderPreviews","_match$params3","panorama","PureGallery","DEFAULT_CENTER","styles","elementType","stylers","featureType","fullscreenControl","streetViewControl","zoomControlOptions","mapTypeControlOptions","backgroundColor","gestureHandling","clickableIcons","MapComponent","withScriptjs","withGoogleMap","mapRef","children","MapView","React","createRef","markerRefs","lineRefs","setTimeout","handleSelectedChange","e","console","error","nextProps","resetAllNodes","nextSelectedNodeId","nextSelectedMarker","nextSelectedNode","updateNodes","updateLinks","panToNode","defaultZoom","defaultCenter","defaultOptions","loadingElement","containerElement","mapElement","googleMapURL","renderLinks","renderKiosks","renderNodes","renderNodeDetail","es_Route","exact","component","NodeMarker_CombinedMarker","handleMarkerRef","kiosks","KioskMarker_KioskMarker","links","LinkLine_LinkLine","linkId","handleLineRef","_this5","ReactDOM","unstable_batchedUpdates","values","forEach","marker","setVisibility","line","NodeDetail_connected","_this6","connectedNodes","connectedNodeId","connectedMarker","_this7","current","panTo","from","Component","filteredLinks","PureMapView","labels","Filters","role","label","renderFilter","filters","statusCounts","toggleFilter","undefined","type","name","defaultChecked","htmlFor","color","marginLeft","marginRight","marginTop","marginBottom","replace","PureFilters","initialFilters","addGraphData","nodeData","linkData","sectorData","initialState","filterNodes","filterLinks","getCounts","fromNode","toNode","sectorsByNodeId","counts","reducer","arguments","action","newFilters","objectSpread","defineProperty","newValue","newNodes","newStatusCounts","newLinks","store","createStore","rootReducer","App","es","BrowserRouter","basename","connected","Route","_ref","MapView_connected","Filters_connected","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.f7aaf967.chunk.js","sourcesContent":["// Temporary hack\nconst nodeNames = {\n\t227: \"Supernode 1\",\n\t570: \"Supernode 2\",\n\t713: \"Supernode 3\"\n};\n\nexport function nodeName(node) {\n\treturn nodeNames[node.id] || `Node ${node.id}`;\n}\n\nexport function nodeStatus(node) {\n\tconst { status, notes, panoramas } = node;\n\tconst isActive = status === \"Installed\";\n\tconst isSupernode = notes && notes.toLowerCase().indexOf(\"supernode\") > -1;\n\tconst isHub = notes && notes.toLowerCase().indexOf(\"hub\") > -1;\n\tconst hasPanoramas = panoramas && panoramas.length;\n\n\tif (isActive) {\n\t\tif (isSupernode) return \"supernode\";\n\t\tif (isHub) return \"hub\";\n\t\treturn \"active\";\n\t}\n\n\tif (isSupernode) return \"potential-supernode\";\n\tif (isHub) return \"potential-hub\";\n\tif (hasPanoramas) return \"potential\";\n\treturn \"dead\";\n}\n\nexport const nodeColors = {\n\tactive: \"rgb(255,59,48)\",\n\tdead: \"#aaa\",\n\thub: \"rgb(90,200,250)\",\n\tkiosk: \"#01a2eb\",\n\tlinkNYC: \"#01a2eb\",\n\t\"potential-hub\": \"#777\",\n\t\"potential-supernode\": \"#777\",\n\tpotential: \"#777\",\n\tsupernode: \"#007aff\"\n};\n","import React, { PureComponent } from \"react\";\nimport Highlighter from \"react-highlight-words\";\n\nimport { nodeStatus } from \"../utils\";\n\nexport const icons = {\n\tdead: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\">\n\t\t\t<circle\n\t\t\t\tcx=\"7\"\n\t\t\t\tcy=\"7\"\n\t\t\t\tr=\"5\"\n\t\t\t\tstroke=\"#fff\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tfill=\"#aaa\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\tpotential: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\">\n\t\t\t<circle\n\t\t\t\tcx=\"8\"\n\t\t\t\tcy=\"8\"\n\t\t\t\tr=\"6\"\n\t\t\t\tstroke=\"#fff\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tfill=\"#777\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\t\"potential-hub\": (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"#777\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"8\"\n\t\t\t\t\tcy=\"10\"\n\t\t\t\t\tcx=\"10\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\t\"potential-supernode\": (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"#777\"\n\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"10\"\n\t\t\t\t\tcy=\"14\"\n\t\t\t\t\tcx=\"14\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\tactive: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\">\n\t\t\t<circle\n\t\t\t\tcx=\"10\"\n\t\t\t\tcy=\"10\"\n\t\t\t\tr=\"8\"\n\t\t\t\tstroke=\"#fff\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tfill=\"rgb(255,59,48)\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\thub: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"rgb(90,200,250)\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"8\"\n\t\t\t\t\tcy=\"10\"\n\t\t\t\t\tcx=\"10\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\tsupernode: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"#007aff\"\n\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"10\"\n\t\t\t\t\tcy=\"14\"\n\t\t\t\t\tcx=\"14\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\tlinkNYC: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\">\n\t\t\t<circle\n\t\t\t\tcx=\"10\"\n\t\t\t\tcy=\"10\"\n\t\t\t\tr=\"3\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\tfill=\"#01a2eb\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t)\n};\n\nexport default class NodeName extends PureComponent {\n\trender() {\n\t\tconst { node, search } = this.props;\n\t\treturn (\n\t\t\t<div className=\"h1 w-100 overflow-visible flex justify-start items-center\">\n\t\t\t\t<div className=\"h2 w2 min-h2 min-w2 flex items-center justify-center\">\n\t\t\t\t\t{icons[nodeStatus(node)]}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"pl1 flex-1 truncate\">\n\t\t\t\t\t<span className=\"db f5 fw6 black mv0\">\n\t\t\t\t\t\t<Highlighter\n\t\t\t\t\t\t\thighlightClassName=\"bg-light-yellow\"\n\t\t\t\t\t\t\tsearchWords={[search]}\n\t\t\t\t\t\t\tautoEscape={true}\n\t\t\t\t\t\t\ttextToHighlight={`Node ${node.id}`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t{node.notes ? (\n\t\t\t\t\t\t<span className=\"db f7 gray mv05 truncate\">\n\t\t\t\t\t\t\t<Highlighter\n\t\t\t\t\t\t\t\thighlightClassName=\"bg-light-yellow dark-gray\"\n\t\t\t\t\t\t\t\tsearchWords={[search]}\n\t\t\t\t\t\t\t\tautoEscape={true}\n\t\t\t\t\t\t\t\ttextToHighlight={node.notes}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport NodeName from \"../NodeName\";\n\nexport default class NodeRow extends PureComponent {\n\trender() {\n\t\tconst { node, search, onClick } = this.props;\n\t\tconst { id } = node;\n\t\treturn (\n\t\t\t<Link className=\"link\" to={`/nodes/${id}`}>\n\t\t\t\t<div\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName=\"pointer hover-bg-near-white bb b--light-gray pa3 pl2\"\n\t\t\t\t>\n\t\t\t\t\t<NodeName node={node} search={search} />\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t);\n\t}\n}\n","import React, { PureComponent } from \"react\";\n\nimport NodeRow from \"./NodeRow\";\n\nexport default class SearchBar extends PureComponent {\n\tstate = {\n\t\tfilteredNodes: [],\n\t\tsearch: \"\",\n\t\tshowDropdown: false\n\t};\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t// Super hacky, do this better\n\t\tif (\n\t\t\tprevState.search === this.state.search &&\n\t\t\tprevProps.nodes !== this.props.nodes\n\t\t) {\n\t\t\tthis.setState({\n\t\t\t\tfilteredNodes: this.filterSearch(this.state.search)\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"w-100 mw6 shadow-2\">\n\t\t\t\t{this.renderSearchBar()}\n\t\t\t\t{this.renderList()}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderSearchBar() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"flex items-center bg-white overflow-hidden\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.refs.search.focus();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\twidth=\"20\"\n\t\t\t\t\theight=\"20\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tstroke=\"#aaa\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\tclassName=\"ml3 db\"\n\t\t\t\t\tstyle={{ minWidth: 20 }}\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"11\" cy=\"11\" r=\"8\" />\n\t\t\t\t\t<line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\n\t\t\t\t</svg>\n\t\t\t\t<input\n\t\t\t\t\tref=\"search\"\n\t\t\t\t\tclassName=\"overflow-hidden pl2 pr3 pv3 input-reset f5 fw4 bw0 w-100 on\"\n\t\t\t\t\tvalue={this.state.search}\n\t\t\t\t\tplaceholder=\"Search nodes\"\n\t\t\t\t\tspellCheck={false}\n\t\t\t\t\tautoCorrect=\"false\"\n\t\t\t\t\tonFocus={() => this.setState({ showDropdown: true })}\n\t\t\t\t\tonChange={event =>\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tsearch: event.target.value,\n\t\t\t\t\t\t\tfilteredNodes: this.filterSearch(event.target.value)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{this.renderClearButton()}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderList() {\n\t\tif (!this.state.filteredNodes.length || !this.state.showDropdown) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { search } = this.state;\n\t\treturn (\n\t\t\t<div className=\"bg-white bt b--light-gray max-h-5-rows overflow-y-scroll\">\n\t\t\t\t{this.state.filteredNodes.map(node => (\n\t\t\t\t\t<NodeRow\n\t\t\t\t\t\tkey={node.id}\n\t\t\t\t\t\tnode={node}\n\t\t\t\t\t\tsearch={search}\n\t\t\t\t\t\ticonColor={this.colorForNode(node)}\n\t\t\t\t\t\tonClick={() => this.setState({ showDropdown: false })}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderClearButton() {\n\t\tconst { search } = this.state;\n\n\t\tif (!search || !search.length) {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"mr3\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: 20,\n\t\t\t\t\t\theight: 20\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tsearch: \"\",\n\t\t\t\t\t\tfilteredNodes: []\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tclassName=\"on btn bn pa0 bg-white pointer mr3 silver\"\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\twidth=\"20\"\n\t\t\t\t\theight=\"20\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\tclassName=\"db\"\n\t\t\t\t>\n\t\t\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n\t\t\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t);\n\t}\n\n\tfilterSearch(search) {\n\t\tconst { nodes } = this.props;\n\t\tif (!search) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst lowerSearch = search.toLowerCase();\n\n\t\treturn [\n\t\t\t...nodes.filter(\n\t\t\t\tnode =>\n\t\t\t\t\tnode.id === parseInt(search, 10) ||\n\t\t\t\t\tlowerSearch === `node ${node.id}`\n\t\t\t),\n\t\t\t...nodes\n\t\t\t\t.filter(\n\t\t\t\t\tnode =>\n\t\t\t\t\t\tnode.notes &&\n\t\t\t\t\t\tnode.notes.toLowerCase().indexOf(lowerSearch) > -1\n\t\t\t\t)\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tif (a.status !== b.status) {\n\t\t\t\t\t\tif (a.status === \"Installed\") return -1;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn a.id - b.id;\n\t\t\t\t})\n\t\t];\n\t}\n\n\tcolorForNode(node) {\n\t\tconst { status, tickets } = node;\n\t\treturn status === \"Installed\"\n\t\t\t? \"rgb(255,59,48)\"\n\t\t\t: tickets && tickets.length > 2\n\t\t\t\t? \"rgb(255,204,0)\"\n\t\t\t\t: \"gray\";\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureSearchBar from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodes: state.nodes,\n\ttickets: state.tickets\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PureSearchBar);\n","import React, { PureComponent } from \"react\";\nimport { Polygon } from \"react-google-maps\";\nimport { nodeColors, nodeStatus } from \"../../utils\";\n\nconst MAX_OPACITY = 0.75;\nconst INTERVAL_COUNT = 25;\n\nconst visibilityMultipliers = {\n\thighlight: 1.25,\n\tsecondary: 0.125,\n\tdim: 0.125\n};\n\nconst zIndexes = {\n\thighlight: 3,\n\tdim: 1\n};\n\nexport default class Sector extends PureComponent {\n\trender() {\n\t\tconst { visibility, node } = this.props;\n\n\t\tconst multiplier = visibilityMultipliers[visibility] || 1;\n\t\tconst fillOpacity = (MAX_OPACITY / INTERVAL_COUNT) * multiplier;\n\t\tconst fillColor = nodeColors[nodeStatus(node)];\n\t\tconst zIndex = zIndexes[visibility] || 1;\n\n\t\tconst { lat, lng, radius, azimuth, width } = this.props;\n\t\tconst interval = radius / INTERVAL_COUNT;\n\t\tconst radiusIndices = [...Array(INTERVAL_COUNT).keys()];\n\n\t\treturn radiusIndices.map(index => {\n\t\t\tconst circleRadius = interval * index;\n\t\t\tconst path = getPath(lat, lng, circleRadius, azimuth, width);\n\t\t\treturn (\n\t\t\t\t<Polygon\n\t\t\t\t\tkey={index}\n\t\t\t\t\tpath={path}\n\t\t\t\t\toptions={{\n\t\t\t\t\t\tstrokeColor: \"transparent\",\n\t\t\t\t\t\tstrokeOpacity: 0,\n\t\t\t\t\t\tstrokeWidth: 0,\n\t\t\t\t\t\tfillColor,\n\t\t\t\t\t\tfillOpacity,\n\t\t\t\t\t\tclickable: false\n\t\t\t\t\t}}\n\t\t\t\t\tzIndex={zIndex}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n}\n\nfunction getPath(lat, lng, radius, azimuth, width) {\n\tvar centerPoint = { lat, lng };\n\tvar PRlat = (radius / 3963) * (180 / Math.PI); // using 3963 miles as earth's radius\n\tvar PRlng = PRlat / Math.cos(lat * (Math.PI / 180));\n\tvar PGpoints = [];\n\tPGpoints.push(centerPoint);\n\n\tconst lat1 =\n\t\tlat + PRlat * Math.cos((Math.PI / 180) * (azimuth - width / 2));\n\tconst lon1 =\n\t\tlng + PRlng * Math.sin((Math.PI / 180) * (azimuth - width / 2));\n\tPGpoints.push({ lat: lat1, lng: lon1 });\n\n\tconst lat2 =\n\t\tlat + PRlat * Math.cos((Math.PI / 180) * (azimuth + width / 2));\n\tconst lon2 =\n\t\tlng + PRlng * Math.sin((Math.PI / 180) * (azimuth + width / 2));\n\n\tvar theta = 0;\n\tvar gamma = (Math.PI / 180) * (azimuth + width / 2);\n\n\tfor (var a = 1; theta < gamma; a++) {\n\t\ttheta = (Math.PI / 180) * (azimuth - width / 2 + a);\n\t\tconst PGlon = lng + PRlng * Math.sin(theta);\n\t\tconst PGlat = lat + PRlat * Math.cos(theta);\n\n\t\tPGpoints.push({ lat: PGlat, lng: PGlon });\n\t}\n\n\tPGpoints.push({ lat: lat2, lng: lon2 });\n\tPGpoints.push(centerPoint);\n\n\treturn PGpoints;\n}\n","import React, { PureComponent, Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Marker } from \"react-google-maps\";\nimport { withRouter } from \"react-router\";\n\nimport { nodeStatus } from \"../../utils\";\nimport Sector from \"./Sector\";\n\nclass NodeMarker extends PureComponent {\n\tstatic contextTypes = {\n\t\trouter: PropTypes.object\n\t};\n\n\trender() {\n\t\tconst { node } = this.props;\n\t\tconst { history } = this.context.router;\n\t\tconst { id, notes } = node;\n\t\tconst [lng, lat] = node.coordinates;\n\t\tconst { icon, zIndex } = this.getMarkerProps();\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Marker\n\t\t\t\t\tdefaultPosition={{ lat, lng }}\n\t\t\t\t\ticon={icon}\n\t\t\t\t\ttitle={`${id}${notes ? ` - ${notes}` : \"\"}`}\n\t\t\t\t\toptions={{ opacity: this.getOpacity() }}\n\t\t\t\t\tzIndex={this.getZIndex(zIndex)}\n\t\t\t\t\tonClick={() => history.push(`/nodes/${id}`)}\n\t\t\t\t/>\n\t\t\t\t{this.renderSectors()}\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderSectors() {\n\t\tconst { node, visibility } = this.props;\n\t\tconst { sectors } = node;\n\t\tif (!sectors) {\n\t\t\treturn null;\n\t\t}\n\t\treturn sectors.map(sector => {\n\t\t\tconst [lng, lat] = sector.node.coordinates;\n\t\t\tconst { radius, azimuth, width, active } = sector;\n\t\t\tconst key = lat + lng + radius + azimuth + width;\n\t\t\treturn (\n\t\t\t\t<Sector\n\t\t\t\t\tkey={key}\n\t\t\t\t\tlat={lat}\n\t\t\t\t\tlng={lng}\n\t\t\t\t\tradius={radius}\n\t\t\t\t\tazimuth={azimuth}\n\t\t\t\t\twidth={width}\n\t\t\t\t\tactive={active}\n\t\t\t\t\tvisibility={visibility}\n\t\t\t\t\tnode={node}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\tgetOpacity() {\n\t\tconst { visibility } = this.props;\n\t\tif (visibility === \"highlight\") return 1;\n\t\tif (visibility === \"secondary\") return 1;\n\t\tif (visibility === \"dim\") return 0.25;\n\t\treturn 1;\n\t}\n\n\tgetZIndex(defaultZIndex) {\n\t\tconst { visibility } = this.props;\n\t\tif (visibility === \"highlight\") return defaultZIndex + 999;\n\t\tif (visibility === \"secondary\") return defaultZIndex + 998;\n\t\treturn defaultZIndex;\n\t}\n\n\tgetMarkerProps() {\n\t\tconst { node } = this.props;\n\n\t\tconst status = nodeStatus(node);\n\n\t\tif (status === \"supernode\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/supernode.svg\",\n\t\t\t\t\tanchor: { x: 14, y: 14 }\n\t\t\t\t},\n\t\t\t\tzIndex: 100\n\t\t\t};\n\n\t\tif (status === \"hub\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/hub.svg\",\n\t\t\t\t\tanchor: { x: 10, y: 10 }\n\t\t\t\t},\n\t\t\t\tzIndex: 99\n\t\t\t};\n\n\t\tif (status === \"active\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/active.svg\",\n\t\t\t\t\tanchor: { x: 10, y: 10 }\n\t\t\t\t},\n\t\t\t\tzIndex: 98\n\t\t\t};\n\n\t\tif (status === \"potential-supernode\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential-supernode.svg\",\n\t\t\t\t\tanchor: { x: 14, y: 14 }\n\t\t\t\t},\n\t\t\t\tzIndex: 89\n\t\t\t};\n\n\t\tif (status === \"potential-hub\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential-hub.svg\",\n\t\t\t\t\tanchor: { x: 10, y: 10 }\n\t\t\t\t},\n\t\t\t\tzIndex: 88\n\t\t\t};\n\n\t\tif (status === \"potential\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential.svg\",\n\t\t\t\t\tanchor: { x: 8, y: 8 }\n\t\t\t\t},\n\t\t\t\tzIndex: 87\n\t\t\t};\n\n\t\treturn {\n\t\t\ticon: {\n\t\t\t\turl: \"/img/map/dead.svg\",\n\t\t\t\tanchor: { x: 7, y: 7 }\n\t\t\t},\n\t\t\tzIndex: 86\n\t\t};\n\t}\n}\n\nconst RouterNodeMarker = withRouter(NodeMarker);\n\nexport default class CombinedMarker extends PureComponent {\n\tstate = {\n\t\tvisibility: \"default\"\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<RouterNodeMarker\n\t\t\t\t{...this.props}\n\t\t\t\tvisibility={this.state.visibility}\n\t\t\t/>\n\t\t);\n\t}\n\n\tsetVisibility(visibility) {\n\t\tthis.setState({ visibility });\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Marker } from \"react-google-maps\";\n\nexport default class KioskMarker extends PureComponent {\n\trender() {\n\t\tconst { kiosk } = this.props;\n\t\tconst [lng, lat] = kiosk.coordinates;\n\t\tconst icon = {\n\t\t\turl: \"/img/map/kiosk.svg\",\n\t\t\tanchor: { x: 5, y: 5 }\n\t\t};\n\t\treturn <Marker defaultPosition={{ lat, lng }} icon={icon} zIndex={1} />;\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Polyline } from \"react-google-maps\";\n\nexport default class LinkLine extends PureComponent {\n\tstate = {\n\t\tvisibility: \"default\"\n\t};\n\n\trender() {\n\t\tconst { link } = this.props;\n\n\t\tconst [start, end] = link.coordinates;\n\t\tconst [lng1, lat1] = start;\n\t\tconst [lng2, lat2] = end;\n\t\tconst latlng1 = { lat: lat1, lng: lng1 };\n\t\tconst latlng2 = { lat: lat2, lng: lng2 };\n\n\t\tconst { strokeColor, strokeOpacity, zIndex } = this.getLineProps();\n\n\t\treturn (\n\t\t\t<Polyline\n\t\t\t\tpath={[latlng1, latlng2]}\n\t\t\t\toptions={{\n\t\t\t\t\tstrokeColor,\n\t\t\t\t\tstrokeOpacity: this.getOpacity(strokeOpacity)\n\t\t\t\t}}\n\t\t\t\tzIndex={this.getZIndex(zIndex)}\n\t\t\t/>\n\t\t);\n\t}\n\n\tgetOpacity(defaultOpacity) {\n\t\tconst { visibility } = this.state;\n\t\tif (visibility === \"highlight\") return 1;\n\t\tif (visibility === \"dim\") return defaultOpacity * 0.125;\n\t\treturn defaultOpacity;\n\t}\n\n\tgetZIndex(defaultZIndex) {\n\t\tconst { visibility } = this.state;\n\t\tif (visibility === \"highlight\") return 60;\n\t\treturn defaultZIndex;\n\t}\n\n\tsetVisibility(visibility) {\n\t\tthis.setState({ visibility });\n\t}\n\n\tgetLineProps() {\n\t\tconst { link } = this.props;\n\t\tconst { status } = link;\n\n\t\tif (status === \"active\")\n\t\t\treturn {\n\t\t\t\tstrokeColor: \"#007aff\",\n\t\t\t\tstrokeOpacity: 1,\n\t\t\t\tzIndex: 50\n\t\t\t};\n\n\t\treturn {\n\t\t\tstrokeColor: \"#aaa\",\n\t\t\tstrokeOpacity: 0.25,\n\t\t\tzIndex: 50\n\t\t};\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { OverlayView } from \"react-google-maps\";\nimport { Link } from \"react-router-dom\";\n\nconst getPixelPositionOffset = (width, height) => ({\n\tx: -width / 2,\n\ty: -height\n});\n\nexport default class NodeDetail extends PureComponent {\n\trender() {\n\t\tconst { nodeId, nodesById } = this.props;\n\t\tconst node = nodesById[nodeId];\n\t\tif (!node) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { coordinates } = node;\n\t\tconst [lng, lat] = coordinates;\n\n\t\treturn (\n\t\t\t<OverlayView\n\t\t\t\tposition={new window.google.maps.LatLng(lat, lng)}\n\t\t\t\tmapPaneName={OverlayView.OVERLAY_MOUSE_TARGET}\n\t\t\t\tgetPixelPositionOffset={getPixelPositionOffset}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tref={ref =>\n\t\t\t\t\t\tref &&\n\t\t\t\t\t\twindow.google.maps.OverlayView.preventMapHitsFrom(ref)\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"flex flex-column items-center\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex items-center bg-white br2 overflow-hidden shadow-2\">\n\t\t\t\t\t\t{this.renderImage(node)}\n\t\t\t\t\t\t<div className=\"pv1 ph2 flex flex-column justify-end\">\n\t\t\t\t\t\t\t<span className=\"f5 fw6 nowrap sans-serif\">\n\t\t\t\t\t\t\t\tNode {node.id}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<svg\n\t\t\t\t\t\tviewBox=\"0 5 12 12\"\n\t\t\t\t\t\tversion=\"1.1\"\n\t\t\t\t\t\twidth=\"12\"\n\t\t\t\t\t\theight=\"12\"\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\tfill=\"white\"\n\t\t\t\t\t\t\td=\"M0 5l6 6 6-6H0z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</OverlayView>\n\t\t);\n\t}\n\n\trenderImage(node) {\n\t\tconst { id, panoramas } = node;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn null;\n\t\t}\n\t\tconst [firstPanorama] = panoramas;\n\t\treturn (\n\t\t\t<Link to={`/nodes/${id}/panoramas/1`} className=\"db node-image\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"h-100 w-100 cover bg-center bg-near-white\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundImage: `url(\"https://node-db.netlify.com/panoramas/${firstPanorama}\")`\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Link>\n\t\t);\n\t}\n\n\trenderNotes(node) {\n\t\tconst { notes } = node;\n\t\tif (!notes) {\n\t\t\treturn null;\n\t\t}\n\t\treturn <span className=\"mv0 f7 gray truncate sans-serif\">{notes}</span>;\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureComponent from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodesById: state.nodesById\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureComponent);\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport DocumentTitle from \"react-document-title\";\n\nexport default class Gallery extends PureComponent {\n\tstatic contextTypes = {\n\t\trouter: PropTypes.object\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpanoramas: this.getPanoramas()\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.keyDownHandler = this.handleKeyDown.bind(this);\n\t\twindow.addEventListener(\"keydown\", this.keyDownHandler, true);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"keydown\", this.keyDownHandler, true);\n\t}\n\n\thandleKeyDown(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tconst { keyCode } = event;\n\t\tconst { match } = this.props;\n\t\tconst { panoramas } = this.state;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst { history } = this.context.router;\n\t\tconst panoIdInt = parseInt(panoId);\n\t\tif (keyCode === 27) {\n\t\t\thistory.push(`/nodes/${nodeId}`);\n\t\t} else if (keyCode === 39) {\n\t\t\tconst nextPanoId = panoIdInt < panoramas.length ? panoIdInt + 1 : 1;\n\t\t\thistory.push(`/nodes/${nodeId}/panoramas/${nextPanoId}`);\n\t\t} else if (keyCode === 37) {\n\t\t\tconst prevPanoId = panoId > 1 ? panoIdInt - 1 : panoramas.length;\n\t\t\thistory.push(`/nodes/${nodeId}/panoramas/${prevPanoId}`);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { match } = this.props;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst { panoramas } = this.state;\n\t\tconst src = panoramas[panoId - 1];\n\n\t\treturn (\n\t\t\t<DocumentTitle\n\t\t\t\ttitle={`Panorama ${panoId} - Node ${nodeId} - NYC Mesh`}\n\t\t\t>\n\t\t\t\t<div className=\"fixed absolute--fill bg-black flex flex-column items-center justify-center z-max\">\n\t\t\t\t\t<Link to=\"..\" className=\"absolute top-0 left-0 ma3 white\">\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\tclassName=\"db ma0\"\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\twidth=\"24\"\n\t\t\t\t\t\t\theight=\"24\"\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n\t\t\t\t\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</Link>\n\n\t\t\t\t\t<img\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\twindow\n\t\t\t\t\t\t\t\t.open(\n\t\t\t\t\t\t\t\t\t`https://node-db.netlify.com/panoramas/${src}`,\n\t\t\t\t\t\t\t\t\t\"_blank\"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.focus()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName=\"db center mh-100 mw-100 zoom-in\"\n\t\t\t\t\t\tsrc={`https://node-db.netlify.com/panoramas/${src}`}\n\t\t\t\t\t\talt=\"Panorama\"\n\t\t\t\t\t/>\n\t\t\t\t\t{this.renderPreviews()}\n\t\t\t\t</div>\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\trenderPreviews() {\n\t\tconst { match } = this.props;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst { panoramas } = this.state;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"absolute bottom-0 right-0 left-0 flex ph1 pv2 overflow-x-scroll\">\n\t\t\t\t{panoramas.map((panorama, index) => (\n\t\t\t\t\t<Link\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tto={`/nodes/${nodeId}/panoramas/${index + 1}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={`node-image mh1 cover ba bw1 b--white ${\n\t\t\t\t\t\t\t\tindex === panoId - 1 ? \"\" : \"o-30\"\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackgroundImage: `url(\"https://node-db.netlify.com/panoramas/${panorama}\")`\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Link>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tgetPanoramas() {\n\t\tconst { match, nodesById } = this.props;\n\t\tconst { nodeId } = match.params;\n\t\tconst node = nodesById[nodeId];\n\n\t\tif (!node) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst { panoramas } = node;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn panoramas;\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureGallery from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodesById: state.nodesById\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureGallery);\n","import React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { withScriptjs, withGoogleMap, GoogleMap } from \"react-google-maps\";\nimport { withRouter, Route } from \"react-router\";\nimport PropTypes from \"prop-types\";\nimport DocumentTitle from \"react-document-title\";\n\nimport NodeMarker from \"./NodeMarker\";\nimport KioskMarker from \"./KioskMarker\";\nimport LinkLine from \"./LinkLine\";\nimport NodeDetail from \"../NodeDetail\";\nimport Gallery from \"../Gallery\";\n\nimport { mapStyles } from \"./styles\";\n\nconst DEFAULT_ZOOM = 13;\nconst DEFAULT_CENTER = { lat: 40.7031809, lng: -73.9595798 };\n\nconst options = {\n\tstyles: mapStyles,\n\tfullscreenControl: false,\n\tstreetViewControl: false,\n\tzoomControlOptions: {\n\t\tposition: \"9\"\n\t},\n\tmapTypeControlOptions: {\n\t\tposition: \"3\"\n\t},\n\tbackgroundColor: \"#f5f5f5\",\n\tgestureHandling: \"greedy\",\n\tclickableIcons: false\n};\n\nconst MapComponent = withScriptjs(\n\twithGoogleMap(props => (\n\t\t<GoogleMap ref={props.mapRef} {...props}>\n\t\t\t{props.children}\n\t\t</GoogleMap>\n\t))\n);\n\nclass MapView extends Component {\n\tstatic contextTypes = {\n\t\trouter: PropTypes.object\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.map = React.createRef();\n\t\tthis.markerRefs = {};\n\t\tthis.lineRefs = {};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.keyDownHandler = this.handleKeyDown.bind(this);\n\t\twindow.addEventListener(\"keydown\", this.keyDownHandler, false);\n\n\t\tif (this.props.match) {\n\t\t\ttry {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.handleSelectedChange(this.props);\n\t\t\t\t}, 500);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\":(\");\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"keydown\", this.keyDownHandler, false);\n\t}\n\n\t// This is a kinda hacky way to improve performance\n\t// Instead of rerending the entire map, rerender specific nodes\n\tshouldComponentUpdate(nextProps) {\n\t\tif (this.props.nodes !== nextProps.node) {\n\t\t\tthis.handleSelectedChange(nextProps);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\thandleKeyDown(event) {\n\t\tif (event.keyCode === 27) {\n\t\t\tconst { history } = this.context.router;\n\t\t\thistory.push(\"/\");\n\t\t}\n\t}\n\n\thandleSelectedChange(nextProps) {\n\t\t// If selected node is unchanged, do not rerender\n\t\tif (!this.props.match && !nextProps.match) return false;\n\n\t\t// If one was selected but none now selected, reset all nodes\n\t\tif (!nextProps.match) {\n\t\t\tthis.resetAllNodes();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst nextSelectedNodeId = parseInt(nextProps.match.params.nodeId, 10);\n\t\tconst nextSelectedMarker = this.markerRefs[nextSelectedNodeId];\n\n\t\tif (!nextSelectedMarker) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { node: nextSelectedNode } = nextSelectedMarker.props;\n\n\t\tthis.updateNodes(nextSelectedNode, nextSelectedMarker);\n\t\tthis.updateLinks(nextSelectedNode);\n\t\tthis.panToNode(nextSelectedNode);\n\t}\n\n\trender() {\n\t\tconst { history } = this.context.router;\n\t\treturn (\n\t\t\t<MapComponent\n\t\t\t\tmapRef={this.map}\n\t\t\t\tdefaultZoom={DEFAULT_ZOOM}\n\t\t\t\tdefaultCenter={DEFAULT_CENTER}\n\t\t\t\tdefaultOptions={options}\n\t\t\t\tonClick={() => history.push(\"/\")}\n\t\t\t\tloadingElement={<div className=\"h-100\" />}\n\t\t\t\tcontainerElement={<div className=\"h-100\" />}\n\t\t\t\tmapElement={<div className=\"h-100\" />}\n\t\t\t\tgoogleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyBNClp7oJsw-eleEoR3-PQKV23tpeW-FpE\"\n\t\t\t>\n\t\t\t\t{this.renderLinks()}\n\t\t\t\t{this.renderKiosks()}\n\t\t\t\t{this.renderNodes()}\n\t\t\t\t{this.renderNodeDetail()}\n\t\t\t\t<Route\n\t\t\t\t\texact\n\t\t\t\t\tpath=\"/nodes/:nodeId/panoramas/:panoId\"\n\t\t\t\t\tcomponent={Gallery}\n\t\t\t\t/>\n\t\t\t</MapComponent>\n\t\t);\n\t}\n\n\trenderNodes() {\n\t\tconst { nodes } = this.props;\n\t\treturn nodes.map(node => (\n\t\t\t<NodeMarker\n\t\t\t\tkey={node.id}\n\t\t\t\tref={ref => {\n\t\t\t\t\tthis.handleMarkerRef(ref);\n\t\t\t\t}}\n\t\t\t\tnode={node}\n\t\t\t/>\n\t\t));\n\t}\n\n\trenderKiosks() {\n\t\tconst { kiosks } = this.props;\n\t\treturn kiosks.map(kiosk => (\n\t\t\t<KioskMarker key={kiosk.id} kiosk={kiosk} />\n\t\t));\n\t}\n\n\trenderLinks() {\n\t\tconst { links } = this.props;\n\t\treturn links.map((link, index) => (\n\t\t\t<LinkLine\n\t\t\t\tkey={this.linkId(link)}\n\t\t\t\tref={ref => {\n\t\t\t\t\tthis.handleLineRef(ref);\n\t\t\t\t}}\n\t\t\t\tlink={link}\n\t\t\t/>\n\t\t));\n\t}\n\n\tresetAllNodes() {\n\t\tReactDOM.unstable_batchedUpdates(() => {\n\t\t\tObject.values(this.markerRefs).forEach(marker =>\n\t\t\t\tmarker.setVisibility(\"default\")\n\t\t\t);\n\n\t\t\tObject.values(this.lineRefs).forEach(line =>\n\t\t\t\tline.setVisibility(\"default\")\n\t\t\t);\n\t\t});\n\t}\n\trenderNodeDetail() {\n\t\tconst { match } = this.props;\n\t\tif (!match || !match.params) {\n\t\t\treturn null;\n\t\t}\n\t\tconst { nodeId } = match.params;\n\t\treturn (\n\t\t\t<DocumentTitle title={`Node ${nodeId} - NYC Mesh`}>\n\t\t\t\t<NodeDetail nodeId={nodeId} />\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\tupdateNodes(node, marker) {\n\t\tReactDOM.unstable_batchedUpdates(() => {\n\t\t\t// Dim all nodes of same type\n\t\t\tObject.values(this.markerRefs).forEach(marker => {\n\t\t\t\tif (node.status === \"Installed\") {\n\t\t\t\t\tif (node.id !== marker.props.node.id) {\n\t\t\t\t\t\tmarker.setVisibility(\"dim\");\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (marker.props.node.status === \"Installed\") {\n\t\t\t\t\t\tmarker.setVisibility(\"default\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmarker.setVisibility(\"dim\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Highlight directly connected nodes\n\t\t\tnode.connectedNodes &&\n\t\t\t\tnode.connectedNodes.forEach(connectedNodeId => {\n\t\t\t\t\tconst connectedMarker = this.markerRefs[connectedNodeId];\n\t\t\t\t\tif (connectedMarker) {\n\t\t\t\t\t\tconnectedMarker.setVisibility(\"secondary\");\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t// Highlight selected node\n\t\t\tmarker.setVisibility(\"highlight\");\n\t\t});\n\t}\n\n\tupdateLinks(node) {\n\t\t// Dim all links\n\t\tObject.values(this.lineRefs).forEach(line => line.setVisibility(\"dim\"));\n\n\t\t// Highlight direct links\n\t\tif (node.links) {\n\t\t\tnode.links.forEach(link => {\n\t\t\t\tconst line = this.lineRefs[this.linkId(link)];\n\t\t\t\tif (line) {\n\t\t\t\t\tline.setVisibility(\"highlight\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tpanToNode(node) {\n\t\t// TODO: only if out of viewport\n\t\tconst [lng, lat] = node.coordinates;\n\t\tthis.map.current.panTo({ lat, lng });\n\t}\n\n\thandleMarkerRef(ref) {\n\t\tif (ref) {\n\t\t\tthis.markerRefs[ref.props.node.id] = ref;\n\t\t}\n\t}\n\n\thandleLineRef(ref) {\n\t\tif (ref) {\n\t\t\tthis.lineRefs[this.linkId(ref.props.link)] = ref;\n\t\t}\n\t}\n\n\tlinkId(link) {\n\t\treturn `${link.from}-${link.to} ${link.coordinates} ${link.status}`;\n\t}\n}\n\nexport default withRouter(MapView);\n","export const mapStyles = [\n\t{\n\t\telementType: \"labels.icon\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"road\",\n\t\telementType: \"labels.icon\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"road.highway\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"transit\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t}\n];\n","import { connect } from \"react-redux\";\nimport PureMapView from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodes: state.filteredNodes,\n\tlinks: state.filteredLinks,\n\tsectors: state.sectors,\n\tkiosks: state.kiosks,\n\ttickets: state.tickets\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureMapView);\n","import React, { PureComponent } from \"react\";\n\nimport { icons } from \"../NodeName\";\nimport { nodeColors } from \"../../utils\";\n\n// This should be defined elsewhere\nconst labels = [\"active\", \"potential\", \"supernode\", \"hub\", \"linkNYC\"];\n\nexport default class Filters extends PureComponent {\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"bg-white shadow-2\">\n\t\t\t\t<div role=\"group\" className=\"dib pa2\">\n\t\t\t\t\t<div>{labels.map(label => this.renderFilter(label))}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderFilter(label) {\n\t\tconst { filters, statusCounts, toggleFilter } = this.props;\n\t\tconst opacity =\n\t\t\tfilters[label] || filters[label] === undefined\n\t\t\t\t? \"o-100\"\n\t\t\t\t: \"o-50 strike\";\n\t\treturn (\n\t\t\t<div key={label} className={`pointer ${opacity}`}>\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"ma0 mr1 dn\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tid={label}\n\t\t\t\t\tname=\"feature\"\n\t\t\t\t\tvalue={label}\n\t\t\t\t\tdefaultChecked={true}\n\t\t\t\t/>\n\t\t\t\t<label\n\t\t\t\t\thtmlFor={label}\n\t\t\t\t\tstyle={{ color: nodeColors[label] }}\n\t\t\t\t\tclassName=\"ttc pointer flex items-center nowrap\"\n\t\t\t\t\tonClick={() => toggleFilter(label)}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginLeft: \"-0.5rem\",\n\t\t\t\t\t\t\tmarginRight: \"-0.25rem\",\n\t\t\t\t\t\t\tmarginTop: \"-0.125rem\",\n\t\t\t\t\t\t\tmarginBottom: \"-0.125rem\"\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName=\"h2 w2 flex items-center justify-center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{icons[label]}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className=\"ml1\">\n\t\t\t\t\t\t{label.replace(\"-\", \" \")} ({statusCounts[label] || 0})\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureFilters from \"./component\";\n\nimport { toggleFilter } from \"../../actions\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tfilters: state.filters,\n\tstatusCounts: state.statusCounts\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n\ttoggleFilter: label => toggleFilter(label, dispatch)\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PureFilters);\n","export function fetchNodes(dispatch) {\n\tfetch(\"https://node-db.netlify.com/nodes.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_NODES_SUCCESS\", nodes: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function fetchLinks(dispatch) {\n\tfetch(\"https://node-db.netlify.com/links.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_LINKS_SUCCESS\", links: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function fetchKiosks(dispatch) {\n\tfetch(\"https://node-db.netlify.com/kiosks.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_KIOSKS_SUCCESS\", kiosks: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function toggleFilter(label, dispatch) {\n\tdispatch({ type: \"TOGGLE_FILTER\", label });\n}\n","import { nodeStatus } from \"../utils\";\n\nimport nodeData from \"../data/nodes\";\nimport linkData from \"../data/links\";\nimport sectorData from \"../data/sectors\";\nimport kiosks from \"../data/kiosks\";\n\nconst initialFilters = {\n\tpotential: false,\n\tdead: false,\n\t\"potential-hub\": false,\n\t\"potential-supernode\": false\n};\n\nconst { nodes, links, sectors, nodesById } = addGraphData(\n\tnodeData,\n\tlinkData,\n\tsectorData\n);\nconst initialState = {\n\tnodes,\n\tlinks,\n\tsectors,\n\tkiosks,\n\tnodesById,\n\tfilteredNodes: filterNodes(nodes, initialFilters),\n\tfilteredLinks: filterLinks(links, initialFilters),\n\tfilters: initialFilters,\n\tstatusCounts: getCounts(nodes, kiosks)\n};\n\nconst reducer = (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase \"TOGGLE_FILTER\":\n\t\t\tconst newFilters = {\n\t\t\t\t...state.filters,\n\t\t\t\t[action.label]:\n\t\t\t\t\tstate.filters[action.label] === undefined\n\t\t\t\t\t\t? false\n\t\t\t\t\t\t: !state.filters[action.label]\n\t\t\t};\n\t\t\tif (action.label === \"potential\") {\n\t\t\t\tconst hasValue = state.filters[\"potential\"] === undefined;\n\t\t\t\tconst newValue = hasValue ? false : !state.filters[\"potential\"];\n\t\t\t\tnewFilters[\"dead\"] = newValue;\n\t\t\t\tnewFilters[\"potential-hub\"] = newValue;\n\t\t\t\tnewFilters[\"potential-supernode\"] = newValue;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfilters: newFilters,\n\t\t\t\tfilteredNodes: filterNodes(state.nodes, newFilters),\n\t\t\t\tfilteredLinks: filterLinks(state.links, newFilters),\n\t\t\t\tkiosks: newFilters.linkNYC === false ? [] : kiosks\n\t\t\t};\n\t\tcase \"FETCH_NODES_SUCCESS\":\n\t\t\tconst { nodes: newNodes } = addGraphData(action.nodes, state.links);\n\t\t\tconst newStatusCounts = getCounts(action.nodes);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tnodes: newNodes,\n\t\t\t\tfilteredNodes: filterNodes(newNodes, state.filters),\n\t\t\t\tstatusCounts: newStatusCounts\n\t\t\t};\n\t\tcase \"FETCH_LINKS_SUCCESS\":\n\t\t\tconst { links: newLinks } = addGraphData(state.nodes, action.links);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlinks: newLinks,\n\t\t\t\tfilteredLinks: filterLinks(newLinks, state.filters)\n\t\t\t};\n\t\tcase \"FETCH_KIOSKS_SUCCESS\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tkiosks: action.kiosks,\n\t\t\t\tstatusCounts: {\n\t\t\t\t\t...state.statusCounts,\n\t\t\t\t\tlinkNYC: action.kiosks.length\n\t\t\t\t}\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nfunction filterNodes(nodes, filters) {\n\treturn nodes.filter(\n\t\tnode =>\n\t\t\tfilters[nodeStatus(node)] === undefined || filters[nodeStatus(node)]\n\t);\n}\n\nfunction filterLinks(links, filters) {\n\treturn links.filter(link => {\n\t\tif (!link.fromNode || !link.toNode) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (filters[nodeStatus(link.fromNode)] === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (filters[nodeStatus(link.toNode)] === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t});\n}\n\nfunction addGraphData(nodes, links, sectors) {\n\tconst nodesById = {};\n\n\t// Calculate connected nodes for each active node\n\tnodes.filter(node => node.status === \"Installed\").forEach(node => {\n\t\tconst connectedNodes = [node.id];\n\n\t\tlinks.forEach(link => {\n\t\t\tif (link.status !== \"active\") return;\n\t\t\tif (link.from === parseInt(node.id, 10)) {\n\t\t\t\tconnectedNodes.push(link.to);\n\t\t\t}\n\n\t\t\tif (link.to === parseInt(node.id, 10)) {\n\t\t\t\tconnectedNodes.push(link.from);\n\t\t\t}\n\t\t});\n\n\t\tnode.connectedNodes = connectedNodes;\n\t});\n\n\t// Add links to nodes\n\tnodes.forEach(node => {\n\t\tnode.links = links.filter(\n\t\t\tlink =>\n\t\t\t\tlink.status === \"active\" &&\n\t\t\t\t(link.from === parseInt(node.id, 10) ||\n\t\t\t\t\tlink.to === parseInt(node.id, 10))\n\t\t);\n\n\t\tnodesById[node.id] = node;\n\t});\n\n\tlinks.forEach(link => {\n\t\tlink.fromNode = nodesById[link.from];\n\t\tlink.toNode = nodesById[link.to];\n\t});\n\n\t// TODO: Calculate this in node-db\n\t// Add sectors to nodes\n\tconst sectorsByNodeId = {};\n\tsectors.forEach(sector => {\n\t\tsector.node = nodesById[sector.nodeId];\n\t\tsectorsByNodeId[sector.nodeId] = sectorsByNodeId[sector.nodeId] || [];\n\t\tsectorsByNodeId[sector.nodeId].push(sector);\n\t});\n\tnodes.forEach(node => {\n\t\tnode.sectors = sectorsByNodeId[node.id];\n\t});\n\n\treturn { nodes, links, sectors, nodesById };\n}\n\nfunction getCounts(nodes, kiosks) {\n\tconst counts = {};\n\tnodes.forEach(node => {\n\t\tconst status = nodeStatus(node);\n\t\tcounts[status] = (counts[status] || 0) + 1;\n\n\t\tif (status.indexOf(\"potential-\") > -1 || status === \"dead\") {\n\t\t\tcounts[\"potential\"] = (counts[\"potential\"] || 0) + 1;\n\t\t}\n\n\t\tif (status === \"supernode\" || status === \"hub\") {\n\t\t\tcounts[\"active\"] = (counts[\"active\"] || 0) + 1;\n\t\t}\n\t});\n\tcounts.linkNYC = kiosks.length;\n\treturn counts;\n}\n\nexport default reducer;\n","import { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport DocumentTitle from \"react-document-title\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nimport React, { Component } from \"react\";\nimport SearchBar from \"./components/SearchBar\";\nimport MapView from \"./components/MapView\";\nimport Filters from \"./components/Filters\";\n\nimport rootReducer from \"./reducers\";\n\nconst store = createStore(rootReducer);\n\nclass App extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<DocumentTitle title=\"Map - NYC Mesh\">\n\t\t\t\t<Provider store={store}>\n\t\t\t\t\t<Router basename={\"/map\"}>\n\t\t\t\t\t\t<div className=\"h-100 w-100 relative sans-serif\">\n\t\t\t\t\t\t\t<div className=\"absolute pa2 z-999 search-bar\">\n\t\t\t\t\t\t\t\t<SearchBar />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/nodes/:nodeId\"\n\t\t\t\t\t\t\t\tchildren={({ match }) => (\n\t\t\t\t\t\t\t\t\t<MapView match={match} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"absolute bottom-0 left-0 ma2\">\n\t\t\t\t\t\t\t\t<Filters />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Router>\n\t\t\t\t</Provider>\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\thandleNodeClick(node) {}\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nif (process.env.NODE_ENV === \"development\") require(\"tachyons\");\n\nReactDOM.render(<App />, document.getElementById(\"map-root\"));\n"],"sourceRoot":""}