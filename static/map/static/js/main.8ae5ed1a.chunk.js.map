{"version":3,"sources":["utils/index.js","components/NodeName.js","components/SearchBar/NodeRow.js","components/SearchBar/component.js","components/SearchBar/connected.js","components/MapView/NodeMarker.js","components/MapView/KioskMarker.js","components/MapView/LinkLine.js","components/MapView/Sector.js","components/NodeDetail/component.js","components/NodeDetail/connected.js","components/Gallery/component.js","components/Gallery/connected.js","components/MapView/component.js","components/MapView/styles.js","components/MapView/connected.js","components/Filters/component.js","components/Filters/connected.js","actions/index.js","reducers/index.js","App.js","index.js"],"names":["nodeNames","227","570","713","nodeStatus","node","status","notes","panoramas","isActive","isSupernode","toLowerCase","indexOf","isHub","hasPanoramas","length","nodeColors","active","dead","hub","kiosk","linkNYC","potential-hub","potential-supernode","potential","supernode","icons","react_default","a","createElement","xmlns","width","height","cx","cy","r","stroke","strokeWidth","fill","opacity","NodeName","_this$props","this","props","search","className","main_default","highlightClassName","searchWords","autoEscape","textToHighlight","String","id","concat","nodeName","PureComponent","NodeRow","onClick","Link","to","key","NodeName_NodeName","SearchBar","state","filteredNodes","showDropdown","prevProps","prevState","nodes","setState","filterSearch","renderSearchBar","renderList","_this2","refs","focus","viewBox","strokeLinecap","strokeLinejoin","style","minWidth","x1","y1","x2","y2","ref","value","placeholder","spellCheck","autoCorrect","onFocus","onChange","event","target","renderClearButton","_this3","map","NodeRow_NodeRow","iconColor","colorForNode","_this4","Object","toConsumableArray","filter","parseInt","name","location","email","join","sort","b","tickets","connect","ownProps","dispatch","PureSearchBar","NodeMarker","history","context","router","_node$coordinates","slicedToArray","coordinates","lng","lat","_this$getMarkerProps","getMarkerProps","icon","zIndex","lib","defaultPosition","title","options","getOpacity","getZIndex","push","visibility","defaultZIndex","url","anchor","x","y","contextTypes","PropTypes","object","RouterNodeMarker","withRouter","CombinedMarker","assign","KioskMarker","_kiosk$coordinates","LinkLine","link","_link$coordinates","start","end","_start","lng1","lat1","_end","lng2","latlng1","latlng2","_this$getLineProps","getLineProps","strokeColor","strokeOpacity","path","defaultOpacity","radius","azimuth","centerPoint","PRlat","Math","PI","PRlng","cos","PGpoints","lon1","sin","lat2","lon2","theta","gamma","PGlon","PGlat","defaultOptions","fillColor","fillOpacity","clickable","getPixelPositionOffset","NodeDetail","nodeId","nodesById","_coordinates","position","window","google","maps","LatLng","mapPaneName","OverlayView","OVERLAY_MOUSE_TARGET","preventMapHitsFrom","renderImage","renderNotes","version","aria-hidden","fillRule","d","firstPanorama","backgroundImage","Gallery","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","getPanoramas","keyDownHandler","handleKeyDown","bind","addEventListener","removeEventListener","preventDefault","stopPropagation","keyCode","match","_match$params","params","panoId","panoIdInt","nextPanoId","prevPanoId","_match$params2","src","react_document_title_default","open","alt","renderPreviews","_match$params3","panorama","index","PureGallery","styles","elementType","stylers","featureType","fullscreenControl","streetViewControl","zoomControlOptions","mapTypeControlOptions","backgroundColor","gestureHandling","clickableIcons","MapComponent","withScriptjs","withGoogleMap","mapRef","children","MapView","React","createRef","markerRefs","lineRefs","setTimeout","selectedNodeId","selectedMarker","selectedNode","updateNodes","updateLinks","panToNode","e","console","error","nextProps","handleSelectedChange","resetAllNodes","nextSelectedNodeId","nextSelectedMarker","nextSelectedNode","defaultZoom","defaultCenter","loadingElement","containerElement","mapElement","googleMapURL","renderSectors","renderLinks","renderKiosks","renderNodes","renderNodeDetail","es_Route","exact","component","NodeMarker_CombinedMarker","handleMarkerRef","kiosks","KioskMarker_KioskMarker","links","LinkLine_LinkLine","linkId","handleLineRef","sectors","react","sector","_sector$node$coordina","Sector_LinkLine","_this5","ReactDOM","unstable_batchedUpdates","values","forEach","marker","setVisibility","line","NodeDetail_connected","_this6","connectedNodes","connectedNodeId","connectedMarker","_this7","current","panTo","from","Component","filteredLinks","PureMapView","labels","Filters","role","label","renderFilter","filters","statusCounts","toggleFilter","undefined","type","defaultChecked","htmlFor","color","marginLeft","marginRight","marginTop","marginBottom","replace","PureFilters","addGraphData","nodeData","linkData","sectorData","initialState","getCounts","filterNodes","filterLinks","fromNode","toNode","counts","reducer","arguments","action","newFilters","objectSpread","defineProperty","newNodes","newStatusCounts","newLinks","store","createStore","rootReducer","App","es","BrowserRouter","basename","connected","Route","_ref","MapView_connected","Filters_connected","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.8ae5ed1a.chunk.js","sourcesContent":["// Temporary hack\nconst nodeNames = {\n\t227: \"Supernode 1\",\n\t570: \"Supernode 2\",\n\t713: \"Supernode 3\"\n};\n\nexport function nodeName(node) {\n\treturn nodeNames[node.id] || `Node ${node.id}`;\n}\n\nexport function nodeStatus(node) {\n\tconst { status, notes, panoramas } = node;\n\tconst isActive = status === \"Installed\";\n\tconst isSupernode = notes && notes.toLowerCase().indexOf(\"supernode\") > -1;\n\tconst isHub = notes && notes.toLowerCase().indexOf(\"hub\") > -1;\n\tconst hasPanoramas = panoramas && panoramas.length;\n\n\tif (isActive) {\n\t\tif (isSupernode) return \"supernode\";\n\t\tif (isHub) return \"hub\";\n\t\treturn \"active\";\n\t}\n\n\tif (isSupernode) return \"potential-supernode\";\n\tif (isHub) return \"potential-hub\";\n\tif (hasPanoramas) return \"potential\";\n\treturn \"dead\";\n}\n\nexport const nodeColors = {\n\tactive: \"rgb(255,59,48)\",\n\tdead: \"#aaa\",\n\thub: \"rgb(90,200,250)\",\n\tkiosk: \"#01a2eb\",\n\tlinkNYC: \"#01a2eb\",\n\t\"potential-hub\": \"#777\",\n\t\"potential-supernode\": \"#777\",\n\tpotential: \"#777\",\n\tsupernode: \"#007aff\"\n};\n","import React, { PureComponent } from \"react\";\nimport Highlighter from \"react-highlight-words\";\n\nimport { nodeStatus, nodeName } from \"../utils\";\n\nexport const icons = {\n\tdead: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\">\n\t\t\t<circle\n\t\t\t\tcx=\"7\"\n\t\t\t\tcy=\"7\"\n\t\t\t\tr=\"5\"\n\t\t\t\tstroke=\"#fff\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tfill=\"#aaa\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\tpotential: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\">\n\t\t\t<circle\n\t\t\t\tcx=\"8\"\n\t\t\t\tcy=\"8\"\n\t\t\t\tr=\"6\"\n\t\t\t\tstroke=\"#fff\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tfill=\"#777\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\t\"potential-hub\": (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"#777\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"8\"\n\t\t\t\t\tcy=\"10\"\n\t\t\t\t\tcx=\"10\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\t\"potential-supernode\": (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"#777\"\n\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"10\"\n\t\t\t\t\tcy=\"14\"\n\t\t\t\t\tcx=\"14\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\tactive: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\">\n\t\t\t<circle\n\t\t\t\tcx=\"10\"\n\t\t\t\tcy=\"10\"\n\t\t\t\tr=\"8\"\n\t\t\t\tstroke=\"#fff\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tfill=\"rgb(255,59,48)\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\thub: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"rgb(90,200,250)\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"8\"\n\t\t\t\t\tcy=\"10\"\n\t\t\t\t\tcx=\"10\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\tsupernode: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"#007aff\"\n\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"10\"\n\t\t\t\t\tcy=\"14\"\n\t\t\t\t\tcx=\"14\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\tlinkNYC: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\">\n\t\t\t<circle\n\t\t\t\tcx=\"10\"\n\t\t\t\tcy=\"10\"\n\t\t\t\tr=\"3\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\tfill=\"#01a2eb\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t)\n};\n\nexport default class NodeName extends PureComponent {\n\trender() {\n\t\tconst { node, search } = this.props;\n\t\treturn (\n\t\t\t<div className=\"h1 overflow-visible flex justify-start items-center\">\n\t\t\t\t<div className=\"flex items-center justify-center\">\n\t\t\t\t\t{icons[nodeStatus(node)]}\n\t\t\t\t</div>\n\t\t\t\t<span className=\"fw6 black f5 mv0 ml1\">\n\t\t\t\t\t<Highlighter\n\t\t\t\t\t\thighlightClassName=\"bg-light-yellow\"\n\t\t\t\t\t\tsearchWords={[search]}\n\t\t\t\t\t\tautoEscape={true}\n\t\t\t\t\t\ttextToHighlight={String(nodeName(node))}\n\t\t\t\t\t/>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport NodeName from \"../NodeName\";\n\nexport default class NodeRow extends PureComponent {\n\trender() {\n\t\tconst { node, search, onClick } = this.props;\n\t\tconst { id } = node;\n\t\treturn (\n\t\t\t<Link className=\"link\" to={`/nodes/${id}`}>\n\t\t\t\t<div\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName=\"pointer hover-bg-near-white bb b--light-gray pa3\"\n\t\t\t\t>\n\t\t\t\t\t<NodeName node={node} search={search} />\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t);\n\t}\n}\n","import React, { PureComponent } from \"react\";\n\nimport NodeRow from \"./NodeRow\";\n\nexport default class SearchBar extends PureComponent {\n\tstate = {\n\t\tfilteredNodes: [],\n\t\tsearch: \"\",\n\t\tshowDropdown: false\n\t};\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t// Super hacky, do this better\n\t\tif (\n\t\t\tprevState.search === this.state.search &&\n\t\t\tprevProps.nodes !== this.props.nodes\n\t\t) {\n\t\t\tthis.setState({\n\t\t\t\tfilteredNodes: this.filterSearch(this.state.search)\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"w-100 shadow-2\">\n\t\t\t\t{this.renderSearchBar()}\n\t\t\t\t{this.renderList()}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderSearchBar() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"flex items-center bg-white overflow-hidden\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.refs.search.focus();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\twidth=\"20\"\n\t\t\t\t\theight=\"20\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tstroke=\"#aaa\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\tclassName=\"ml3 db\"\n\t\t\t\t\tstyle={{ minWidth: 20 }}\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"11\" cy=\"11\" r=\"8\" />\n\t\t\t\t\t<line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\n\t\t\t\t</svg>\n\t\t\t\t<input\n\t\t\t\t\tref=\"search\"\n\t\t\t\t\tclassName=\"overflow-hidden pl2 pr3 pv3 input-reset f5 fw4 bw0 w-100 on\"\n\t\t\t\t\tvalue={this.state.search}\n\t\t\t\t\tplaceholder=\"Search nodes\"\n\t\t\t\t\tspellCheck={false}\n\t\t\t\t\tautoCorrect=\"false\"\n\t\t\t\t\tonFocus={() => this.setState({ showDropdown: true })}\n\t\t\t\t\tonChange={event =>\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tsearch: event.target.value,\n\t\t\t\t\t\t\tfilteredNodes: this.filterSearch(event.target.value)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{this.renderClearButton()}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderList() {\n\t\tif (!this.state.filteredNodes.length || !this.state.showDropdown) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { search } = this.state;\n\t\treturn (\n\t\t\t<div className=\"bg-white bt b--light-gray max-h-5-rows overflow-y-scroll\">\n\t\t\t\t{this.state.filteredNodes.map(node => (\n\t\t\t\t\t<NodeRow\n\t\t\t\t\t\tkey={node.id}\n\t\t\t\t\t\tnode={node}\n\t\t\t\t\t\tsearch={search}\n\t\t\t\t\t\ticonColor={this.colorForNode(node)}\n\t\t\t\t\t\tonClick={() => this.setState({ showDropdown: false })}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderClearButton() {\n\t\tconst { search } = this.state;\n\n\t\tif (!search || !search.length) {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"mr3\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: 20,\n\t\t\t\t\t\theight: 20\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tsearch: \"\",\n\t\t\t\t\t\tfilteredNodes: []\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tclassName=\"on btn bn pa0 bg-white pointer mr3 silver\"\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\twidth=\"20\"\n\t\t\t\t\theight=\"20\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\tclassName=\"db\"\n\t\t\t\t>\n\t\t\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n\t\t\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t);\n\t}\n\n\tfilterSearch(search) {\n\t\tconst { nodes } = this.props;\n\t\tif (!search) {\n\t\t\treturn [];\n\t\t}\n\t\treturn [\n\t\t\t...nodes.filter(node => node.id === parseInt(search, 10)),\n\t\t\t...nodes\n\t\t\t\t.filter(\n\t\t\t\t\tnode =>\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tnode.name,\n\t\t\t\t\t\t\tnode.location,\n\t\t\t\t\t\t\tnode.notes,\n\t\t\t\t\t\t\tnode.status,\n\t\t\t\t\t\t\tnode.email\n\t\t\t\t\t\t]\n\t\t\t\t\t\t\t.join(\" \")\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.indexOf(search.toLowerCase()) > -1\n\t\t\t\t)\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tif (a.status !== b.status) {\n\t\t\t\t\t\tif (a.status === \"Installed\") return -1;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn a.id - b.id;\n\t\t\t\t})\n\t\t];\n\t}\n\n\tcolorForNode(node) {\n\t\tconst { status, tickets } = node;\n\t\treturn status === \"Installed\"\n\t\t\t? \"rgb(255,59,48)\"\n\t\t\t: tickets && tickets.length > 2\n\t\t\t\t? \"rgb(255,204,0)\"\n\t\t\t\t: \"gray\";\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureSearchBar from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodes: state.nodes,\n\ttickets: state.tickets\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PureSearchBar);\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Marker } from \"react-google-maps\";\nimport { withRouter } from \"react-router\";\n\nimport { nodeStatus } from \"../../utils\";\n\nclass NodeMarker extends PureComponent {\n\tstatic contextTypes = {\n\t\trouter: PropTypes.object\n\t};\n\n\trender() {\n\t\tconst { node } = this.props;\n\t\tconst { history } = this.context.router;\n\t\tconst { id, notes } = node;\n\t\tconst [lng, lat] = node.coordinates;\n\t\tconst { icon, zIndex } = this.getMarkerProps();\n\n\t\treturn (\n\t\t\t<Marker\n\t\t\t\tdefaultPosition={{ lat, lng }}\n\t\t\t\ticon={icon}\n\t\t\t\ttitle={`${id}${notes ? ` - ${notes}` : \"\"}`}\n\t\t\t\toptions={{ opacity: this.getOpacity() }}\n\t\t\t\tzIndex={this.getZIndex(zIndex)}\n\t\t\t\tonClick={() => history.push(`/nodes/${id}`)}\n\t\t\t/>\n\t\t);\n\t}\n\n\tgetOpacity() {\n\t\tconst { visibility } = this.props;\n\t\tif (visibility === \"highlight\") return 1;\n\t\tif (visibility === \"dim\") return 0.25;\n\t\treturn 1;\n\t}\n\n\tgetZIndex(defaultZIndex) {\n\t\tconst { visibility } = this.props;\n\t\tif (visibility === \"highlight\") return 999;\n\t\treturn defaultZIndex;\n\t}\n\n\tgetMarkerProps() {\n\t\tconst { node } = this.props;\n\n\t\tconst status = nodeStatus(node);\n\n\t\tif (status === \"supernode\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/supernode.svg\",\n\t\t\t\t\tanchor: { x: 14, y: 14 }\n\t\t\t\t},\n\t\t\t\tzIndex: 100\n\t\t\t};\n\n\t\tif (status === \"hub\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/hub.svg\",\n\t\t\t\t\tanchor: { x: 10, y: 10 }\n\t\t\t\t},\n\t\t\t\tzIndex: 99\n\t\t\t};\n\n\t\tif (status === \"active\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/active.svg\",\n\t\t\t\t\tanchor: { x: 10, y: 10 }\n\t\t\t\t},\n\t\t\t\tzIndex: 98\n\t\t\t};\n\n\t\tif (status === \"potential-supernode\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential-supernode.svg\",\n\t\t\t\t\tanchor: { x: 14, y: 14 }\n\t\t\t\t},\n\t\t\t\tzIndex: 89\n\t\t\t};\n\n\t\tif (status === \"potential-hub\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential-hub.svg\",\n\t\t\t\t\tanchor: { x: 10, y: 10 }\n\t\t\t\t},\n\t\t\t\tzIndex: 88\n\t\t\t};\n\n\t\tif (status === \"potential\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential.svg\",\n\t\t\t\t\tanchor: { x: 8, y: 8 }\n\t\t\t\t},\n\t\t\t\tzIndex: 87\n\t\t\t};\n\n\t\treturn {\n\t\t\ticon: {\n\t\t\t\turl: \"/img/map/dead.svg\",\n\t\t\t\tanchor: { x: 7, y: 7 }\n\t\t\t},\n\t\t\tzIndex: 86\n\t\t};\n\t}\n}\n\nconst RouterNodeMarker = withRouter(NodeMarker);\n\nexport default class CombinedMarker extends PureComponent {\n\tstate = {\n\t\tvisibility: \"default\"\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<RouterNodeMarker\n\t\t\t\t{...this.props}\n\t\t\t\tvisibility={this.state.visibility}\n\t\t\t/>\n\t\t);\n\t}\n\n\tsetVisibility(visibility) {\n\t\tthis.setState({ visibility });\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Marker } from \"react-google-maps\";\n\nexport default class KioskMarker extends PureComponent {\n\trender() {\n\t\tconst { kiosk } = this.props;\n\t\tconst [lng, lat] = kiosk.coordinates;\n\t\tconst icon = {\n\t\t\turl: \"/img/map/kiosk.svg\",\n\t\t\tanchor: { x: 5, y: 5 }\n\t\t};\n\t\treturn <Marker defaultPosition={{ lat, lng }} icon={icon} zIndex={1} />;\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Polyline } from \"react-google-maps\";\n\nexport default class LinkLine extends PureComponent {\n\tstate = {\n\t\tvisibility: \"default\"\n\t};\n\n\trender() {\n\t\tconst { link } = this.props;\n\n\t\tconst [start, end] = link.coordinates;\n\t\tconst [lng1, lat1] = start;\n\t\tconst [lng2, lat2] = end;\n\t\tconst latlng1 = { lat: lat1, lng: lng1 };\n\t\tconst latlng2 = { lat: lat2, lng: lng2 };\n\n\t\tconst { strokeColor, strokeOpacity, zIndex } = this.getLineProps();\n\n\t\treturn (\n\t\t\t<Polyline\n\t\t\t\tpath={[latlng1, latlng2]}\n\t\t\t\toptions={{\n\t\t\t\t\tstrokeColor,\n\t\t\t\t\tstrokeOpacity: this.getOpacity(strokeOpacity)\n\t\t\t\t}}\n\t\t\t\tzIndex={this.getZIndex(zIndex)}\n\t\t\t/>\n\t\t);\n\t}\n\n\tgetOpacity(defaultOpacity) {\n\t\tconst { visibility } = this.state;\n\t\tif (visibility === \"highlight\") return 1;\n\t\tif (visibility === \"dim\") return defaultOpacity * 0.25;\n\t\treturn defaultOpacity;\n\t}\n\n\tgetZIndex(defaultZIndex) {\n\t\tconst { visibility } = this.state;\n\t\tif (visibility === \"highlight\") return 60;\n\t\treturn defaultZIndex;\n\t}\n\n\tsetVisibility(visibility) {\n\t\tthis.setState({ visibility });\n\t}\n\n\tgetLineProps() {\n\t\tconst { link } = this.props;\n\t\tconst { status } = link;\n\n\t\tif (status === \"active\")\n\t\t\treturn {\n\t\t\t\tstrokeColor: \"#007aff\",\n\t\t\t\tstrokeOpacity: 1,\n\t\t\t\tzIndex: 50\n\t\t\t};\n\n\t\treturn {\n\t\t\tstrokeColor: \"#aaa\",\n\t\t\tstrokeOpacity: 0.25,\n\t\t\tzIndex: 50\n\t\t};\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Polygon } from \"react-google-maps\";\n\nexport default class LinkLine extends PureComponent {\n\trender() {\n\t\tconst { lat, lng, radius, azimuth, width, active } = this.props;\n\t\tvar centerPoint = { lat, lng };\n\t\tvar PRlat = (radius / 3963) * (180 / Math.PI); // using 3963 miles as earth's radius\n\t\tvar PRlng = PRlat / Math.cos(lat * (Math.PI / 180));\n\t\tvar PGpoints = [];\n\t\tPGpoints.push(centerPoint);\n\n\t\tconst lat1 =\n\t\t\tlat + PRlat * Math.cos((Math.PI / 180) * (azimuth - width / 2));\n\t\tconst lon1 =\n\t\t\tlng + PRlng * Math.sin((Math.PI / 180) * (azimuth - width / 2));\n\t\tPGpoints.push({ lat: lat1, lng: lon1 });\n\n\t\tconst lat2 =\n\t\t\tlat + PRlat * Math.cos((Math.PI / 180) * (azimuth + width / 2));\n\t\tconst lon2 =\n\t\t\tlng + PRlng * Math.sin((Math.PI / 180) * (azimuth + width / 2));\n\n\t\tvar theta = 0;\n\t\tvar gamma = (Math.PI / 180) * (azimuth + width / 2);\n\n\t\tfor (var a = 1; theta < gamma; a++) {\n\t\t\ttheta = (Math.PI / 180) * (azimuth - width / 2 + a);\n\t\t\tconst PGlon = lng + PRlng * Math.sin(theta);\n\t\t\tconst PGlat = lat + PRlat * Math.cos(theta);\n\n\t\t\tPGpoints.push({ lat: PGlat, lng: PGlon });\n\t\t}\n\n\t\tPGpoints.push({ lat: lat2, lng: lon2 });\n\t\tPGpoints.push(centerPoint);\n\n\t\tconst fillOpacity = 0.15;\n\n\t\treturn (\n\t\t\t<Polygon\n\t\t\t\tpath={PGpoints}\n\t\t\t\tdefaultOptions={{\n\t\t\t\t\tstrokeColor: \"transparent\",\n\t\t\t\t\tstrokeOpacity: 0,\n\t\t\t\t\tstrokeWidth: 0,\n\t\t\t\t\tfillColor: active ? \"#007aff\" : \"#777\",\n\t\t\t\t\tfillOpacity,\n\t\t\t\t\tclickable: false\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { OverlayView } from \"react-google-maps\";\nimport { Link } from \"react-router-dom\";\n\nconst getPixelPositionOffset = (width, height) => ({\n\tx: -width / 2,\n\ty: -height\n});\n\nexport default class NodeDetail extends PureComponent {\n\trender() {\n\t\tconst { nodeId, nodesById } = this.props;\n\t\tconst node = nodesById[nodeId];\n\t\tif (!node) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { coordinates } = node;\n\t\tconst [lng, lat] = coordinates;\n\n\t\treturn (\n\t\t\t<OverlayView\n\t\t\t\tposition={new window.google.maps.LatLng(lat, lng)}\n\t\t\t\tmapPaneName={OverlayView.OVERLAY_MOUSE_TARGET}\n\t\t\t\tgetPixelPositionOffset={getPixelPositionOffset}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tref={ref =>\n\t\t\t\t\t\tref &&\n\t\t\t\t\t\twindow.google.maps.OverlayView.preventMapHitsFrom(ref)\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"flex flex-column items-center\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex items-center bg-white br2 overflow-hidden shadow-2\">\n\t\t\t\t\t\t{this.renderImage(node)}\n\t\t\t\t\t\t<div className=\"pv1 ph2 flex flex-column justify-end\">\n\t\t\t\t\t\t\t<span className=\"f5 fw6 nowrap sans-serif\">\n\t\t\t\t\t\t\t\tNode {node.id}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{this.renderNotes(node)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<svg\n\t\t\t\t\t\tviewBox=\"0 5 12 12\"\n\t\t\t\t\t\tversion=\"1.1\"\n\t\t\t\t\t\twidth=\"12\"\n\t\t\t\t\t\theight=\"12\"\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\tfill=\"white\"\n\t\t\t\t\t\t\td=\"M0 5l6 6 6-6H0z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</OverlayView>\n\t\t);\n\t}\n\n\trenderImage(node) {\n\t\tconst { id, panoramas } = node;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn null;\n\t\t}\n\t\tconst [firstPanorama] = panoramas;\n\t\treturn (\n\t\t\t<Link to={`/nodes/${id}/panoramas/1`} className=\"db node-image\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"h-100 w-100 cover bg-center bg-near-white\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundImage: `url(\"https://node-db.netlify.com/panoramas/${firstPanorama}\")`\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Link>\n\t\t);\n\t}\n\n\trenderNotes(node) {\n\t\tconst { notes } = node;\n\t\tif (!notes) {\n\t\t\treturn null;\n\t\t}\n\t\treturn <span className=\"mv0 f7 gray truncate sans-serif\">{notes}</span>;\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureComponent from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodesById: state.nodesById\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureComponent);\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport DocumentTitle from \"react-document-title\";\n\nexport default class Gallery extends PureComponent {\n\tstatic contextTypes = {\n\t\trouter: PropTypes.object\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpanoramas: this.getPanoramas()\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.keyDownHandler = this.handleKeyDown.bind(this);\n\t\twindow.addEventListener(\"keydown\", this.keyDownHandler, true);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"keydown\", this.keyDownHandler, true);\n\t}\n\n\thandleKeyDown(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tconst { keyCode } = event;\n\t\tconst { match } = this.props;\n\t\tconst { panoramas } = this.state;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst { history } = this.context.router;\n\t\tconst panoIdInt = parseInt(panoId);\n\t\tif (keyCode === 27) {\n\t\t\thistory.push(`/nodes/${nodeId}`);\n\t\t} else if (keyCode === 39) {\n\t\t\tconst nextPanoId = panoIdInt < panoramas.length ? panoIdInt + 1 : 1;\n\t\t\thistory.push(`/nodes/${nodeId}/panoramas/${nextPanoId}`);\n\t\t} else if (keyCode === 37) {\n\t\t\tconst prevPanoId = panoId > 1 ? panoIdInt - 1 : panoramas.length;\n\t\t\thistory.push(`/nodes/${nodeId}/panoramas/${prevPanoId}`);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { match } = this.props;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst { panoramas } = this.state;\n\t\tconst src = panoramas[panoId - 1];\n\n\t\treturn (\n\t\t\t<DocumentTitle\n\t\t\t\ttitle={`Panorama ${panoId} - Node ${nodeId} - NYC Mesh`}\n\t\t\t>\n\t\t\t\t<div className=\"fixed absolute--fill bg-black flex flex-column items-center justify-center z-max\">\n\t\t\t\t\t<Link to=\"..\" className=\"absolute top-0 left-0 ma3 white\">\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\tclassName=\"db ma0\"\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\twidth=\"24\"\n\t\t\t\t\t\t\theight=\"24\"\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n\t\t\t\t\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</Link>\n\n\t\t\t\t\t<img\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\twindow\n\t\t\t\t\t\t\t\t.open(\n\t\t\t\t\t\t\t\t\t`https://node-db.netlify.com/panoramas/${src}`,\n\t\t\t\t\t\t\t\t\t\"_blank\"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.focus()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName=\"db center mh-100 mw-100 zoom-in\"\n\t\t\t\t\t\tsrc={`https://node-db.netlify.com/panoramas/${src}`}\n\t\t\t\t\t\talt=\"Panorama\"\n\t\t\t\t\t/>\n\t\t\t\t\t{this.renderPreviews()}\n\t\t\t\t</div>\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\trenderPreviews() {\n\t\tconst { match } = this.props;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst { panoramas } = this.state;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"absolute bottom-0 right-0 left-0 flex ph1 pv2 overflow-x-scroll\">\n\t\t\t\t{panoramas.map((panorama, index) => (\n\t\t\t\t\t<Link to={`/nodes/${nodeId}/panoramas/${index + 1}`}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={`node-image mh1 cover ba bw1 b--white ${\n\t\t\t\t\t\t\t\tindex === panoId - 1 ? \"\" : \"o-30\"\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackgroundImage: `url(\"https://node-db.netlify.com/panoramas/${panorama}\")`\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Link>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tgetPanoramas() {\n\t\tconst { match, nodesById } = this.props;\n\t\tconst { nodeId } = match.params;\n\t\tconst node = nodesById[nodeId];\n\n\t\tif (!node) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst { panoramas } = node;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn panoramas;\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureGallery from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodesById: state.nodesById\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureGallery);\n","import React, { Component, Fragment } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { withScriptjs, withGoogleMap, GoogleMap } from \"react-google-maps\";\nimport { withRouter, Route } from \"react-router\";\nimport PropTypes from \"prop-types\";\nimport DocumentTitle from \"react-document-title\";\n\nimport NodeMarker from \"./NodeMarker\";\nimport KioskMarker from \"./KioskMarker\";\nimport LinkLine from \"./LinkLine\";\nimport Sector from \"./Sector\";\nimport NodeDetail from \"../NodeDetail\";\nimport Gallery from \"../Gallery\";\n\nimport { mapStyles } from \"./styles\";\n\nconst options = {\n\tstyles: mapStyles,\n\tfullscreenControl: false,\n\tstreetViewControl: false,\n\tzoomControlOptions: {\n\t\tposition: \"9\"\n\t},\n\tmapTypeControlOptions: {\n\t\tposition: \"3\"\n\t},\n\tbackgroundColor: \"#f5f5f5\",\n\tgestureHandling: \"greedy\",\n\tclickableIcons: false\n};\n\nconst MapComponent = withScriptjs(\n\twithGoogleMap(props => (\n\t\t<GoogleMap ref={props.mapRef} {...props}>\n\t\t\t{props.children}\n\t\t</GoogleMap>\n\t))\n);\n\nclass MapView extends Component {\n\tstatic contextTypes = {\n\t\trouter: PropTypes.object\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.map = React.createRef();\n\t\tthis.markerRefs = {};\n\t\tthis.lineRefs = {};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.keyDownHandler = this.handleKeyDown.bind(this);\n\t\twindow.addEventListener(\"keydown\", this.keyDownHandler, false);\n\n\t\tif (this.props.match) {\n\t\t\ttry {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (!this.props.match) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst selectedNodeId = parseInt(\n\t\t\t\t\t\tthis.props.match.params.nodeId,\n\t\t\t\t\t\t10\n\t\t\t\t\t);\n\t\t\t\t\tconst selectedMarker = this.markerRefs[selectedNodeId];\n\t\t\t\t\tif (!selectedMarker) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst { node: selectedNode } = selectedMarker.props;\n\t\t\t\t\tthis.updateNodes(selectedNode, selectedMarker);\n\t\t\t\t\tthis.updateLinks(selectedNode);\n\t\t\t\t\tthis.panToNode(selectedNode);\n\t\t\t\t}, 500);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\":(\");\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"keydown\", this.keyDownHandler, false);\n\t}\n\n\t// This is a kinda hacky way to improve performance\n\t// Instead of rerending the entire map, rerender specific nodes\n\tshouldComponentUpdate(nextProps) {\n\t\tif (this.props.nodes !== nextProps.node) {\n\t\t\tthis.handleSelectedChange(nextProps);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\thandleKeyDown(event) {\n\t\tif (event.keyCode === 27) {\n\t\t\tconst { history } = this.context.router;\n\t\t\thistory.push(\"/\");\n\t\t}\n\t}\n\n\thandleSelectedChange(nextProps) {\n\t\t// If selected node is unchanged, do not rerender\n\t\tif (!this.props.match && !nextProps.match) return false;\n\n\t\t// If one was selected but none now selected, reset all nodes\n\t\tif (!nextProps.match) {\n\t\t\tthis.resetAllNodes();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst nextSelectedNodeId = parseInt(nextProps.match.params.nodeId, 10);\n\t\tconst nextSelectedMarker = this.markerRefs[nextSelectedNodeId];\n\n\t\tif (!nextSelectedMarker) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { node: nextSelectedNode } = nextSelectedMarker.props;\n\n\t\tthis.updateNodes(nextSelectedNode, nextSelectedMarker);\n\t\tthis.updateLinks(nextSelectedNode);\n\t\tthis.panToNode(nextSelectedNode);\n\t}\n\n\trender() {\n\t\tconst { history } = this.context.router;\n\t\treturn (\n\t\t\t<MapComponent\n\t\t\t\tmapRef={this.map}\n\t\t\t\tdefaultZoom={13}\n\t\t\t\tdefaultCenter={{ lat: 40.7101809, lng: -73.9595798 }}\n\t\t\t\tdefaultOptions={options}\n\t\t\t\tonClick={() => history.push(\"/\")}\n\t\t\t\tloadingElement={<div className=\"h-100\" />}\n\t\t\t\tcontainerElement={<div className=\"h-100\" />}\n\t\t\t\tmapElement={<div className=\"h-100\" />}\n\t\t\t\tgoogleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyBNClp7oJsw-eleEoR3-PQKV23tpeW-FpE\"\n\t\t\t>\n\t\t\t\t{this.renderSectors()}\n\t\t\t\t{this.renderLinks()}\n\t\t\t\t{this.renderKiosks()}\n\t\t\t\t{this.renderNodes()}\n\t\t\t\t{this.renderNodeDetail()}\n\t\t\t\t<Route\n\t\t\t\t\texact\n\t\t\t\t\tpath=\"/nodes/:nodeId/panoramas/:panoId\"\n\t\t\t\t\tcomponent={Gallery}\n\t\t\t\t/>\n\t\t\t</MapComponent>\n\t\t);\n\t}\n\n\trenderNodes() {\n\t\tconst { nodes } = this.props;\n\t\treturn nodes.map(node => (\n\t\t\t<NodeMarker\n\t\t\t\tkey={node.id}\n\t\t\t\tref={ref => {\n\t\t\t\t\tthis.handleMarkerRef(ref);\n\t\t\t\t}}\n\t\t\t\tnode={node}\n\t\t\t/>\n\t\t));\n\t}\n\n\trenderKiosks() {\n\t\tconst { kiosks } = this.props;\n\t\treturn kiosks.map(kiosk => (\n\t\t\t<KioskMarker key={kiosk.id} kiosk={kiosk} />\n\t\t));\n\t}\n\n\trenderLinks() {\n\t\tconst { links } = this.props;\n\t\treturn links.map((link, index) => (\n\t\t\t<LinkLine\n\t\t\t\tkey={this.linkId(link)}\n\t\t\t\tref={ref => {\n\t\t\t\t\tthis.handleLineRef(ref);\n\t\t\t\t}}\n\t\t\t\tlink={link}\n\t\t\t/>\n\t\t));\n\t}\n\n\trenderSectors() {\n\t\tconst { sectors } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{sectors.map(sector => {\n\t\t\t\t\tconst [lng, lat] = sector.node.coordinates;\n\t\t\t\t\tconst { radius, azimuth, width, active } = sector;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Sector\n\t\t\t\t\t\t\tkey={lat + lng + radius + azimuth + width}\n\t\t\t\t\t\t\tlat={lat}\n\t\t\t\t\t\t\tlng={lng}\n\t\t\t\t\t\t\tradius={radius}\n\t\t\t\t\t\t\tazimuth={azimuth}\n\t\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\t\tactive={active}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\tresetAllNodes() {\n\t\tReactDOM.unstable_batchedUpdates(() => {\n\t\t\tObject.values(this.markerRefs).forEach(marker =>\n\t\t\t\tmarker.setVisibility(\"default\")\n\t\t\t);\n\n\t\t\tObject.values(this.lineRefs).forEach(line =>\n\t\t\t\tline.setVisibility(\"default\")\n\t\t\t);\n\t\t});\n\t}\n\trenderNodeDetail() {\n\t\tconst { match } = this.props;\n\t\tif (!match || !match.params) {\n\t\t\treturn null;\n\t\t}\n\t\tconst { nodeId } = match.params;\n\t\treturn (\n\t\t\t<DocumentTitle title={`Node ${nodeId} - NYC Mesh`}>\n\t\t\t\t<NodeDetail nodeId={nodeId} />\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\tupdateNodes(node, marker) {\n\t\tReactDOM.unstable_batchedUpdates(() => {\n\t\t\t// Dim all nodes of same type\n\n\t\t\t// TODO: optimize performance by only resetting selected nodes\n\t\t\t// (selected node and all nodes of opposite type)\n\t\t\tObject.values(this.markerRefs).forEach(marker => {\n\t\t\t\tif (node.status === \"Installed\") {\n\t\t\t\t\tif (node.id !== marker.props.node.id) {\n\t\t\t\t\t\tmarker.setVisibility(\"dim\");\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (marker.props.node.status === \"Installed\") {\n\t\t\t\t\t\tmarker.setVisibility(\"default\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmarker.setVisibility(\"dim\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Highlight selected node\n\t\t\tmarker.setVisibility(\"highlight\");\n\n\t\t\t// Highlight directly connected nodes\n\t\t\tnode.connectedNodes &&\n\t\t\t\tnode.connectedNodes.forEach(connectedNodeId => {\n\t\t\t\t\tconst connectedMarker = this.markerRefs[connectedNodeId];\n\t\t\t\t\tif (connectedMarker) {\n\t\t\t\t\t\tconnectedMarker.setVisibility(\"highlight\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t});\n\t}\n\n\tupdateLinks(node) {\n\t\t// Dim all links\n\t\tObject.values(this.lineRefs).forEach(line => line.setVisibility(\"dim\"));\n\n\t\t// Highlight direct links\n\t\tif (node.links) {\n\t\t\tnode.links.forEach(link => {\n\t\t\t\tconst line = this.lineRefs[this.linkId(link)];\n\t\t\t\tif (line) {\n\t\t\t\t\tline.setVisibility(\"highlight\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tpanToNode(node) {\n\t\t// TODO: only if out of viewport\n\t\tconst [lng, lat] = node.coordinates;\n\t\tthis.map.current.panTo({ lat, lng });\n\t}\n\n\thandleMarkerRef(ref) {\n\t\tif (ref) {\n\t\t\tthis.markerRefs[ref.props.node.id] = ref;\n\t\t}\n\t}\n\n\thandleLineRef(ref) {\n\t\tif (ref) {\n\t\t\tthis.lineRefs[this.linkId(ref.props.link)] = ref;\n\t\t}\n\t}\n\n\tlinkId(link) {\n\t\treturn `${link.from}-${link.to} ${link.coordinates} ${link.status}`;\n\t}\n}\n\nexport default withRouter(MapView);\n","export const mapStyles = [\n\t{\n\t\telementType: \"labels.icon\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"road\",\n\t\telementType: \"labels.icon\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"road.highway\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"transit\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t}\n];\n","import { connect } from \"react-redux\";\nimport PureMapView from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodes: state.filteredNodes,\n\tlinks: state.filteredLinks,\n\tsectors: state.sectors,\n\tkiosks: state.kiosks,\n\ttickets: state.tickets\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureMapView);\n","import React, { PureComponent } from \"react\";\n\nimport { icons } from \"../NodeName\";\nimport { nodeColors } from \"../../utils\";\n\n// This should be defined elsewhere\nconst labels = [\"active\", \"potential\", \"supernode\", \"hub\", \"linkNYC\"];\n\nexport default class Filters extends PureComponent {\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"bg-white shadow-2\">\n\t\t\t\t<div role=\"group\" className=\"dib pa2\">\n\t\t\t\t\t<div>{labels.map(label => this.renderFilter(label))}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderFilter(label) {\n\t\tconst { filters, statusCounts, toggleFilter } = this.props;\n\t\tconst opacity =\n\t\t\tfilters[label] || filters[label] === undefined\n\t\t\t\t? \"o-100\"\n\t\t\t\t: \"o-50 strike\";\n\t\treturn (\n\t\t\t<div key={label} className={`pointer ${opacity}`}>\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"ma0 mr1 dn\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tid={label}\n\t\t\t\t\tname=\"feature\"\n\t\t\t\t\tvalue={label}\n\t\t\t\t\tdefaultChecked={true}\n\t\t\t\t/>\n\t\t\t\t<label\n\t\t\t\t\thtmlFor={label}\n\t\t\t\t\tstyle={{ color: nodeColors[label] }}\n\t\t\t\t\tclassName=\"ttc pointer flex items-center nowrap\"\n\t\t\t\t\tonClick={() => toggleFilter(label)}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginLeft: \"-0.5rem\",\n\t\t\t\t\t\t\tmarginRight: \"-0.25rem\",\n\t\t\t\t\t\t\tmarginTop: \"-0.125rem\",\n\t\t\t\t\t\t\tmarginBottom: \"-0.125rem\"\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName=\"h2 w2 flex items-center justify-center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{icons[label]}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className=\"ml1\">\n\t\t\t\t\t\t{label.replace(\"-\", \" \")} ({statusCounts[label] || 0})\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureFilters from \"./component\";\n\nimport { toggleFilter } from \"../../actions\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tfilters: state.filters,\n\tstatusCounts: state.statusCounts\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n\ttoggleFilter: label => toggleFilter(label, dispatch)\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PureFilters);\n","export function fetchNodes(dispatch) {\n\tfetch(\"https://node-db.netlify.com/nodes.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_NODES_SUCCESS\", nodes: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function fetchLinks(dispatch) {\n\tfetch(\"https://node-db.netlify.com/links.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_LINKS_SUCCESS\", links: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function fetchKiosks(dispatch) {\n\tfetch(\"https://node-db.netlify.com/kiosks.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_KIOSKS_SUCCESS\", kiosks: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function toggleFilter(label, dispatch) {\n\tdispatch({ type: \"TOGGLE_FILTER\", label });\n}\n","import { nodeStatus } from \"../utils\";\n\nimport nodeData from \"../data/nodes\";\nimport linkData from \"../data/links\";\nimport sectorData from \"../data/sectors\";\nimport kiosks from \"../data/kiosks\";\n\nconst initialFilters = {};\n\nconst { nodes, links, sectors, nodesById } = addGraphData(\n\tnodeData,\n\tlinkData,\n\tsectorData\n);\nconst initialState = {\n\tnodes,\n\tlinks,\n\tsectors,\n\tkiosks,\n\tnodesById,\n\tfilteredNodes: nodes,\n\tfilteredLinks: links,\n\tfilters: initialFilters,\n\tstatusCounts: getCounts(nodes, kiosks)\n};\n\nconst reducer = (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase \"TOGGLE_FILTER\":\n\t\t\tconst newFilters = {\n\t\t\t\t...state.filters,\n\t\t\t\t[action.label]:\n\t\t\t\t\tstate.filters[action.label] === undefined\n\t\t\t\t\t\t? false\n\t\t\t\t\t\t: !state.filters[action.label]\n\t\t\t};\n\t\t\tif (action.label === \"potential\") {\n\t\t\t\tnewFilters[\"dead\"] =\n\t\t\t\t\tstate.filters[\"dead\"] === undefined\n\t\t\t\t\t\t? false\n\t\t\t\t\t\t: !state.filters[\"dead\"];\n\t\t\t\tnewFilters[\"potential-hub\"] =\n\t\t\t\t\tstate.filters[\"potential-hub\"] === undefined\n\t\t\t\t\t\t? false\n\t\t\t\t\t\t: !state.filters[\"potential-hub\"];\n\t\t\t\tnewFilters[\"potential-supernode\"] =\n\t\t\t\t\tstate.filters[\"potential-supernode\"] === undefined\n\t\t\t\t\t\t? false\n\t\t\t\t\t\t: !state.filters[\"potential-supernode\"];\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfilters: newFilters,\n\t\t\t\tfilteredNodes: filterNodes(state.nodes, newFilters),\n\t\t\t\tfilteredLinks: filterLinks(state.links, newFilters),\n\t\t\t\tkiosks: newFilters.linkNYC === false ? [] : kiosks\n\t\t\t};\n\t\tcase \"FETCH_NODES_SUCCESS\":\n\t\t\tconst { nodes: newNodes } = addGraphData(action.nodes, state.links);\n\t\t\tconst newStatusCounts = getCounts(action.nodes);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tnodes: newNodes,\n\t\t\t\tfilteredNodes: filterNodes(newNodes, state.filters),\n\t\t\t\tstatusCounts: newStatusCounts\n\t\t\t};\n\t\tcase \"FETCH_LINKS_SUCCESS\":\n\t\t\tconst { links: newLinks } = addGraphData(state.nodes, action.links);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlinks: newLinks,\n\t\t\t\tfilteredLinks: filterLinks(newLinks, state.filters)\n\t\t\t};\n\t\tcase \"FETCH_KIOSKS_SUCCESS\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tkiosks: action.kiosks,\n\t\t\t\tstatusCounts: {\n\t\t\t\t\t...state.statusCounts,\n\t\t\t\t\tlinkNYC: action.kiosks.length\n\t\t\t\t}\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nfunction filterNodes(nodes, filters) {\n\treturn nodes.filter(\n\t\tnode =>\n\t\t\tfilters[nodeStatus(node)] === undefined || filters[nodeStatus(node)]\n\t);\n}\n\nfunction filterLinks(links, filters) {\n\treturn links.filter(link => {\n\t\tif (!link.fromNode || !link.toNode) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (filters[nodeStatus(link.fromNode)] === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (filters[nodeStatus(link.toNode)] === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t});\n}\n\nfunction addGraphData(nodes, links, sectors) {\n\t// Calculate connected nodes for each active node\n\tnodes.filter(node => node.status === \"Installed\").forEach(node => {\n\t\tconst connectedNodes = [node.id];\n\n\t\tlinks.forEach(link => {\n\t\t\tif (link.status !== \"active\") return;\n\t\t\tif (link.from === parseInt(node.id, 10)) {\n\t\t\t\tconnectedNodes.push(link.to);\n\t\t\t}\n\n\t\t\tif (link.to === parseInt(node.id, 10)) {\n\t\t\t\tconnectedNodes.push(link.from);\n\t\t\t}\n\t\t});\n\n\t\tnode.connectedNodes = connectedNodes;\n\t});\n\n\tconst nodesById = {};\n\n\tnodes.forEach(node => {\n\t\t// Add links to node\n\t\tnode.links = links.filter(\n\t\t\tlink =>\n\t\t\t\tlink.status === \"active\" &&\n\t\t\t\t(link.from === parseInt(node.id, 10) ||\n\t\t\t\t\tlink.to === parseInt(node.id, 10))\n\t\t);\n\n\t\tnodesById[node.id] = node;\n\t});\n\n\tlinks.forEach(link => {\n\t\tlink.fromNode = nodesById[link.from];\n\t\tlink.toNode = nodesById[link.to];\n\t});\n\n\tsectors.forEach(sector => {\n\t\tsector.node = nodesById[sector.nodeId];\n\t});\n\n\treturn { nodes, links, sectors, nodesById };\n}\n\nfunction getCounts(nodes, kiosks) {\n\tconst counts = {};\n\tnodes.forEach(node => {\n\t\tconst status = nodeStatus(node);\n\t\tcounts[status] = (counts[status] || 0) + 1;\n\n\t\tif (status.indexOf(\"potential-\") > -1 || status === \"dead\") {\n\t\t\tcounts[\"potential\"] = (counts[\"potential\"] || 0) + 1;\n\t\t}\n\n\t\tif (status === \"supernode\" || status === \"hub\") {\n\t\t\tcounts[\"active\"] = (counts[\"active\"] || 0) + 1;\n\t\t}\n\t});\n\tcounts.linkNYC = kiosks.length;\n\treturn counts;\n}\n\nexport default reducer;\n","import { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport DocumentTitle from \"react-document-title\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nimport React, { Component } from \"react\";\nimport SearchBar from \"./components/SearchBar\";\nimport MapView from \"./components/MapView\";\nimport Filters from \"./components/Filters\";\n\nimport rootReducer from \"./reducers\";\n\nconst store = createStore(rootReducer);\n\nclass App extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<DocumentTitle title=\"Map - NYC Mesh\">\n\t\t\t\t<Provider store={store}>\n\t\t\t\t\t<Router basename={\"/map\"}>\n\t\t\t\t\t\t<div className=\"h-100 w-100 relative sans-serif\">\n\t\t\t\t\t\t\t<div className=\"absolute pa2 z-999 search-bar\">\n\t\t\t\t\t\t\t\t<SearchBar />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/nodes/:nodeId\"\n\t\t\t\t\t\t\t\tchildren={({ match }) => (\n\t\t\t\t\t\t\t\t\t<MapView match={match} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"absolute bottom-0 left-0 ma2\">\n\t\t\t\t\t\t\t\t<Filters />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Router>\n\t\t\t\t</Provider>\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\thandleNodeClick(node) {}\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nif (process.env.NODE_ENV === \"development\") require(\"tachyons\");\n\nReactDOM.render(<App />, document.getElementById(\"map-root\"));\n"],"sourceRoot":""}