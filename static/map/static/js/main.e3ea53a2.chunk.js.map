{"version":3,"sources":["components/NodeName.js","components/SearchBar/NodeRow.js","components/SearchBar/component.js","components/SearchBar/connected.js","utils/index.js","components/MapView/Sector.js","components/MapView/NodeMarker.js","components/MapView/KioskMarker.js","components/MapView/LinkLine.js","components/NodeDetail/component.js","components/NodeDetail/connected.js","components/Gallery/component.js","components/Gallery/connected.js","components/MapView/component.js","components/MapView/styles.js","components/MapView/connected.js","components/Filters/component.js","components/Filters/connected.js","actions/index.js","reducers/index.js","App.js","index.js"],"names":["icons","dead","react_default","a","createElement","xmlns","width","height","cx","cy","r","stroke","strokeWidth","fill","opacity","potential","potential-hub","potential-supernode","active","hub","supernode","linkNYC","NodeName","_this$props","this","props","node","search","className","type","main_default","highlightClassName","searchWords","autoEscape","textToHighlight","concat","id","notes","PureComponent","NodeRow","onClick","Link","to","key","NodeName_NodeName","SearchBar","state","filteredNodes","showDropdown","prevProps","prevState","nodes","setState","filterSearch","renderSearchBar","renderList","_this2","refs","focus","viewBox","strokeLinecap","strokeLinejoin","style","minWidth","x1","y1","x2","y2","ref","value","placeholder","spellCheck","autoCorrect","onFocus","onChange","event","target","renderClearButton","_this3","length","map","NodeRow_NodeRow","_this4","lowerSearch","toLowerCase","Object","toConsumableArray","filter","parseInt","indexOf","sort","b","status","connect","ownProps","tickets","dispatch","PureSearchBar","nodeNames","227","570","713","nodeColors","kiosk","sectorColors","default","visibilityMultipliers","highlight","secondary","dim","zIndexes","Sector","visibility","visibilityMultiplier","fillOpacity","MAX_OPACITY","undefined","fillColor","getFillColor","zIndex","_this$props2","lat","lng","radius","azimuth","interval","Array","keys","index","path","centerPoint","PRlat","Math","PI","PRlng","cos","PGpoints","push","lat1","lon1","sin","lat2","lon2","theta","gamma","PGlon","PGlat","getPath","lib","options","strokeColor","strokeOpacity","clickable","_this$props3","NodeMarker","visible","coordinates","_coordinates","slicedToArray","title","_this$getMarkerProps","getMarkerProps","icon","adjustedZ","getZIndex","getOpacity","react","defaultPosition","defaultIcon","defaultTitle","renderSectors","sectors","sector","_sector$node$coordina","Sector_Sector","defaultZIndex","url","anchor","x","y","VisibilityMarker","NodeMarker_NodeMarker","assign","KioskMarker","_kiosk$coordinates","LinkLine","link","fromNode","toNode","_fromNode$coordinates","lng1","_toNode$coordinates","lng2","latlng1","latlng2","_this$getLineProps","getLineProps","defaultOpacity","getPixelPositionOffset","NodeDetail","nodeId","nodesById","position","window","google","maps","LatLng","mapPaneName","OverlayView","OVERLAY_MOUSE_TARGET","preventMapHitsFrom","renderImage","nodeName","version","aria-hidden","fillRule","d","panoramas","firstPanorama","backgroundImage","Gallery","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","getPanoramas","keyDownHandler","handleKeyDown","bind","addEventListener","removeEventListener","preventDefault","stopPropagation","keyCode","match","_match$params","params","panoId","history","context","router","panoIdInt","nextPanoId","prevPanoId","_match$params2","src","react_document_title_default","open","alt","renderPreviews","_match$params3","panorama","contextTypes","PropTypes","object","PureGallery","DEFAULT_CENTER","styles","elementType","stylers","featureType","fullscreenControl","streetViewControl","zoomControlOptions","mapTypeControlOptions","backgroundColor","gestureHandling","clickableIcons","MapComponent","withScriptjs","withGoogleMap","mapRef","children","MapView","commandPressed","React","createRef","markerRefs","lineRefs","keyUpHandler","handleKeyUp","setTimeout","handleSelectedChange","e","console","error","nextProps","nodesChanged","isEqual","matchChanged","filtersChanged","filters","resetAllNodes","nextSelectedMarkers","selectedNodeIds","m","nextSelectedNodes","marker","updateNodes","fitBounds","updateLinks","panToNodes","defaultZoom","defaultCenter","defaultOptions","loadingElement","containerElement","mapElement","googleMapURL","renderLinks","renderKiosks","renderNodes","renderNodeDetail","es_Route","exact","component","selectedIds","reduce","idMap","objectSpread","defineProperty","isFiltered","isSelected","NodeMarker_VisibilityMarker","handleNodeClick","handleMarkerRef","_this5","links","hidden","LinkLine_LinkLine","linkId","handleLineRef","kiosks","KioskMarker_KioskMarker","nodeIds","nodeTitles","join","NodeDetail_connected","selectedId","toString","newNodeIds","newNodeIdString","uniq","replace","_this6","ReactDOM","unstable_batchedUpdates","values","forEach","setVisibility","line","markers","_this7","activeIsSelected","acc","connectedNodes","connectedMarker","_this8","minLng","minLat","maxLng","maxLat","_node$coordinates","newBounds","east","north","south","west","current","innerWidth","panToBounds","_nodes$0$coordinates","panTo","from","arguments","split","Component","withRouter","PureMapView","labels","Filters","role","label","renderFilter","statusCounts","toggleFilter","enabled","htmlFor","color","marginLeft","marginRight","marginTop","marginBottom","name","defaultChecked","PureFilters","initialFilters","addGraphData","nodeData","linkData","sectorData","initialState","getCounts","lowerNotes","isActive","isSupernode","isHub","notPotentialHub","hasPanoramas","nodeType","sectorsByNodeId","counts","reducer","action","newFilters","newValue","newNodes","newStatusCounts","newLinks","store","createStore","rootReducer","App","es","BrowserRouter","basename","connected","Route","_ref","MapView_connected","Filters_connected","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.e3ea53a2.chunk.js","sourcesContent":["import React, { PureComponent } from \"react\";\nimport Highlighter from \"react-highlight-words\";\n\nexport const icons = {\n\tdead: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\">\n\t\t\t<circle\n\t\t\t\tcx=\"7\"\n\t\t\t\tcy=\"7\"\n\t\t\t\tr=\"5\"\n\t\t\t\tstroke=\"#fff\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tfill=\"#aaa\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\tpotential: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\">\n\t\t\t<circle\n\t\t\t\tcx=\"8\"\n\t\t\t\tcy=\"8\"\n\t\t\t\tr=\"6\"\n\t\t\t\tstroke=\"#fff\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tfill=\"#777\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\t\"potential-hub\": (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\">\n\t\t\t<circle\n\t\t\t\tfill=\"#777\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"8\"\n\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\tcy=\"11\"\n\t\t\t\tcx=\"11\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\t\"potential-supernode\": (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"#777\"\n\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"10\"\n\t\t\t\t\tcy=\"14\"\n\t\t\t\t\tcx=\"14\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\tactive: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\">\n\t\t\t<circle\n\t\t\t\tfill=\"rgb(255,59,48)\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"6\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tcx=\"8\"\n\t\t\t\tcy=\"8\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\thub: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\">\n\t\t\t<circle\n\t\t\t\tfill=\"rgb(90,200,250)\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"8\"\n\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\tcy=\"11\"\n\t\t\t\tcx=\"11\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\tsupernode: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"#007aff\"\n\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"10\"\n\t\t\t\t\tcy=\"14\"\n\t\t\t\t\tcx=\"14\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\tlinkNYC: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\">\n\t\t\t<circle\n\t\t\t\tcx=\"10\"\n\t\t\t\tcy=\"10\"\n\t\t\t\tr=\"3\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\tfill=\"#01a2eb\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t)\n};\n\nexport default class NodeName extends PureComponent {\n\trender() {\n\t\tconst { node, search } = this.props;\n\t\treturn (\n\t\t\t<div className=\"h1 w-100 overflow-visible flex justify-start items-center\">\n\t\t\t\t<div className=\"h2 w2 min-h2 min-w2 flex items-center justify-center\">\n\t\t\t\t\t{icons[node.type]}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"pl1 flex-1 truncate\">\n\t\t\t\t\t<span className=\"db f5 fw6 black mv0\">\n\t\t\t\t\t\t<Highlighter\n\t\t\t\t\t\t\thighlightClassName=\"bg-light-yellow\"\n\t\t\t\t\t\t\tsearchWords={[search]}\n\t\t\t\t\t\t\tautoEscape={true}\n\t\t\t\t\t\t\ttextToHighlight={`Node ${node.id}`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t{node.notes ? (\n\t\t\t\t\t\t<span className=\"db f7 gray mv05 truncate\">\n\t\t\t\t\t\t\t<Highlighter\n\t\t\t\t\t\t\t\thighlightClassName=\"bg-light-yellow dark-gray\"\n\t\t\t\t\t\t\t\tsearchWords={[search]}\n\t\t\t\t\t\t\t\tautoEscape={true}\n\t\t\t\t\t\t\t\ttextToHighlight={node.notes}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport NodeName from \"../NodeName\";\n\nexport default class NodeRow extends PureComponent {\n\trender() {\n\t\tconst { node, search, onClick } = this.props;\n\t\tconst { id } = node;\n\t\treturn (\n\t\t\t<Link className=\"link\" to={`/nodes/${id}`}>\n\t\t\t\t<div\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName=\"pointer hover-bg-near-white bb b--light-gray pa3 pl2\"\n\t\t\t\t>\n\t\t\t\t\t<NodeName node={node} search={search} />\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t);\n\t}\n}\n","import React, { PureComponent } from \"react\";\n\nimport NodeRow from \"./NodeRow\";\n\nexport default class SearchBar extends PureComponent {\n\tstate = {\n\t\tfilteredNodes: [],\n\t\tsearch: \"\",\n\t\tshowDropdown: false\n\t};\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t// Super hacky, do this better\n\t\tif (\n\t\t\tprevState.search === this.state.search &&\n\t\t\tprevProps.nodes !== this.props.nodes\n\t\t) {\n\t\t\tthis.setState({\n\t\t\t\tfilteredNodes: this.filterSearch(this.state.search)\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"w-100 mw6 shadow-2\">\n\t\t\t\t{this.renderSearchBar()}\n\t\t\t\t{this.renderList()}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderSearchBar() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"flex items-center bg-white overflow-hidden\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.refs.search.focus();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\twidth=\"20\"\n\t\t\t\t\theight=\"20\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tstroke=\"#aaa\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\tclassName=\"ml3 db\"\n\t\t\t\t\tstyle={{ minWidth: 20 }}\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"11\" cy=\"11\" r=\"8\" />\n\t\t\t\t\t<line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\n\t\t\t\t</svg>\n\t\t\t\t<input\n\t\t\t\t\tref=\"search\"\n\t\t\t\t\tclassName=\"sans-serif overflow-hidden pl2 pr3 pv3 input-reset f5 fw4 bw0 w-100 on\"\n\t\t\t\t\tvalue={this.state.search}\n\t\t\t\t\tplaceholder=\"Search nodes\"\n\t\t\t\t\tspellCheck={false}\n\t\t\t\t\tautoCorrect=\"false\"\n\t\t\t\t\tonFocus={() => this.setState({ showDropdown: true })}\n\t\t\t\t\tonChange={event =>\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tsearch: event.target.value,\n\t\t\t\t\t\t\tfilteredNodes: this.filterSearch(event.target.value)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{this.renderClearButton()}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderList() {\n\t\tif (!this.state.filteredNodes.length || !this.state.showDropdown) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { search } = this.state;\n\t\treturn (\n\t\t\t<div className=\"bg-white bt b--light-gray max-h-5-rows overflow-y-scroll\">\n\t\t\t\t{this.state.filteredNodes.map(node => (\n\t\t\t\t\t<NodeRow\n\t\t\t\t\t\tkey={node.id}\n\t\t\t\t\t\tnode={node}\n\t\t\t\t\t\tsearch={search}\n\t\t\t\t\t\tonClick={() => this.setState({ showDropdown: false })}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderClearButton() {\n\t\tconst { search } = this.state;\n\n\t\tif (!search || !search.length) {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"mr3\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: 20,\n\t\t\t\t\t\theight: 20\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tsearch: \"\",\n\t\t\t\t\t\tfilteredNodes: []\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tclassName=\"on btn bn pa0 bg-white pointer mr3 silver\"\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\twidth=\"20\"\n\t\t\t\t\theight=\"20\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\tclassName=\"db\"\n\t\t\t\t>\n\t\t\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n\t\t\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t);\n\t}\n\n\tfilterSearch(search) {\n\t\tconst { nodes } = this.props;\n\t\tif (!search) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst lowerSearch = search.toLowerCase();\n\n\t\treturn [\n\t\t\t...nodes.filter(\n\t\t\t\tnode =>\n\t\t\t\t\tnode.id === parseInt(search, 10) ||\n\t\t\t\t\tlowerSearch === `node ${node.id}`\n\t\t\t),\n\t\t\t...nodes\n\t\t\t\t.filter(\n\t\t\t\t\tnode =>\n\t\t\t\t\t\tnode.notes &&\n\t\t\t\t\t\tnode.notes.toLowerCase().indexOf(lowerSearch) > -1\n\t\t\t\t)\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tif (a.status !== b.status) {\n\t\t\t\t\t\tif (a.status === \"Installed\") return -1;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn a.id - b.id;\n\t\t\t\t})\n\t\t];\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureSearchBar from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodes: state.nodes,\n\ttickets: state.tickets\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PureSearchBar);\n","// Temporary hack\nconst nodeNames = {\n\t227: \"Supernode 1\",\n\t570: \"Supernode 2\",\n\t713: \"Supernode 3\"\n};\n\nexport function nodeName(node) {\n\treturn nodeNames[node.id] || node.id;\n}\n\nexport function nodeType(node) {\n\tconst { status, notes, panoramas } = node;\n\tconst lowerNotes = notes ? notes.toLowerCase() : null;\n\tconst isActive = status === \"Installed\";\n\tconst isSupernode = notes && lowerNotes.indexOf(\"supernode\") > -1;\n\tconst isHub = notes && lowerNotes.indexOf(\"hub\") > -1;\n\tconst notPotentialHub = !notes || lowerNotes.indexOf(\"hub?\") === -1;\n\tconst hasPanoramas = panoramas && panoramas.length;\n\n\tif (isActive) {\n\t\tif (isSupernode) return \"supernode\";\n\t\tif (isHub && notPotentialHub) return \"hub\";\n\t\treturn \"active\";\n\t}\n\n\tif (isSupernode) return \"potential-supernode\";\n\tif (isHub) return \"potential-hub\";\n\tif (hasPanoramas) return \"potential\";\n\treturn \"dead\";\n}\n\nexport const nodeColors = {\n\tactive: \"rgb(255,59,48)\",\n\tdead: \"#aaa\",\n\thub: \"rgb(90,200,250)\",\n\tkiosk: \"#01a2eb\",\n\tlinkNYC: \"#01a2eb\",\n\t\"potential-hub\": \"#777\",\n\t\"potential-supernode\": \"#777\",\n\tpotential: \"#777\",\n\tsupernode: \"#007aff\"\n};\n\nexport const sectorColors = {\n\tsupernode: \"#007aff\",\n\t\"potential-hub\": \"#aaa\",\n\t\"potential-supernode\": \"#aaa\",\n\tpotential: \"#aaa\",\n\tdefault: \"rgb(90,200,250)\"\n};\n","import React, { PureComponent } from \"react\";\nimport { Polygon } from \"react-google-maps\";\nimport { sectorColors } from \"../../utils\";\n\nconst MAX_OPACITY = 0.75;\nconst INTERVAL_COUNT = 25;\n\nconst visibilityMultipliers = {\n\thighlight: 1,\n\tsecondary: 0,\n\tdim: 0\n};\n\nconst zIndexes = {\n\thighlight: 3,\n\tdim: 1\n};\n\nexport default class Sector extends PureComponent {\n\trender() {\n\t\tconst { visibility, node } = this.props;\n\n\t\tconst visibilityMultiplier = visibilityMultipliers[visibility];\n\t\tconst multiplier =\n\t\t\tvisibilityMultiplier === undefined ? 1 : visibilityMultiplier;\n\t\tconst fillOpacity = (MAX_OPACITY / INTERVAL_COUNT) * multiplier;\n\t\tconst fillColor = this.getFillColor();\n\t\tconst zIndex = zIndexes[visibility] || 1;\n\n\t\tconst { lat, lng, radius, azimuth, width } = this.props;\n\t\tconst interval = radius / INTERVAL_COUNT;\n\t\tconst radiusIndices = [...Array(INTERVAL_COUNT).keys()];\n\n\t\treturn radiusIndices.map(index => {\n\t\t\tconst circleRadius = interval * index;\n\t\t\tconst path = getPath(lat, lng, circleRadius, azimuth, width);\n\t\t\treturn (\n\t\t\t\t<Polygon\n\t\t\t\t\tkey={index}\n\t\t\t\t\tpath={path}\n\t\t\t\t\toptions={{\n\t\t\t\t\t\tstrokeColor: \"transparent\",\n\t\t\t\t\t\tstrokeOpacity: 0,\n\t\t\t\t\t\tstrokeWidth: 0,\n\t\t\t\t\t\tfillColor,\n\t\t\t\t\t\tfillOpacity,\n\t\t\t\t\t\tclickable: false\n\t\t\t\t\t}}\n\t\t\t\t\tzIndex={zIndex}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\tgetFillColor() {\n\t\tconst { node, active } = this.props;\n\t\tif (!active) {\n\t\t\treturn sectorColors.potential;\n\t\t}\n\t\treturn sectorColors[node.type] || sectorColors.default;\n\t}\n}\n\nfunction getPath(lat, lng, radius, azimuth, width) {\n\tvar centerPoint = { lat, lng };\n\tvar PRlat = (radius / 3963) * (180 / Math.PI); // using 3963 miles as earth's radius\n\tvar PRlng = PRlat / Math.cos(lat * (Math.PI / 180));\n\tvar PGpoints = [];\n\tPGpoints.push(centerPoint);\n\n\tconst lat1 =\n\t\tlat + PRlat * Math.cos((Math.PI / 180) * (azimuth - width / 2));\n\tconst lon1 =\n\t\tlng + PRlng * Math.sin((Math.PI / 180) * (azimuth - width / 2));\n\tPGpoints.push({ lat: lat1, lng: lon1 });\n\n\tconst lat2 =\n\t\tlat + PRlat * Math.cos((Math.PI / 180) * (azimuth + width / 2));\n\tconst lon2 =\n\t\tlng + PRlng * Math.sin((Math.PI / 180) * (azimuth + width / 2));\n\n\tvar theta = 0;\n\tvar gamma = (Math.PI / 180) * (azimuth + width / 2);\n\n\tfor (var a = 1; theta < gamma; a++) {\n\t\ttheta = (Math.PI / 180) * (azimuth - width / 2 + a);\n\t\tconst PGlon = lng + PRlng * Math.sin(theta);\n\t\tconst PGlat = lat + PRlat * Math.cos(theta);\n\n\t\tPGpoints.push({ lat: PGlat, lng: PGlon });\n\t}\n\n\tPGpoints.push({ lat: lat2, lng: lon2 });\n\tPGpoints.push(centerPoint);\n\n\treturn PGpoints;\n}\n","import React, { PureComponent, Fragment } from \"react\";\nimport { Marker } from \"react-google-maps\";\nimport Sector from \"./Sector\";\n\nclass NodeMarker extends PureComponent {\n\trender() {\n\t\tconst { node, visible, onClick } = this.props;\n\t\tconst { id, notes, coordinates } = node;\n\t\tconst [lng, lat] = coordinates;\n\t\tconst title = `${id}${notes ? ` - ${notes}` : \"\"}`;\n\t\tconst { icon, zIndex } = this.getMarkerProps();\n\t\tconst adjustedZ = this.getZIndex(zIndex);\n\t\tconst opacity = this.getOpacity();\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Marker\n\t\t\t\t\tdefaultPosition={{ lat, lng }}\n\t\t\t\t\tdefaultIcon={icon}\n\t\t\t\t\tdefaultTitle={title}\n\t\t\t\t\toptions={{ opacity }}\n\t\t\t\t\tvisible={visible}\n\t\t\t\t\tzIndex={adjustedZ}\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t/>\n\t\t\t\t{this.renderSectors()}\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderSectors() {\n\t\tconst { node, visible, visibility } = this.props;\n\t\tconst { sectors } = node;\n\n\t\tif (!sectors || !visible) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn sectors.map(sector => {\n\t\t\tconst [lng, lat] = sector.node.coordinates;\n\t\t\tconst { radius, azimuth, width, active } = sector;\n\t\t\tconst key = lat + lng + radius + azimuth + width;\n\t\t\treturn (\n\t\t\t\t<Sector\n\t\t\t\t\tkey={key}\n\t\t\t\t\tlat={lat}\n\t\t\t\t\tlng={lng}\n\t\t\t\t\tradius={radius}\n\t\t\t\t\tazimuth={azimuth}\n\t\t\t\t\twidth={width}\n\t\t\t\t\tactive={active}\n\t\t\t\t\tvisibility={visibility}\n\t\t\t\t\tnode={node}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\tgetOpacity() {\n\t\tconst { visibility } = this.props;\n\t\tif (visibility === \"highlight\") return 1;\n\t\tif (visibility === \"secondary\") return 1;\n\t\tif (visibility === \"dim\") return 0.25;\n\t\treturn 1;\n\t}\n\n\tgetZIndex(defaultZIndex) {\n\t\tconst { visibility } = this.props;\n\t\tif (visibility === \"highlight\") return defaultZIndex + 999;\n\t\tif (visibility === \"secondary\") return defaultZIndex + 998;\n\t\treturn defaultZIndex;\n\t}\n\n\tgetMarkerProps() {\n\t\tconst { node } = this.props;\n\t\tconst { type } = node;\n\n\t\tif (type === \"supernode\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/supernode.svg\",\n\t\t\t\t\tanchor: { x: 14, y: 14 }\n\t\t\t\t},\n\t\t\t\tzIndex: 100\n\t\t\t};\n\n\t\tif (type === \"hub\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/hub.svg\",\n\t\t\t\t\tanchor: { x: 11, y: 11 }\n\t\t\t\t},\n\t\t\t\tzIndex: 99\n\t\t\t};\n\n\t\tif (type === \"active\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/active.svg\",\n\t\t\t\t\tanchor: { x: 8, y: 8 }\n\t\t\t\t},\n\t\t\t\tzIndex: 98\n\t\t\t};\n\n\t\tif (type === \"potential-supernode\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential-supernode.svg\",\n\t\t\t\t\tanchor: { x: 14, y: 14 }\n\t\t\t\t},\n\t\t\t\tzIndex: 89\n\t\t\t};\n\n\t\tif (type === \"potential-hub\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential-hub.svg\",\n\t\t\t\t\tanchor: { x: 11, y: 11 }\n\t\t\t\t},\n\t\t\t\tzIndex: 88\n\t\t\t};\n\n\t\tif (type === \"potential\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential.svg\",\n\t\t\t\t\tanchor: { x: 8, y: 8 }\n\t\t\t\t},\n\t\t\t\tzIndex: 87\n\t\t\t};\n\n\t\treturn {\n\t\t\ticon: {\n\t\t\t\turl: \"/img/map/dead.svg\",\n\t\t\t\tanchor: { x: 7, y: 7 }\n\t\t\t},\n\t\t\tzIndex: 86\n\t\t};\n\t}\n}\n\nexport default class VisibilityMarker extends PureComponent {\n\tstate = {\n\t\tvisibility: \"default\"\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<NodeMarker {...this.props} visibility={this.state.visibility} />\n\t\t);\n\t}\n\n\tsetVisibility(visibility) {\n\t\tthis.setState({ visibility });\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Marker } from \"react-google-maps\";\n\nexport default class KioskMarker extends PureComponent {\n\trender() {\n\t\tconst { kiosk } = this.props;\n\t\tconst [lng, lat] = kiosk.coordinates;\n\t\tconst icon = {\n\t\t\turl: \"/img/map/kiosk.svg\",\n\t\t\tanchor: { x: 5, y: 5 }\n\t\t};\n\t\treturn <Marker defaultPosition={{ lat, lng }} icon={icon} zIndex={1} />;\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Polyline } from \"react-google-maps\";\n\nexport default class LinkLine extends PureComponent {\n\tstate = {\n\t\tvisibility: \"default\"\n\t};\n\n\trender() {\n\t\tconst { link, visible } = this.props;\n\t\tconst { fromNode, toNode } = link;\n\n\t\tif (!fromNode || !toNode) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst [lng1, lat1] = fromNode.coordinates;\n\t\tconst [lng2, lat2] = toNode.coordinates;\n\t\tconst latlng1 = { lat: lat1, lng: lng1 };\n\t\tconst latlng2 = { lat: lat2, lng: lng2 };\n\n\t\tconst { strokeColor, strokeOpacity, zIndex } = this.getLineProps();\n\n\t\treturn (\n\t\t\t<Polyline\n\t\t\t\tpath={[latlng1, latlng2]}\n\t\t\t\toptions={{\n\t\t\t\t\tstrokeColor,\n\t\t\t\t\tstrokeOpacity: this.getOpacity(strokeOpacity)\n\t\t\t\t}}\n\t\t\t\tvisible={visible}\n\t\t\t\tzIndex={this.getZIndex(zIndex)}\n\t\t\t/>\n\t\t);\n\t}\n\n\tgetOpacity(defaultOpacity) {\n\t\tconst { visibility } = this.state;\n\t\tif (visibility === \"highlight\") return 1;\n\t\tif (visibility === \"dim\") return defaultOpacity * 0.125;\n\t\treturn defaultOpacity;\n\t}\n\n\tgetZIndex(defaultZIndex) {\n\t\tconst { visibility } = this.state;\n\t\tif (visibility === \"highlight\") return 60;\n\t\treturn defaultZIndex;\n\t}\n\n\tsetVisibility(visibility) {\n\t\tthis.setState({ visibility });\n\t}\n\n\tgetLineProps() {\n\t\tconst { link } = this.props;\n\t\tconst { status } = link;\n\n\t\tif (status === \"active\")\n\t\t\treturn {\n\t\t\t\tstrokeColor: \"#007aff\",\n\t\t\t\tstrokeOpacity: 1,\n\t\t\t\tzIndex: 50\n\t\t\t};\n\n\t\treturn {\n\t\t\tstrokeColor: \"#aaa\",\n\t\t\tstrokeOpacity: 0.25,\n\t\t\tzIndex: 50\n\t\t};\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { OverlayView } from \"react-google-maps\";\nimport { Link } from \"react-router-dom\";\n\nimport { nodeName } from \"../../utils\";\n\nconst getPixelPositionOffset = (width, height) => ({\n\tx: -width / 2,\n\ty: -height\n});\n\nexport default class NodeDetail extends PureComponent {\n\trender() {\n\t\tconst { nodeId, nodesById } = this.props;\n\n\t\tif (!nodeId || !nodesById) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst node = nodesById[nodeId];\n\t\tif (!node) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { coordinates } = node;\n\t\tconst [lng, lat] = coordinates;\n\n\t\treturn (\n\t\t\t<OverlayView\n\t\t\t\tposition={new window.google.maps.LatLng(lat, lng)}\n\t\t\t\tmapPaneName={OverlayView.OVERLAY_MOUSE_TARGET}\n\t\t\t\tgetPixelPositionOffset={getPixelPositionOffset}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tref={ref =>\n\t\t\t\t\t\tref &&\n\t\t\t\t\t\twindow.google.maps.OverlayView.preventMapHitsFrom(ref)\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"flex flex-column items-center\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex items-center bg-white br2 overflow-hidden shadow-2\">\n\t\t\t\t\t\t{this.renderImage(node)}\n\t\t\t\t\t\t<div className=\"pv1 ph2 flex flex-column justify-end\">\n\t\t\t\t\t\t\t<span className=\"f5 fw6 nowrap sans-serif\">\n\t\t\t\t\t\t\t\t{nodeName(node)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<svg\n\t\t\t\t\t\tviewBox=\"0 5 12 12\"\n\t\t\t\t\t\tversion=\"1.1\"\n\t\t\t\t\t\twidth=\"12\"\n\t\t\t\t\t\theight=\"12\"\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\tfill=\"white\"\n\t\t\t\t\t\t\td=\"M0 5l6 6 6-6H0z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</OverlayView>\n\t\t);\n\t}\n\n\trenderImage(node) {\n\t\tconst { id, panoramas } = node;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn null;\n\t\t}\n\t\tconst [firstPanorama] = panoramas;\n\t\treturn (\n\t\t\t<Link to={`/nodes/${id}/panoramas/1`} className=\"db h2 w2\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"h-100 w-100 cover bg-center bg-near-white\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundImage: `url(\"https://node-db.netlify.com/panoramas/${firstPanorama}\")`\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Link>\n\t\t);\n\t}\n\n\trenderNotes(node) {\n\t\tconst { notes } = node;\n\t\tif (!notes) {\n\t\t\treturn null;\n\t\t}\n\t\treturn <span className=\"mv0 f7 gray truncate sans-serif\">{notes}</span>;\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureComponent from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodesById: state.nodesById\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureComponent);\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport DocumentTitle from \"react-document-title\";\n\nexport default class Gallery extends PureComponent {\n\tstatic contextTypes = {\n\t\trouter: PropTypes.object\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpanoramas: this.getPanoramas()\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.keyDownHandler = this.handleKeyDown.bind(this);\n\t\twindow.addEventListener(\"keydown\", this.keyDownHandler, true);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"keydown\", this.keyDownHandler, true);\n\t}\n\n\thandleKeyDown(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tconst { keyCode } = event;\n\t\tconst { match } = this.props;\n\t\tconst { panoramas } = this.state;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst { history } = this.context.router;\n\t\tconst panoIdInt = parseInt(panoId);\n\t\tif (keyCode === 27) {\n\t\t\thistory.push(`/nodes/${nodeId}`);\n\t\t} else if (keyCode === 39) {\n\t\t\tconst nextPanoId = panoIdInt < panoramas.length ? panoIdInt + 1 : 1;\n\t\t\thistory.push(`/nodes/${nodeId}/panoramas/${nextPanoId}`);\n\t\t} else if (keyCode === 37) {\n\t\t\tconst prevPanoId = panoId > 1 ? panoIdInt - 1 : panoramas.length;\n\t\t\thistory.push(`/nodes/${nodeId}/panoramas/${prevPanoId}`);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { match } = this.props;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst { panoramas } = this.state;\n\t\tconst src = panoramas[panoId - 1];\n\n\t\treturn (\n\t\t\t<DocumentTitle\n\t\t\t\ttitle={`Panorama ${panoId} - Node ${nodeId} - NYC Mesh`}\n\t\t\t>\n\t\t\t\t<div className=\"fixed absolute--fill bg-black flex flex-column items-center justify-center z-max\">\n\t\t\t\t\t<Link to=\"..\" className=\"absolute top-0 left-0 ma3 white\">\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\tclassName=\"db ma0\"\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\twidth=\"24\"\n\t\t\t\t\t\t\theight=\"24\"\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n\t\t\t\t\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</Link>\n\n\t\t\t\t\t<img\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\twindow\n\t\t\t\t\t\t\t\t.open(\n\t\t\t\t\t\t\t\t\t`https://node-db.netlify.com/panoramas/${src}`,\n\t\t\t\t\t\t\t\t\t\"_blank\"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.focus()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName=\"db center mh-100 mw-100 zoom-in\"\n\t\t\t\t\t\tsrc={`https://node-db.netlify.com/panoramas/${src}`}\n\t\t\t\t\t\talt=\"Panorama\"\n\t\t\t\t\t/>\n\t\t\t\t\t{this.renderPreviews()}\n\t\t\t\t</div>\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\trenderPreviews() {\n\t\tconst { match } = this.props;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst { panoramas } = this.state;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"absolute bottom-0 right-0 left-0 flex ph1 pv2 overflow-x-scroll\">\n\t\t\t\t{panoramas.map((panorama, index) => (\n\t\t\t\t\t<Link\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tto={`/nodes/${nodeId}/panoramas/${index + 1}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={`node-image mh1 cover ba bw1 b--white ${\n\t\t\t\t\t\t\t\tindex === panoId - 1 ? \"\" : \"o-30\"\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackgroundImage: `url(\"https://node-db.netlify.com/panoramas/${panorama}\")`\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Link>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tgetPanoramas() {\n\t\tconst { match, nodesById } = this.props;\n\t\tconst { nodeId } = match.params;\n\t\tconst node = nodesById[nodeId];\n\n\t\tif (!node) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst { panoramas } = node;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn panoramas;\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureGallery from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodesById: state.nodesById\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureGallery);\n","import React, { Component, Fragment } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { withScriptjs, withGoogleMap, GoogleMap } from \"react-google-maps\";\nimport { withRouter, Route } from \"react-router\";\nimport DocumentTitle from \"react-document-title\";\nimport PropTypes from \"prop-types\";\nimport { uniq, isEqual } from \"lodash\";\n\nimport NodeMarker from \"./NodeMarker\";\nimport KioskMarker from \"./KioskMarker\";\nimport LinkLine from \"./LinkLine\";\nimport NodeDetail from \"../NodeDetail\";\nimport Gallery from \"../Gallery\";\n\nimport { mapStyles } from \"./styles\";\n\nconst DEFAULT_ZOOM = 13;\nconst DEFAULT_CENTER = { lat: 40.7031809, lng: -73.9595798 };\n\nconst options = {\n\tstyles: mapStyles,\n\tfullscreenControl: false,\n\tstreetViewControl: false,\n\tzoomControlOptions: {\n\t\tposition: \"9\"\n\t},\n\tmapTypeControlOptions: {\n\t\tposition: \"3\"\n\t},\n\tbackgroundColor: \"#f5f5f5\",\n\tgestureHandling: \"greedy\",\n\tclickableIcons: false\n};\n\nconst MapComponent = withScriptjs(\n\twithGoogleMap(props => (\n\t\t<GoogleMap ref={props.mapRef} {...props}>\n\t\t\t{props.children}\n\t\t</GoogleMap>\n\t))\n);\n\nclass MapView extends Component {\n\tstatic contextTypes = {\n\t\trouter: PropTypes.object\n\t};\n\n\tstate = {\n\t\tcommandPressed: false\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.map = React.createRef();\n\t\tthis.markerRefs = {};\n\t\tthis.lineRefs = {};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.keyDownHandler = this.handleKeyDown.bind(this);\n\t\tthis.keyUpHandler = this.handleKeyUp.bind(this);\n\t\twindow.addEventListener(\"keydown\", this.keyDownHandler, false);\n\t\twindow.addEventListener(\"keyup\", this.keyUpHandler, false);\n\n\t\tif (this.props.match) {\n\t\t\ttry {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.handleSelectedChange(this.props);\n\t\t\t\t}, 500);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"keydown\", this.keyDownHandler, false);\n\t\twindow.removeEventListener(\"keyup\", this.keyUpHandler, false);\n\t}\n\n\t// This is a kinda hacky way to improve performance\n\t// Instead of rerending the entire map, rerender specific nodes\n\tshouldComponentUpdate(nextProps) {\n\t\tconst nodesChanged = !isEqual(this.props.nodes, nextProps.nodes);\n\t\tconst matchChanged = this.props.match !== nextProps.match;\n\t\tconst filtersChanged = this.props.filters !== nextProps.filters;\n\t\tif (nodesChanged || matchChanged || filtersChanged) {\n\t\t\tthis.handleSelectedChange(nextProps);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\thandleKeyDown(event) {\n\t\tconst { keyCode } = event;\n\t\tif (keyCode === 27) {\n\t\t\tconst { history } = this.context.router;\n\t\t\thistory.push(\"/\");\n\t\t}\n\n\t\t// Command key\n\t\tif (keyCode === 91 || keyCode === 93) {\n\t\t\tthis.setState({ commandPressed: true });\n\t\t}\n\t}\n\n\thandleKeyUp(event) {\n\t\tconst { keyCode } = event;\n\n\t\t// Command key\n\t\tif (keyCode === 91 || keyCode === 93) {\n\t\t\tthis.setState({ commandPressed: false });\n\t\t}\n\t}\n\n\thandleSelectedChange(nextProps) {\n\t\t// If selected node is unchanged, do not rerender\n\t\tif (!this.props.match && !nextProps.match) return false;\n\n\t\t// If one was selected but none now selected, reset all nodes\n\t\tif (!nextProps.match) {\n\t\t\tthis.resetAllNodes();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst nextSelectedNodeIds = this.selectedNodeIds(nextProps.match);\n\t\tconst nextSelectedMarkers = nextSelectedNodeIds\n\t\t\t.map(id => this.markerRefs[id])\n\t\t\t.filter(m => m); // filter null\n\n\t\tif (!nextSelectedMarkers.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst nextSelectedNodes = nextSelectedMarkers.map(\n\t\t\tmarker => marker.props.node\n\t\t);\n\t\tthis.updateNodes(nextSelectedNodes, nextSelectedMarkers);\n\n\t\tconst matchChanged = this.props.match !== nextProps.match;\n\t\tconst nodesChanged = this.props.nodes !== nextProps.nodes;\n\t\tconst fitBounds = !matchChanged && !nodesChanged;\n\n\t\tconst filtersChanged = this.props.filters !== nextProps.filters;\n\n\t\tif (!filtersChanged) {\n\t\t\tthis.updateLinks(nextSelectedNodes);\n\t\t\tthis.panToNodes(nextSelectedNodes, fitBounds);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { history } = this.context.router;\n\t\treturn (\n\t\t\t<MapComponent\n\t\t\t\tmapRef={this.map}\n\t\t\t\tdefaultZoom={DEFAULT_ZOOM}\n\t\t\t\tdefaultCenter={DEFAULT_CENTER}\n\t\t\t\tdefaultOptions={options}\n\t\t\t\tonClick={() => history.push(\"/\")}\n\t\t\t\tloadingElement={<div className=\"h-100\" />}\n\t\t\t\tcontainerElement={<div className=\"h-100\" />}\n\t\t\t\tmapElement={<div className=\"h-100\" />}\n\t\t\t\tgoogleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyBNClp7oJsw-eleEoR3-PQKV23tpeW-FpE\"\n\t\t\t>\n\t\t\t\t{this.renderLinks()}\n\t\t\t\t{this.renderKiosks()}\n\t\t\t\t{this.renderNodes()}\n\t\t\t\t{this.renderNodeDetail()}\n\t\t\t\t<Route\n\t\t\t\t\texact\n\t\t\t\t\tpath=\"/nodes/:nodeId/panoramas/:panoId\"\n\t\t\t\t\tcomponent={Gallery}\n\t\t\t\t/>\n\t\t\t</MapComponent>\n\t\t);\n\t}\n\n\trenderNodes() {\n\t\tconst { nodes, filters } = this.props;\n\t\tconst selectedIds = this.selectedNodeIds().reduce(\n\t\t\t(idMap, nodeId) => ({ ...idMap, [nodeId]: true }),\n\t\t\t{}\n\t\t);\n\t\treturn nodes.map(node => {\n\t\t\tconst isFiltered = filters[node.type] === false;\n\t\t\tconst isSelected = selectedIds[node.id] === true;\n\t\t\tconst visible = !isFiltered || isSelected;\n\n\t\t\treturn (\n\t\t\t\t<NodeMarker\n\t\t\t\t\tkey={node.id}\n\t\t\t\t\tnode={node}\n\t\t\t\t\tvisible={visible}\n\t\t\t\t\tonClick={() => this.handleNodeClick(node)}\n\t\t\t\t\tref={ref => this.handleMarkerRef(ref)}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\trenderLinks() {\n\t\tconst { links, filters } = this.props;\n\t\treturn links.map((link, index) => {\n\t\t\tconst hidden =\n\t\t\t\tfilters[link.fromNode.type] === false ||\n\t\t\t\tfilters[link.toNode.type] === false;\n\t\t\treturn (\n\t\t\t\t<LinkLine\n\t\t\t\t\tkey={this.linkId(link)}\n\t\t\t\t\tref={ref => {\n\t\t\t\t\t\tthis.handleLineRef(ref);\n\t\t\t\t\t}}\n\t\t\t\t\tvisible={!hidden}\n\t\t\t\t\tlink={link}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\trenderKiosks() {\n\t\tconst { kiosks } = this.props;\n\t\treturn kiosks.map(kiosk => (\n\t\t\t<KioskMarker key={kiosk.id} kiosk={kiosk} />\n\t\t));\n\t}\n\n\trenderNodeDetail() {\n\t\tconst { match } = this.props;\n\t\tif (!match || !match.params) {\n\t\t\treturn null;\n\t\t}\n\t\tconst nodeIds = this.selectedNodeIds();\n\n\t\tconst nodeTitles = nodeIds.join(\", \");\n\t\tconst title = `${nodeTitles} - Map - NYC Mesh`;\n\t\treturn (\n\t\t\t<DocumentTitle title={title}>\n\t\t\t\t<Fragment>\n\t\t\t\t\t{nodeIds.map(id => (\n\t\t\t\t\t\t<NodeDetail key={id} nodeId={id} />\n\t\t\t\t\t))}\n\t\t\t\t</Fragment>\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\thandleNodeClick(node) {\n\t\tconst { match } = this.props;\n\t\tconst { history } = this.context.router;\n\n\t\t// Command click selects multiple nodes\n\t\tif (this.state.commandPressed && match && match.params.nodeId) {\n\t\t\tconst nodeIds = this.selectedNodeIds();\n\t\t\tconst selectedId = node.id.toString();\n\n\t\t\tlet newNodeIds = [];\n\t\t\tif (nodeIds.indexOf(selectedId) > -1) {\n\t\t\t\tnewNodeIds = nodeIds.filter(nodeId => nodeId !== selectedId);\n\t\t\t} else {\n\t\t\t\tnodeIds.push(selectedId);\n\t\t\t\tnewNodeIds = nodeIds;\n\t\t\t}\n\n\t\t\tconst newNodeIdString = uniq(newNodeIds)\n\t\t\t\t.sort()\n\t\t\t\t.join(\"-\");\n\t\t\thistory.replace(`/nodes/${newNodeIdString}`);\n\t\t} else {\n\t\t\thistory.push(`/nodes/${node.id}`);\n\t\t}\n\t}\n\n\tresetAllNodes() {\n\t\tReactDOM.unstable_batchedUpdates(() => {\n\t\t\tObject.values(this.markerRefs).forEach(marker =>\n\t\t\t\tmarker.setVisibility(\"default\")\n\t\t\t);\n\n\t\t\tObject.values(this.lineRefs).forEach(line =>\n\t\t\t\tline.setVisibility(\"default\")\n\t\t\t);\n\t\t});\n\t}\n\n\tupdateNodes(nodes, markers) {\n\t\tReactDOM.unstable_batchedUpdates(() => {\n\t\t\tconst activeIsSelected = nodes.reduce(\n\t\t\t\t(acc, node) => (acc = acc || node.status === \"Installed\"),\n\t\t\t\tfalse\n\t\t\t);\n\n\t\t\t// Dim all nodes of same type\n\t\t\tObject.values(this.markerRefs).forEach(marker => {\n\t\t\t\tif (\n\t\t\t\t\t!activeIsSelected &&\n\t\t\t\t\tmarker.props.node.status === \"Installed\"\n\t\t\t\t) {\n\t\t\t\t\tmarker.setVisibility(\"default\");\n\t\t\t\t} else {\n\t\t\t\t\tmarker.setVisibility(\"dim\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Highlight directly connected nodes\n\t\t\tnodes.forEach(node => {\n\t\t\t\tif (node.connectedNodes) {\n\t\t\t\t\tnode.connectedNodes.forEach(nodeId => {\n\t\t\t\t\t\tconst connectedMarker = this.markerRefs[nodeId];\n\t\t\t\t\t\tif (connectedMarker) {\n\t\t\t\t\t\t\tconnectedMarker.setVisibility(\"secondary\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Highlight selected nodes\n\t\t\tmarkers.forEach(marker => marker.setVisibility(\"highlight\"));\n\t\t});\n\t}\n\n\tupdateLinks(nodes) {\n\t\tReactDOM.unstable_batchedUpdates(() => {\n\t\t\t// Dim all links\n\t\t\tObject.values(this.lineRefs).forEach(line =>\n\t\t\t\tline.setVisibility(\"dim\")\n\t\t\t);\n\n\t\t\t// Highlight direct links\n\t\t\tnodes.forEach(node => {\n\t\t\t\tif (node.links) {\n\t\t\t\t\tnode.links.forEach(link => {\n\t\t\t\t\t\tconst line = this.lineRefs[this.linkId(link)];\n\t\t\t\t\t\tif (line) {\n\t\t\t\t\t\t\tline.setVisibility(\"highlight\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tpanToNodes(nodes, fitBounds) {\n\t\tif (nodes.length === 1) {\n\t\t\tconst [lng, lat] = nodes[0].coordinates;\n\t\t\tthis.map.current.panTo({ lng, lat });\n\t\t\treturn;\n\t\t}\n\n\t\tlet minLng = 9999,\n\t\t\tminLat = 9999,\n\t\t\tmaxLng = -9999,\n\t\t\tmaxLat = -9999;\n\n\t\tnodes.forEach(node => {\n\t\t\tconst [lng, lat] = node.coordinates;\n\t\t\tif (lng < minLng) minLng = lng;\n\t\t\tif (lng > maxLng) maxLng = lng;\n\t\t\tif (lat < minLat) minLat = lat;\n\t\t\tif (lat > maxLat) maxLat = lat;\n\t\t});\n\n\t\tconst newBounds = {\n\t\t\teast: maxLng,\n\t\t\tnorth: maxLat,\n\t\t\tsouth: minLat,\n\t\t\twest: minLng\n\t\t};\n\n\t\tif (fitBounds) {\n\t\t\tthis.map.current.fitBounds(newBounds, window.innerWidth / 10);\n\t\t} else {\n\t\t\tthis.map.current.panToBounds(newBounds, window.innerWidth / 10);\n\t\t}\n\t}\n\n\thandleMarkerRef(ref) {\n\t\tif (ref) {\n\t\t\tthis.markerRefs[ref.props.node.id] = ref;\n\t\t}\n\t}\n\n\thandleLineRef(ref) {\n\t\tif (ref) {\n\t\t\tthis.lineRefs[this.linkId(ref.props.link)] = ref;\n\t\t}\n\t}\n\n\tlinkId(link) {\n\t\treturn `${link.from}-${link.to} ${link.status}`;\n\t}\n\n\tselectedNodeIds(match = this.props.match) {\n\t\tif (!match || !match.params || !match.params.nodeId) {\n\t\t\treturn [];\n\t\t}\n\t\treturn match.params.nodeId.split(\"-\");\n\t}\n}\n\nexport default withRouter(MapView);\n","export const mapStyles = [\n\t{\n\t\telementType: \"labels.icon\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"road\",\n\t\telementType: \"labels.icon\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"road.highway\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"transit\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t}\n];\n","import { connect } from \"react-redux\";\nimport PureMapView from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodes: state.nodes,\n\tlinks: state.links,\n\tsectors: state.sectors,\n\tkiosks: state.kiosks,\n\tfilters: state.filters\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureMapView);\n","import React, { PureComponent } from \"react\";\n\nimport { icons } from \"../NodeName\";\nimport { nodeColors } from \"../../utils\";\n\n// This should be defined elsewhere\nconst labels = [\"active\", \"supernode\", \"hub\", \"potential\", \"linkNYC\"];\n\nexport default class Filters extends PureComponent {\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"bg-white f5 shadow-2\">\n\t\t\t\t<div role=\"group\" className=\"dib pa2\">\n\t\t\t\t\t<div>{labels.map(label => this.renderFilter(label))}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderFilter(label) {\n\t\tconst { filters, statusCounts, toggleFilter } = this.props;\n\t\tconst enabled = filters[label] || filters[label] === undefined;\n\t\tconst opacity = enabled ? \"o-100\" : \"o-50 strike\";\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={label}\n\t\t\t\tclassName={`pointer flex items-center justify-between ${opacity}`}\n\t\t\t\tonClick={() => toggleFilter(label)}\n\t\t\t>\n\t\t\t\t<label\n\t\t\t\t\thtmlFor={label}\n\t\t\t\t\tstyle={{ color: nodeColors[label] }}\n\t\t\t\t\tclassName=\"ttc pointer flex items-center nowrap\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginLeft: \"-0.5rem\",\n\t\t\t\t\t\t\tmarginRight: \"-0.25rem\",\n\t\t\t\t\t\t\tmarginTop: \"-0.125rem\",\n\t\t\t\t\t\t\tmarginBottom: \"-0.125rem\"\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName=\"h2 w2 flex items-center justify-center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{icons[label]}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className=\"ml1\">\n\t\t\t\t\t\t{label.replace(\"-\", \" \")} ({statusCounts[label] || 0})\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname={label}\n\t\t\t\t\tdefaultChecked={enabled}\n\t\t\t\t\tclassName=\"ma0 ml2 dn\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureFilters from \"./component\";\n\nimport { toggleFilter } from \"../../actions\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tfilters: state.filters,\n\tstatusCounts: state.statusCounts\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n\ttoggleFilter: label => toggleFilter(label, dispatch)\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PureFilters);\n","export function fetchNodes(dispatch) {\n\tfetch(\"https://node-db.netlify.com/nodes.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_NODES_SUCCESS\", nodes: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function fetchLinks(dispatch) {\n\tfetch(\"https://node-db.netlify.com/links.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_LINKS_SUCCESS\", links: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function fetchKiosks(dispatch) {\n\tfetch(\"https://node-db.netlify.com/kiosks.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_KIOSKS_SUCCESS\", kiosks: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function toggleFilter(label, dispatch) {\n\tdispatch({ type: \"TOGGLE_FILTER\", label });\n}\n","import { nodeType } from \"../utils\";\n\nimport nodeData from \"../data/nodes\";\nimport linkData from \"../data/links\";\nimport sectorData from \"../data/sectors\";\nimport kiosks from \"../data/kiosks\";\n\nconst initialFilters = {\n\tlinkNYC: false,\n\tpotential: false,\n\tdead: false,\n\t\"potential-hub\": false,\n\t\"potential-supernode\": false\n};\n\nconst { nodes, links, sectors, nodesById } = addGraphData(\n\tnodeData,\n\tlinkData,\n\tsectorData\n);\nconst initialState = {\n\tnodes,\n\tlinks,\n\tsectors,\n\tkiosks: initialFilters.linkNYC === false ? [] : kiosks,\n\tnodesById,\n\tfilters: initialFilters,\n\tstatusCounts: getCounts(nodes, kiosks)\n};\n\nconst reducer = (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase \"TOGGLE_FILTER\":\n\t\t\tconst newFilters = {\n\t\t\t\t...state.filters,\n\t\t\t\t[action.label]:\n\t\t\t\t\tstate.filters[action.label] === undefined\n\t\t\t\t\t\t? false\n\t\t\t\t\t\t: !state.filters[action.label]\n\t\t\t};\n\t\t\tif (action.label === \"potential\") {\n\t\t\t\tconst hasValue = state.filters[\"potential\"] === undefined;\n\t\t\t\tconst newValue = hasValue ? false : !state.filters[\"potential\"];\n\t\t\t\tnewFilters[\"dead\"] = newValue;\n\t\t\t\tnewFilters[\"potential-hub\"] = newValue;\n\t\t\t\tnewFilters[\"potential-supernode\"] = newValue;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfilters: newFilters,\n\t\t\t\tkiosks: newFilters.linkNYC === false ? [] : kiosks\n\t\t\t};\n\t\tcase \"FETCH_NODES_SUCCESS\":\n\t\t\tconst { nodes: newNodes } = addGraphData(action.nodes, state.links);\n\t\t\tconst newStatusCounts = getCounts(action.nodes);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tnodes: newNodes,\n\t\t\t\tstatusCounts: newStatusCounts\n\t\t\t};\n\t\tcase \"FETCH_LINKS_SUCCESS\":\n\t\t\tconst { links: newLinks } = addGraphData(state.nodes, action.links);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlinks: newLinks\n\t\t\t};\n\t\tcase \"FETCH_KIOSKS_SUCCESS\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tkiosks: action.kiosks,\n\t\t\t\tstatusCounts: {\n\t\t\t\t\t...state.statusCounts,\n\t\t\t\t\tlinkNYC: action.kiosks.length\n\t\t\t\t}\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nfunction addGraphData(nodes, links, sectors) {\n\tconst nodesById = {};\n\n\t// Add links to nodes\n\tnodes.forEach(node => {\n\t\tnodesById[node.id] = node;\n\n\t\tnode.type = nodeType(node);\n\t\tnode.links = links.filter(\n\t\t\tlink =>\n\t\t\t\tlink.status === \"active\" &&\n\t\t\t\t(link.from === node.id || link.to === node.id)\n\t\t);\n\t});\n\n\t// Add nodes to links\n\tlinks.forEach(link => {\n\t\tlink.fromNode = nodesById[link.from];\n\t\tlink.toNode = nodesById[link.to];\n\t});\n\n\t// Add sectors to nodes\n\t// TODO: Calculate this in node-db\n\tconst sectorsByNodeId = {};\n\tsectors.forEach(sector => {\n\t\tsector.node = nodesById[sector.nodeId];\n\t\tsectorsByNodeId[sector.nodeId] = sectorsByNodeId[sector.nodeId] || [];\n\t\tsectorsByNodeId[sector.nodeId].push(sector);\n\t});\n\tnodes.forEach(node => {\n\t\tnode.sectors = sectorsByNodeId[node.id];\n\t});\n\n\t// Calculate connected nodes for each active node\n\tnodes.filter(node => node.status === \"Installed\").forEach(node => {\n\t\tconst connectedNodes = [node.id];\n\n\t\tlinks.forEach(link => {\n\t\t\tif (link.status !== \"active\") return;\n\t\t\tif (link.from === parseInt(node.id, 10)) {\n\t\t\t\tconnectedNodes.push(link.to);\n\t\t\t}\n\n\t\t\tif (link.to === parseInt(node.id, 10)) {\n\t\t\t\tconnectedNodes.push(link.from);\n\t\t\t}\n\t\t});\n\n\t\tnode.connectedNodes = connectedNodes;\n\t});\n\n\treturn { nodes, links, sectors, nodesById };\n}\n\nfunction getCounts(nodes, kiosks) {\n\tconst counts = {};\n\tnodes.forEach(node => {\n\t\tconst { type } = node;\n\t\tcounts[type] = (counts[type] || 0) + 1;\n\n\t\tif (type.indexOf(\"potential-\") > -1 || type === \"dead\") {\n\t\t\tcounts[\"potential\"] = (counts[\"potential\"] || 0) + 1;\n\t\t}\n\n\t\tif (type === \"supernode\" || type === \"hub\") {\n\t\t\tcounts[\"active\"] = (counts[\"active\"] || 0) + 1;\n\t\t}\n\t});\n\tcounts.linkNYC = kiosks.length;\n\treturn counts;\n}\n\nexport default reducer;\n","import { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport DocumentTitle from \"react-document-title\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nimport React, { Component } from \"react\";\nimport SearchBar from \"./components/SearchBar\";\nimport MapView from \"./components/MapView\";\nimport Filters from \"./components/Filters\";\n\nimport rootReducer from \"./reducers\";\n\nconst store = createStore(rootReducer);\n\nclass App extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<DocumentTitle title=\"Map - NYC Mesh\">\n\t\t\t\t<Provider store={store}>\n\t\t\t\t\t<Router basename={\"/map\"}>\n\t\t\t\t\t\t<div className=\"h-100 w-100 relative sans-serif\">\n\t\t\t\t\t\t\t<div className=\"absolute pa2 z-999 search-bar\">\n\t\t\t\t\t\t\t\t<SearchBar />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/nodes/:nodeId\"\n\t\t\t\t\t\t\t\tchildren={({ match }) => (\n\t\t\t\t\t\t\t\t\t<MapView match={match} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"absolute bottom-0 left-0 ma2\">\n\t\t\t\t\t\t\t\t<Filters />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Router>\n\t\t\t\t</Provider>\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\thandleNodeClick(node) {}\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nif (process.env.NODE_ENV === \"development\") require(\"tachyons\");\n\nReactDOM.render(<App />, document.getElementById(\"map-root\"));\n"],"sourceRoot":""}